(function(scope){function negateDimension(dimension){var result={};for(var k in dimension){result[k]=-dimension[k]}return result}function consumeOffset(string){return scope.consumeToken(/^(left|center|right|top|bottom)\b/i,string)||scope.consumeLengthOrPercent(string)}var offsetMap={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}};function parseOrigin(slots,string){var result=scope.consumeRepeated(consumeOffset,/^/,string);if(!result||""!=result[1])return;var tokens=result[0];tokens[0]=tokens[0]||"center";tokens[1]=tokens[1]||"center";if(3==slots){tokens[2]=tokens[2]||{px:0}}if(tokens.length!=slots){return}if(/top|bottom/.test(tokens[0])||/left|right/.test(tokens[1])){var tmp=tokens[0];tokens[0]=tokens[1];tokens[1]=tmp}if(!/left|right|center|Object/.test(tokens[0]))return;if(!/top|bottom|center|Object/.test(tokens[1]))return;return tokens.map(function(position){return"object"==typeof position?position:offsetMap[position]})}var mergeOffsetList=scope.mergeNestedRepeated.bind(null,scope.mergeDimensions," ");scope.addPropertiesHandler(parseOrigin.bind(null,3),mergeOffsetList,["transform-origin"]);scope.addPropertiesHandler(parseOrigin.bind(null,2),mergeOffsetList,["perspective-origin"]);function consumePosition(string){var result=scope.consumeRepeated(consumeOffset,/^/,string);if(!result){return}for(var tokens=result[0],out=[{"%":50},{"%":50}],pos=0,bottomOrRight=!1,i=0,token;i<tokens.length;i++){token=tokens[i];if("string"==typeof token){bottomOrRight=/bottom|right/.test(token);pos={left:0,right:0,center:pos,top:1,bottom:1}[token];out[pos]=offsetMap[token];if("center"==token){pos++}}else{if(bottomOrRight){token=negateDimension(token);token["%"]=(token["%"]||0)+100}out[pos]=token;pos++;bottomOrRight=!1}}return[out,result[1]]}function parsePositionList(string){var result=scope.consumeRepeated(consumePosition,/^,/,string);if(result&&""==result[1]){return result[0]}}scope.consumePosition=consumePosition;scope.mergeOffsetList=mergeOffsetList;var mergePositionList=scope.mergeNestedRepeated.bind(null,mergeOffsetList,", ");scope.addPropertiesHandler(parsePositionList,mergePositionList,["background-position","object-position"])})(webAnimations1);