(function(shared,scope,testing){function EffectTime(timing){var timeFraction=0,activeDuration=shared.calculateActiveDuration(timing),effectTime=function(localTime){return shared.calculateIterationProgress(activeDuration,localTime,timing)};effectTime._totalDuration=timing.delay+activeDuration+timing.endDelay;return effectTime}scope.KeyframeEffect=function(target,effectInput,timingInput,id){var effectTime=EffectTime(shared.normalizeTimingInput(timingInput)),interpolations=scope.convertEffectInput(effectInput),timeFraction,keyframeEffect=function(){WEB_ANIMATIONS_TESTING&&console.assert("undefined"!==typeof timeFraction);interpolations(target,timeFraction)};keyframeEffect._update=function(localTime){timeFraction=effectTime(localTime);return null!==timeFraction};keyframeEffect._clear=function(){interpolations(target,null)};keyframeEffect._hasSameTarget=function(otherTarget){return target===otherTarget};keyframeEffect._target=target;keyframeEffect._totalDuration=effectTime._totalDuration;keyframeEffect._id=id;return keyframeEffect};if(WEB_ANIMATIONS_TESTING){testing.webAnimations1KeyframeEffect=scope.KeyframeEffect;testing.effectTime=EffectTime}})(webAnimationsShared,webAnimations1,webAnimationsTesting);