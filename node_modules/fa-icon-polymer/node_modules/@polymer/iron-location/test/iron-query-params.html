<!DOCTYPE html><html><head><title>iron-location</title><script src="../../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script><script src="../../../wct-browser-legacy/browser.js"></script><script>define(['../../polymer/polymer-legacy.js']);</script><script>define(['../../promise-polyfill/promise-polyfill.js']);</script><script>define(['../iron-query-params.js']);</script><script>define(['./replace-state-patch.js']);</script></head><body><div id="safari-cooldown" hidden=""><div>Danger: URL overheating.</div><div>Safari and Chrome require a cooldown period before we call pushState/replaceState any more.</div><div>Testing will resume after 30 seconds.</div><div><a href="https://forums.developer.apple.com/thread/36650">More info Safari</a> <a href="https://codereview.chromium.org/2972073002">Chrome</a></div></div><test-fixture id="BasicQueryParams"><template><iron-query-params></iron-query-params></template></test-fixture><script>define(["../../polymer/polymer-legacy.js","@polymer/promise-polyfill/promise-polyfill.js","../iron-query-params.js","./replace-state-patch.js"],function(_polymerLegacy,_promisePolyfill,_ironQueryParams,_replaceStatePatch){"use strict";suite("<iron-query-params>",function(){var paramsElem;setup(function(){paramsElem=fixture("BasicQueryParams");return cooldownFunction.call(this)});teardown(function(){return cooldownFunction.call(this)});test("basic functionality with ?key=value params",function(){expect(paramsElem.paramsString).to.be.eq(void 0);expect(paramsElem.paramsObject).to.deep.eq({});paramsElem.paramsString="greeting=hello&target=world";expect(paramsElem.paramsObject).to.deep.equal({greeting:"hello",target:"world"});paramsElem.set("paramsObject.another","key");expect(paramsElem.paramsString).to.be.equal("greeting=hello&target=world&another=key")});test("encoding of params",function(){var mappings=[{string:"a=b",object:{a:"b"}},{string:"debug&ok",object:{debug:"",ok:""}},{string:"monster%20kid%3A=%F0%9F%98%BF&quotes=%27%27",object:{"monster kid:":"\uD83D\uDE3F",quotes:"''"}},{string:"yes%2C%20ok?%20what%20is%20up%20with%20%CB%9Athiiis%CB%9A=%E2%98%83",object:{"yes, ok? what is up with ˚thiiis˚":"\u2603"}}];mappings.forEach(function(mapping){paramsElem.paramsObject={};expect(paramsElem.paramsString).to.be.equal("");paramsElem.paramsString=mapping.string;expect(paramsElem.paramsObject).to.deep.equal(mapping.object);paramsElem.paramsObject={};expect(paramsElem.paramsString).to.be.equal("");paramsElem.paramsObject=mapping.object;expect(paramsElem.paramsString).to.be.equal(mapping.string)})});test("query strings with alternative encodings",function(){paramsElem.paramsString="key=value+with+spaces";expect(paramsElem.paramsObject).to.deep.equal({key:"value with spaces"})})})});</script></body></html>