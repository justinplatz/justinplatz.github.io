function getRunnerWindow(){var lastWindow,newWindow=window;while(lastWindow!=newWindow){lastWindow=newWindow;newWindow=newWindow.parent}return newWindow}var runnerWindow=getRunnerWindow();function patchReplaceState(){if("number"!==typeof runnerWindow.replaceStateCount){runnerWindow.replaceStateCount=0}var native=window.History.prototype.replaceState;function patch(){runnerWindow.replaceStateCount+=1;return native.apply(window.history,arguments)}window.History.prototype.replaceState=patch}window.cooldownFunction=function(done){return new Promise(function(res){if(done){done()};res()})};var isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isSafari=/^Apple/.test(navigator.vendor);if(isChrome||isSafari){window.cooldownFunction=function(done,force){var resolve,cooledDown=new Promise(function(res){resolve=res}).then(function(){if(done){done()}});if(85<runnerWindow.replaceStateCount||force){var cooldownPeriod=1e3*30;this.timeout(cooldownPeriod+5e3);var cooldownMessage=document.querySelector("#safari-cooldown");cooldownMessage.removeAttribute("hidden");setTimeout(function(){cooldownMessage.setAttribute("hidden","hidden");runnerWindow.replaceStateCount=0;resolve()},cooldownPeriod)}else{resolve()}return cooledDown};patchReplaceState()}