<html><head><link rel="import" href="../iron-location/iron-location.html"><link rel="import" href="../marked-element/marked-element.html"><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../prism-element/prism-highlighter.html"><link rel="import" href="../prism-element/prism-theme-default.html"><link rel="import" href="iron-doc-behavior.html"><link rel="import" href="iron-doc-class.html"><link rel="import" href="iron-doc-demo.html"><link rel="import" href="iron-doc-element.html"><link rel="import" href="iron-doc-mixin.html"><link rel="import" href="iron-doc-namespace.html"></head><body><dom-module id="iron-doc-viewer"><template><style include="iron-doc-viewer-styles prism-theme-default">iron-doc-demo{height:100%;}</style><iron-location path="{{_urlPath}}" hash="{{_urlHash}}"></iron-location><template is="dom-if" if="[[_equal(_descriptorType,'demos')]]" restamp=""><iron-doc-demo class="active" demo="[[_demo]]" src-prefix="[[demoSrcPrefix]]" title="{{title}}"></iron-doc-demo></template><template is="dom-if" if="[[_equal(_descriptorType,'namespaces')]]" restamp=""><iron-doc-namespace class="active" descriptor="[[_currentDescriptor]]" fragment-prefix="[[_fragmentPrefix]]" title="{{title}}" base-href="[[baseHref]]"></iron-doc-namespace></template><template is="dom-if" if="[[_equal(_descriptorType,'elements')]]" restamp=""><iron-doc-element class="active" descriptor="[[_currentDescriptor]]" fragment-prefix="[[_fragmentPrefix]]" title="{{title}}" base-href="[[baseHref]]"></iron-doc-element></template><template is="dom-if" if="[[_equal(_descriptorType,'mixins')]]" restamp=""><iron-doc-mixin class="active" descriptor="[[_currentDescriptor]]" fragment-prefix="[[_fragmentPrefix]]" title="{{title}}" base-href="[[baseHref]]"></iron-doc-mixin></template><template is="dom-if" if="[[_equal(_descriptorType,'behaviors')]]" restamp=""><iron-doc-behavior class="active" descriptor="[[_currentDescriptor]]" fragment-prefix="[[_fragmentPrefix]]" title="{{title}}" base-href="[[baseHref]]"></iron-doc-behavior></template><template is="dom-if" if="[[_equal(_descriptorType,'classes')]]" restamp=""><iron-doc-class class="active" descriptor="[[_currentDescriptor]]" fragment-prefix="[[_fragmentPrefix]]" title="{{title}}" base-href="[[baseHref]]"></iron-doc-class></template></template><script>(function(){Polymer({is:"iron-doc-viewer",properties:{descriptor:{type:Object},baseHref:{type:String,value:"#"},demoSrcPrefix:String,path:{type:String,notify:!0,value:null},rootNamespace:{type:String},title:{type:String,notify:!0},demo:{type:Boolean,computed:"_computeDemo(_demo)",reflectToAttribute:!0,notify:!0},_descriptorType:String,_urlPath:String,_urlHash:String,_currentDescriptor:Object,_fragmentPrefix:String,_scrollTo:String,_demo:Object},observers:["_routingChanged(baseHref, _urlPath, _urlHash)","_dataChanged(descriptor, path, _scrollTo)"],_equal:function(a,b){return a==b},_computeDemo:function(demo){return!!demo},_routingChanged:function(baseHref,urlPath,urlHash){if(0===baseHref.indexOf("#")){var parts=(urlHash||"").split("#");this.path=parts[0];this._scrollTo=parts[1]||null;this._fragmentPrefix=parts[0]+"#"}else{if(baseHref&&urlPath&&0===urlPath.indexOf(baseHref)){this.path=urlPath.substring(baseHref.length)}else{this.path=urlPath}this._scrollTo=urlHash}},_dataChanged:function(descriptor,path,scrollAnchor){if(!this.descriptor){this._descriptorType=null;return}if(!path||"/"===path){if(this.rootNamespace){this.path="/namespaces/"+this.rootNamespace}else{this._descriptorType="namespaces";this._currentDescriptor=descriptor}return}var descriptorType,name,demoName;if(this.baseHref&&0<=path.indexOf(this.baseHref)){path=path.substring(this.baseHref.length)}var parts=path.split("/");if(1<parts.length){descriptorType=parts[1];name=parts[2]}if(3<parts.length&&"demos"===parts[3]){demoName=parts.slice(4).join("/")}var namespace=getNamespace(this.descriptor,name)||this.descriptor;if(null==namespace){return}this._descriptorType=descriptorType;if("namespaces"===descriptorType){this._currentDescriptor=namespace.namespaces&&namespace.namespaces.filter(function(n){return n.name===name})[0]}else if("elements"===descriptorType){this._currentDescriptor=namespace.elements&&namespace.elements.filter(function(e){return e.name===name||e.tagname===name})[0]}else if("classes"===descriptorType){this._currentDescriptor=namespace.classes&&namespace.classes.filter(function(e){return(e.name||e.tagname)===name})[0]}else if("mixins"===descriptorType){this._currentDescriptor=namespace.mixins&&namespace.mixins.filter(function(m){return m.name===name})[0]}else if("behaviors"===descriptorType){var behaviors=((namespace.metadata||{}).polymer||{}).behaviors;this._currentDescriptor=behaviors&&behaviors.filter(function(b){return b.name===name})[0]}else if("functions"===descriptorType){this._currentDescriptor=namespace.functions&&namespace.functions.filter(function(f){return f.name===name})[0]}this._demo=null;if(demoName&&this._currentDescriptor&&this._currentDescriptor.demos){for(var i=0;i<this._currentDescriptor.demos.length;i++){var demo=this._currentDescriptor.demos[i],shortName=demo.description&&demo.description.toLowerCase().replace(/\s+/g,"-");if(demo.url===demoName||shortName&&shortName===demoName){this._demo=demo;this._descriptorType="demos";break}}}this.fire("view-changed");if(scrollAnchor){Polymer.dom.flush();var active=this.$$(".active");if(active&&active.scrollToAnchor){active.scrollToAnchor(scrollAnchor)}}}});function getNamespace(descriptor,name){var parts=name.split(".");if(2>parts.length){return}parts=parts.slice(0,parts.length-1);for(var namespace=descriptor,i=0;i<parts.length;i++){if(!namespace.namespaces){return}var matches=namespace.namespaces.filter(function(n){return n.name===parts[i]});if(0===matches.length){return}namespace=matches[0]};return namespace}})();</script></dom-module></body></html>