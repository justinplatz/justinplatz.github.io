(function(scope){'use strict';var parse=scope.parse||require("./parsing").parse,pretty=scope.pretty||require("./formatting").pretty;function normalize(error,prettyOptions){if(error.parsedStack)return error;var message=error.message||error.description||error||"<unknown error>",parsedStack=[];try{parsedStack=parse(error.stack||error.toString())}catch(error){}if(0===parsedStack.length&&error.fileName){parsedStack.push({method:"",location:error.fileName,line:error.lineNumber,column:error.columnNumber})}if(!prettyOptions||!prettyOptions.showColumns){for(var i=0,line;line=parsedStack[i];i++){delete line.column}}var prettyStack=message;if(0<parsedStack.length){prettyStack=prettyStack+"\n"+pretty(parsedStack,prettyOptions)}var cleanErr=Object.create(Error.prototype);cleanErr.message=message;cleanErr.stack=prettyStack;cleanErr.parsedStack=parsedStack;return cleanErr}scope.normalize=normalize})("undefined"!==typeof module?module.exports:this.Stacky=this.Stacky||{});