define(["../polymer/polymer-legacy.js","./prism-import.js","../polymer/lib/legacy/polymer-fn.js"],function(_polymerLegacy,_prismImport,_polymerFn){"use strict";var HIGHLIGHT_EVENT="syntax-highlight";(0,_polymerFn.Polymer)({is:"prism-highlighter",properties:{languages:{type:Object,value:function(){return{}}}},ready:function(){this._handler=this._highlight.bind(this)},attached:function(){(this.parentNode.host||this.parentElement).addEventListener(HIGHLIGHT_EVENT,this._handler)},detached:function(){(this.parentNode.host||this.parentElement).removeEventListener(HIGHLIGHT_EVENT,this._handler)},_highlight:function(event){if(!event.detail||!event.detail.code){_polymerLegacy.Base._warn("Malformed",HIGHLIGHT_EVENT,"event:",event.detail);return}event.stopPropagation();var detail=event.detail;detail.code=Prism.highlight(detail.code,this._detectLang(detail.code,detail.lang))},_detectLang:function(code,lang){if(!lang){return code.match(/^\s*</)?Prism.languages.markup:Prism.languages.javascript}if(this.languages[lang]){return this.languages[lang]}else if(Prism.languages[lang]){return Prism.languages[lang]}switch(lang.substr(0,2)){case"js":case"es":return Prism.languages.javascript;case"c":return Prism.languages.clike;default:return Prism.languages.markup;}}})});