<!DOCTYPE html><html><head><script src=".././test-flags.js"></script><script src="../../../webcomponents-platform/webcomponents-platform.js"></script><script src="../../../es6-promise/dist/es6-promise.auto.min.js"></script><script src="../../../template/template.js"></script><script src="../../../html-imports/html-imports.min.js"></script><script>WCT={waitFor:function(cb){HTMLImports.whenReady(cb)}};</script><script src="../../../custom-elements/custom-elements.min.js"></script><script src="../../apply-shim.min.js"></script><script>if(window.customElements&&customElements.polyfillWrapFlushCallback){customElements.polyfillWrapFlushCallback(function(cb){HTMLImports.whenReady(cb)})}</script><script src="../../custom-style-interface.min.js"></script><script src="../module/generated/make-element.js"></script><script src="../module/generated/custom-style-element.js"></script><script src="../../../web-component-tester/browser.js"></script></head><body><custom-style><style>#target{display:block;@apply --late;}</style></custom-style><template id="late"><custom-style class="late-style"><style>html{--late:{border:2px solid red;};}</style></custom-style></template><div id="target"></div><script>suite("custom-style only",function(){var host=document.querySelector("#target");test("custom-style by itself works as expected",function(){assert.equal(getComputedStyle(host).getPropertyValue("display").trim(),"block")});test("late custom-style updates styling",function(done){var lateTemplate=document.querySelector("template#late");document.body.appendChild(document.importNode(lateTemplate.content,!0));requestAnimationFrame(function(){requestAnimationFrame(function(){assert.equal(getComputedStyle(host).borderTopWidth.trim(),"2px");done()})})})});</script></body></html>