("function"===typeof define&&define.amd&&function(m){define("formatio",["samsam"],m)}||"object"===typeof module&&function(m){module.exports=m(require("samsam"))}||function(m){this.formatio=m(this.samsam)})(function(samsam){"use strict";var _Mathmin=Math.min,formatio={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},hasOwn=Object.prototype.hasOwnProperty,specialObjects=[];if("undefined"!==typeof global){specialObjects.push({object:global,value:"[object global]"})}if("undefined"!==typeof document){specialObjects.push({object:document,value:"[object HTMLDocument]"})}if("undefined"!==typeof window){specialObjects.push({object:window,value:"[object Window]"})}function functionName(func){if(!func){return""}if(func.displayName){return func.displayName}if(func.name){return func.name}var matches=func.toString().match(/function\s+([^\(]+)/m);return matches&&matches[1]||""}function constructorName(f,object){var name=functionName(object&&object.constructor),excludes=f.excludeConstructors||formatio.excludeConstructors||[],i,l;for(i=0,l=excludes.length;i<l;++i){if("string"===typeof excludes[i]&&excludes[i]===name){return""}else if(excludes[i].test&&excludes[i].test(name)){return""}}return name}function isCircular(object,objects){if("object"!==typeof object){return!1}var i,l;for(i=0,l=objects.length;i<l;++i){if(objects[i]===object){return!0}}return!1}function ascii(f,object,processed,indent){if("string"===typeof object){var qs=f.quoteStrings,quote="boolean"!==typeof qs||qs;return processed||quote?"\""+object+"\"":object}if("function"===typeof object&&!(object instanceof RegExp)){return ascii.func(object)}processed=processed||[];if(isCircular(object,processed)){return"[Circular]"}if("[object Array]"===Object.prototype.toString.call(object)){return ascii.array.call(f,object,processed)}if(!object){return(1/object===-Infinity?"-0":object)+""}if(samsam.isElement(object)){return ascii.element(object)}if("function"===typeof object.toString&&object.toString!==Object.prototype.toString){return object.toString()}var i,l;for(i=0,l=specialObjects.length;i<l;i++){if(object===specialObjects[i].object){return specialObjects[i].value}}return ascii.object.call(f,object,processed,indent)}ascii.func=function(func){return"function "+functionName(func)+"() {}"};ascii.array=function(array,processed){processed=processed||[];processed.push(array);var pieces=[],i,l;l=0<this.limitChildrenCount?_Mathmin(this.limitChildrenCount,array.length):array.length;for(i=0;i<l;++i){pieces.push(ascii(this,array[i],processed))}if(l<array.length)pieces.push("[... "+(array.length-l)+" more elements]");return"["+pieces.join(", ")+"]"};ascii.object=function(object,processed,indent){processed=processed||[];processed.push(object);indent=indent||0;var pieces=[],properties=samsam.keys(object).sort(),length=3,prop,str,obj,i,k,l;l=0<this.limitChildrenCount?_Mathmin(this.limitChildrenCount,properties.length):properties.length;for(i=0;i<l;++i){prop=properties[i];obj=object[prop];if(isCircular(obj,processed)){str="[Circular]"}else{str=ascii(this,obj,processed,indent+2)}str=(/\s/.test(prop)?"\""+prop+"\"":prop)+": "+str;length+=str.length;pieces.push(str)}var cons=constructorName(this,object),prefix=cons?"["+cons+"] ":"",is="";for(i=0,k=indent;i<k;++i){is+=" "}if(l<properties.length)pieces.push("[... "+(properties.length-l)+" more elements]");if(80<length+indent){return prefix+"{\n  "+is+pieces.join(",\n  "+is)+"\n"+is+"}"}return prefix+"{ "+pieces.join(", ")+" }"};ascii.element=function(element){var tagName=element.tagName.toLowerCase(),attrs=element.attributes,attr,pairs=[],attrName,i,l,val;for(i=0,l=attrs.length;i<l;++i){attr=attrs.item(i);attrName=attr.nodeName.toLowerCase().replace("html:","");val=attr.nodeValue;if("contenteditable"!==attrName||"inherit"!==val){if(!!val){pairs.push(attrName+"=\""+val+"\"")}}}var formatted="<"+tagName+(0<pairs.length?" ":""),content=element.innerHTML;if(20<content.length){content=content.substr(0,20)+"[...]"}var res=formatted+pairs.join(" ")+">"+content+"</"+tagName+">";return res.replace(/ contentEditable="inherit"/,"")};function Formatio(options){for(var opt in options){this[opt]=options[opt]}}Formatio.prototype={functionName:functionName,configure:function(options){return new Formatio(options)},constructorName:function(object){return constructorName(this,object)},ascii:function(object,processed,indent){return ascii(this,object,processed,indent)}};return Formatio.prototype});