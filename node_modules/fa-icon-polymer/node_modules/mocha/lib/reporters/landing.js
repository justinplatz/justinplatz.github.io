'use strict';var Base=require("./base"),inherits=require("../utils").inherits,cursor=Base.cursor,color=Base.color;exports=module.exports=Landing;Base.colors.plane=0;Base.colors["plane crash"]=31;Base.colors.runway=90;function Landing(runner){Base.call(this,runner);var self=this,width=0|.75*Base.window.width,total=runner.total,stream=process.stdout,plane=color("plane","\u2708"),crashed=-1,n=0;function runway(){var buf=Array(width).join("-");return"  "+color("runway",buf)}runner.on("start",function(){stream.write("\n\n\n  ");cursor.hide()});runner.on("test end",function(test){var col=-1===crashed?0|width*++n/total:crashed;if("failed"===test.state){plane=color("plane crash","\u2708");crashed=col}stream.write("\x1B["+(width+1)+"D\x1B[2A");stream.write(runway());stream.write("\n  ");stream.write(color("runway",Array(col).join("\u22C5")));stream.write(plane);stream.write(color("runway",Array(width-col).join("\u22C5")+"\n"));stream.write(runway());stream.write("\x1B[0m")});runner.on("end",function(){cursor.show();console.log();self.epilogue()})}inherits(Landing,Base);