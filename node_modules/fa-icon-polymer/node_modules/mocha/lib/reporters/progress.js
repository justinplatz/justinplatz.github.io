'use strict';var Base=require("./base"),inherits=require("../utils").inherits,color=Base.color,cursor=Base.cursor;exports=module.exports=Progress;Base.colors.progress=90;function Progress(runner,options){Base.call(this,runner);var self=this,width=0|.5*Base.window.width,total=runner.total,complete=0,lastN=-1;options=options||{};options.open=options.open||"[";options.complete=options.complete||"\u25AC";options.incomplete=options.incomplete||Base.symbols.dot;options.close=options.close||"]";options.verbose=!1;runner.on("start",function(){console.log();cursor.hide()});runner.on("test end",function(){complete++;var percent=complete/total,n=0|width*percent,i=width-n;if(n===lastN&&!options.verbose){return}lastN=n;cursor.CR();process.stdout.write("\x1B[J");process.stdout.write(color("progress","  "+options.open));process.stdout.write(Array(n).join(options.complete));process.stdout.write(Array(i).join(options.incomplete));process.stdout.write(color("progress",options.close));if(options.verbose){process.stdout.write(color("progress"," "+complete+" of "+total))}});runner.on("end",function(){cursor.show();console.log();self.epilogue()})}inherits(Progress,Base);