'use strict';var Test=require("../test");module.exports=function(suite){var suites=[suite];suite.on("pre-require",function(context,file,mocha){var common=require("./common")(suites,context,mocha);context.before=common.before;context.after=common.after;context.beforeEach=common.beforeEach;context.afterEach=common.afterEach;context.run=mocha.options.delay&&common.runWithSuite(suite);context.suite=function(title){if(1<suites.length){suites.shift()}return common.suite.create({title:title,file:file,fn:!1})};context.suite.only=function(title){if(1<suites.length){suites.shift()}return common.suite.only({title:title,file:file,fn:!1})};context.test=function(title,fn){var test=new Test(title,fn);test.file=file;suites[0].addTest(test);return test};context.test.only=function(title,fn){return common.test.only(mocha,context.test(title,fn))};context.test.skip=common.test.skip;context.test.retries=common.test.retries})};