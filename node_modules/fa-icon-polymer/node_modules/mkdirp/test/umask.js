var mkdirp=require("../"),path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("implicit mode from umask",function(t){var _Mathfloor=Math.floor;t.plan(5);var x=_Mathfloor(65536*Math.random()).toString(16),y=_Mathfloor(65536*Math.random()).toString(16),z=_Mathfloor(65536*Math.random()).toString(16),file="/tmp/"+[x,y,z].join("/");mkdirp(file,function(err){t.ifError(err);exists(file,function(ex){t.ok(ex,"file created");fs.stat(file,function(err,stat){t.ifError(err);t.equal(stat.mode&_0777,_0777&~process.umask());t.ok(stat.isDirectory(),"target not a directory")})})})});