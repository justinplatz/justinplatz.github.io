var mkdirp=require("../"),path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("sync",function(t){var _Mathfloor=Math.floor;t.plan(4);var x=_Mathfloor(65536*Math.random()).toString(16),y=_Mathfloor(65536*Math.random()).toString(16),z=_Mathfloor(65536*Math.random()).toString(16),file="/tmp/"+[x,y,z].join("/");try{mkdirp.sync(file,_0755)}catch(err){t.fail(err);return t.end()}exists(file,function(ex){t.ok(ex,"file created");fs.stat(file,function(err,stat){t.ifError(err);t.equal(stat.mode&_0777,_0755);t.ok(stat.isDirectory(),"target not a directory")})})});