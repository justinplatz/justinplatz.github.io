var mkdirp=require("../"),path=require("path"),test=require("tap").test,mockfs=require("mock-fs"),_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("opts.fs",function(t){var _Mathfloor=Math.floor;t.plan(5);var x=_Mathfloor(65536*Math.random()).toString(16),y=_Mathfloor(65536*Math.random()).toString(16),z=_Mathfloor(65536*Math.random()).toString(16),file="/beep/boop/"+[x,y,z].join("/"),xfs=mockfs.fs();mkdirp(file,{fs:xfs,mode:_0755},function(err){t.ifError(err);xfs.exists(file,function(ex){t.ok(ex,"created file");xfs.stat(file,function(err,stat){t.ifError(err);t.equal(stat.mode&_0777,_0755);t.ok(stat.isDirectory(),"target not a directory")})})})});