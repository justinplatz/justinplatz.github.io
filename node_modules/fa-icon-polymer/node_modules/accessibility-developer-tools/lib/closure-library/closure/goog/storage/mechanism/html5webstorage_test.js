goog.setTestOnly("goog.storage.mechanism.HTML5WebStorageTest");goog.provide("goog.storage.mechanism.HTML5MockStorage");goog.provide("goog.storage.mechanism.HTML5WebStorageTest");goog.provide("goog.storage.mechanism.MockThrowableStorage");goog.require("goog.storage.mechanism.ErrorCode");goog.require("goog.storage.mechanism.HTML5WebStorage");goog.require("goog.testing.jsunit");goog.storage.mechanism.MockThrowableStorage=function(opt_isStorageDisabled){this.isStorageDisabled_=!!opt_isStorageDisabled;this.length=opt_isStorageDisabled?0:1};goog.storage.mechanism.MockThrowableStorage.prototype.setItem=function(key,value){if(this.isStorageDisabled_){throw goog.storage.mechanism.ErrorCode.STORAGE_DISABLED}else{throw goog.storage.mechanism.ErrorCode.QUOTA_EXCEEDED}};goog.storage.mechanism.MockThrowableStorage.prototype.removeItem=function(key){};goog.storage.mechanism.MockThrowableStorage.prototype.key=function(index){return"dummyKey"};goog.storage.mechanism.HTML5MockStorage=function(opt_isStorageDisabled){goog.storage.mechanism.HTML5MockStorage.base(this,"constructor",new goog.storage.mechanism.MockThrowableStorage(opt_isStorageDisabled))};goog.inherits(goog.storage.mechanism.HTML5MockStorage,goog.storage.mechanism.HTML5WebStorage);function testIsNotAvailableWhenQuotaExceeded(){var storage=new goog.storage.mechanism.HTML5MockStorage(!1);assertFalse(storage.isAvailable())}function testIsNotAvailableWhenStorageDisabled(){var storage=new goog.storage.mechanism.HTML5MockStorage(!0);assertFalse(storage.isAvailable())}function testSetThrowsExceptionWhenQuotaExceeded(){var storage=new goog.storage.mechanism.HTML5MockStorage(!1),isQuotaExceeded=!1;try{storage.set("foobar","1")}catch(e){isQuotaExceeded=e==goog.storage.mechanism.ErrorCode.QUOTA_EXCEEDED}assertTrue(isQuotaExceeded)}function testSetThrowsExceptionWhenStorageDisabled(){var storage=new goog.storage.mechanism.HTML5MockStorage(!0),isStorageDisabled=!1;try{storage.set("foobar","1")}catch(e){isStorageDisabled=e==goog.storage.mechanism.ErrorCode.STORAGE_DISABLED}assertTrue(isStorageDisabled)}function testKeyIterationWithKeyMethod(){var storage=new goog.storage.mechanism.HTML5MockStorage(!0);assertEquals("dummyKey",storage.key(1))}