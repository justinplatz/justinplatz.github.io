goog.provide("goog.structs.CircularBuffer");goog.structs.CircularBuffer=function(opt_maxSize){this.nextPtr_=0;this.maxSize_=opt_maxSize||100;this.buff_=[]};goog.structs.CircularBuffer.prototype.add=function(item){var previousItem=this.buff_[this.nextPtr_];this.buff_[this.nextPtr_]=item;this.nextPtr_=(this.nextPtr_+1)%this.maxSize_;return previousItem};goog.structs.CircularBuffer.prototype.get=function(index){index=this.normalizeIndex_(index);return this.buff_[index]};goog.structs.CircularBuffer.prototype.set=function(index,item){index=this.normalizeIndex_(index);this.buff_[index]=item};goog.structs.CircularBuffer.prototype.getCount=function(){return this.buff_.length};goog.structs.CircularBuffer.prototype.isEmpty=function(){return 0==this.buff_.length};goog.structs.CircularBuffer.prototype.clear=function(){this.buff_.length=0;this.nextPtr_=0};goog.structs.CircularBuffer.prototype.getValues=function(){return this.getNewestValues(this.getCount())};goog.structs.CircularBuffer.prototype.getNewestValues=function(maxCount){for(var l=this.getCount(),start=this.getCount()-maxCount,rv=[],i=start;i<l;i++){rv.push(this.get(i))}return rv};goog.structs.CircularBuffer.prototype.getKeys=function(){for(var rv=[],l=this.getCount(),i=0;i<l;i++){rv[i]=i}return rv};goog.structs.CircularBuffer.prototype.containsKey=function(key){return key<this.getCount()};goog.structs.CircularBuffer.prototype.containsValue=function(value){for(var l=this.getCount(),i=0;i<l;i++){if(this.get(i)==value){return!0}}return!1};goog.structs.CircularBuffer.prototype.getLast=function(){if(0==this.getCount()){return null}return this.get(this.getCount()-1)};goog.structs.CircularBuffer.prototype.normalizeIndex_=function(index){if(index>=this.buff_.length){throw Error("Out of bounds exception")}if(this.buff_.length<this.maxSize_){return index}return(this.nextPtr_+ +index)%this.maxSize_};