goog.provide("goog.testing.AsyncTestCaseSyncTest");goog.setTestOnly("goog.testing.AsyncTestCaseSyncTest");goog.require("goog.testing.AsyncTestCase");goog.require("goog.testing.jsunit");var setUpCalled=!1,curTestIsDone=!0,oldTimeout=window.setTimeout,asyncTestCase=goog.testing.AsyncTestCase.createAndInstall(document.title);function doAsyncStuff(numAsyncCalls,name){if(0<numAsyncCalls){curTestIsDone=!1;asyncTestCase.waitForAsync("doAsyncStuff-"+name+"("+numAsyncCalls+")");window.setTimeout(function(){doAsyncStuff(numAsyncCalls-1,name)},0)}else{curTestIsDone=!0;asyncTestCase.continueTesting()}}function setUpPage(){debug("setUpPage was called.");window.setTimeout=function(callback,time){callback()};doAsyncStuff(3,"setUpPage")}function setUp(){assertTrue(curTestIsDone);doAsyncStuff(3,"setUp")}function tearDown(){assertTrue(curTestIsDone)}function test1(){assertTrue(curTestIsDone);doAsyncStuff(1,"test1")}function test2(){assertTrue(curTestIsDone);doAsyncStuff(2,"test2")}function test3(){assertTrue(curTestIsDone);doAsyncStuff(5,"test3")}var callback=function(){curTestIsDone=!0;asyncTestCase.signal()},doAsyncSignals=function(){curTestIsDone=!1;window.setTimeout(callback,0)};function testSignalsReturn(){doAsyncSignals();doAsyncSignals();doAsyncSignals();asyncTestCase.waitForSignals(3)}function testSignalsCallContinueTestingBeforeFinishing(){doAsyncSignals();asyncTestCase.waitForSignals(2);window.setTimeout(function(){var thrown=assertThrows(function(){asyncTestCase.continueTesting()});assertEquals("Still waiting for 1 signals.",thrown.message)},0);doAsyncSignals()}function tearDownPage(){debug("tearDownPage was called.");assertTrue(curTestIsDone);window.setTimeout=oldTimeout}