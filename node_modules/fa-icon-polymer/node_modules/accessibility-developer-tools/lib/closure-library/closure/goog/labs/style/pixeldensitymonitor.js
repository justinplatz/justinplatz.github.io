goog.provide("goog.labs.style.PixelDensityMonitor");goog.provide("goog.labs.style.PixelDensityMonitor.Density");goog.provide("goog.labs.style.PixelDensityMonitor.EventType");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.labs.style.PixelDensityMonitor=function(opt_domHelper){goog.labs.style.PixelDensityMonitor.base(this,"constructor");this.window_=opt_domHelper?opt_domHelper.getWindow():window;this.lastDensity_=this.getDensity();this.listener_=goog.bind(this.handleMediaQueryChange_,this);this.mediaQueryList_=this.window_.matchMedia?this.window_.matchMedia(goog.labs.style.PixelDensityMonitor.HIGH_DENSITY_QUERY_):null};goog.inherits(goog.labs.style.PixelDensityMonitor,goog.events.EventTarget);goog.labs.style.PixelDensityMonitor.Density={NORMAL:1,HIGH:2};goog.labs.style.PixelDensityMonitor.EventType={CHANGE:goog.events.getUniqueId("change")};goog.labs.style.PixelDensityMonitor.HIGH_DENSITY_RATIO_=1.5;goog.labs.style.PixelDensityMonitor.HIGH_DENSITY_QUERY_="(min-resolution: 1.5dppx), (-webkit-min-device-pixel-ratio: 1.5)";goog.labs.style.PixelDensityMonitor.prototype.start=function(){if(this.mediaQueryList_){this.mediaQueryList_.addListener(this.listener_)}};goog.labs.style.PixelDensityMonitor.prototype.getDensity=function(){if(this.window_.devicePixelRatio>=goog.labs.style.PixelDensityMonitor.HIGH_DENSITY_RATIO_){return goog.labs.style.PixelDensityMonitor.Density.HIGH}else{return goog.labs.style.PixelDensityMonitor.Density.NORMAL}};goog.labs.style.PixelDensityMonitor.prototype.handleMediaQueryChange_=function(mql){var newDensity=this.getDensity();if(this.lastDensity_!=newDensity){this.lastDensity_=newDensity;this.dispatchEvent(goog.labs.style.PixelDensityMonitor.EventType.CHANGE)}};goog.labs.style.PixelDensityMonitor.prototype.disposeInternal=function(){if(this.mediaQueryList_){this.mediaQueryList_.removeListener(this.listener_)}goog.labs.style.PixelDensityMonitor.base(this,"disposeInternal")};