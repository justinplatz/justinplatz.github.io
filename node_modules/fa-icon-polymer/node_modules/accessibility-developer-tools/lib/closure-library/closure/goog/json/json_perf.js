goog.provide("goog.jsonPerf");goog.require("goog.dom");goog.require("goog.json");goog.require("goog.math");goog.require("goog.string");goog.require("goog.testing.PerformanceTable");goog.require("goog.testing.PropertyReplacer");goog.require("goog.testing.jsunit");goog.setTestOnly("goog.jsonPerf");var table=new goog.testing.PerformanceTable(goog.dom.getElement("perfTable")),stubs=new goog.testing.PropertyReplacer;function tearDown(){stubs.reset()}function testSerialize(){var obj=populateObject({},50,4);table.run(function(){var s=JSON.stringify(obj)},"Stringify using JSON.stringify");table.run(function(){var s=goog.json.serialize(obj)},"Stringify using goog.json.serialize")}function testParse(){var obj=populateObject({},50,4),s=JSON.stringify(obj);table.run(function(){var o=JSON.parse(s)},"Parse using JSON.parse");table.run(function(){var o=goog.json.parse(s)},"Parse using goog.json.parse");table.run(function(){var o=goog.json.unsafeParse(s)},"Parse using goog.json.unsafeParse")}function populateObject(obj,numProperties,depth){if(0==depth){return randomLiteral()}for(var i=0,bucket;i<numProperties;i++){bucket=goog.math.randomInt(3);switch(bucket){case 0:obj[i]=randomLiteral();break;case 1:obj[i]=populateObject({},numProperties,depth-1);break;case 2:obj[i]=populateObject([],numProperties,depth-1);break;}}return obj}function randomLiteral(){var bucket=goog.math.randomInt(3);switch(bucket){case 0:return goog.string.getRandomString();case 1:return Math.random();case 2:return .5<=Math.random();}return null}