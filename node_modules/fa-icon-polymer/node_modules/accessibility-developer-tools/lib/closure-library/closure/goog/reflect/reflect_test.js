goog.provide("goog.reflectTest");goog.setTestOnly("goog.reflectTest");goog.require("goog.object");goog.require("goog.reflect");goog.require("goog.testing.jsunit");var doubleFn=function(key){return 2*key},tripleFn=function(key){return 3*key},throwsFn=function(key){throw new Error("Shouldn't be called.")},passthroughFn=function(key){return key};function testCache(){var cacheObj={};assertEquals(2,goog.reflect.cache(cacheObj,1,doubleFn));assertEquals(2,cacheObj[1]);assertEquals(1,goog.object.getCount(cacheObj));assertEquals(2,goog.reflect.cache(cacheObj,1,throwsFn));assertEquals(2,cacheObj[1]);assertEquals(1,goog.object.getCount(cacheObj));assertEquals("toString",goog.reflect.cache(cacheObj,"toString",passthroughFn));assertEquals("toString",goog.reflect.cache(cacheObj,"toString",throwsFn))}function testCache_keyFn(){var cacheObj={};assertEquals(3,goog.reflect.cache(cacheObj,1,tripleFn,doubleFn));assertEquals(3,cacheObj[2]);assertEquals(1,goog.object.getCount(cacheObj));assertEquals(3,goog.reflect.cache(cacheObj,1,throwsFn,doubleFn));assertEquals(3,cacheObj[2]);assertEquals(1,goog.object.getCount(cacheObj));assertEquals(2,goog.reflect.cache(cacheObj,1,doubleFn,tripleFn));assertEquals(2,cacheObj[3]);assertEquals(2,goog.object.getCount(cacheObj));assertThrows(function(){goog.reflect.cache(cacheObj,1,tripleFn,throwsFn)})}