goog.provide("goog.debug.TraceTest");goog.setTestOnly("goog.debug.TraceTest");goog.require("goog.debug.Trace");goog.require("goog.testing.jsunit");function testTracer(){goog.debug.Trace.initCurrentTrace();for(var t=goog.debug.Trace.startTracer("foo"),sum=0,i=0;1e5>i;i++){sum+=i}goog.debug.Trace.stopTracer(t);var trace=goog.debug.Trace.getFormattedTrace(),lines=trace.split("\n");assertEquals(8,lines.length);assertNotNull(lines[0].match(/^\s*\d+\.\d+\s+Start\s+foo$/));assertNotNull(lines[1].match(/^\s*\d+\s+\d+\.\d+\s+Done\s+\d+ ms\s+foo$/))}function testPerf(){goog.debug.Trace.initCurrentTrace();for(var count=1e3,start=goog.now(),i=0;i<count;i++){var t=goog.debug.Trace.startTracer("foo"),t2=goog.debug.Trace.startTracer("foo.bar"),t3=goog.debug.Trace.startTracer("foo.bar.baz");goog.debug.Trace.stopTracer(t3);var t4=goog.debug.Trace.startTracer("foo.bar.bim");goog.debug.Trace.stopTracer(t4);goog.debug.Trace.stopTracer(t2);goog.debug.Trace.stopTracer(t)}count*=4;var end=goog.now()}