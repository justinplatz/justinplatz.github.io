goog.provide("goog.positioning.MenuAnchoredPositionTest");goog.setTestOnly("goog.positioning.MenuAnchoredPositionTest");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.positioning.Corner");goog.require("goog.positioning.MenuAnchoredPosition");goog.require("goog.testing.jsunit");var offscreenAnchor,onscreenAnchor,customAnchor,menu,corner=goog.positioning.Corner,savedMenuHtml;function setUp(){offscreenAnchor=goog.dom.getElement("offscreen-anchor");onscreenAnchor=goog.dom.getElement("onscreen-anchor");customAnchor=goog.dom.getElement("custom-anchor");customAnchor.style.left="0";customAnchor.style.top="0";menu=goog.dom.getElement("menu");savedMenuHtml=menu.innerHTML;menu.style.left="20px";menu.style.top="20px"}function tearDown(){menu.innerHTML=savedMenuHtml}function testRepositionWithAdjustAndOnscreenAnchor(){for(var i=0;200>i;i++){menu.appendChild(goog.dom.createDom(goog.dom.TagName.DIV,null,"New Item "+i))}var pos=new goog.positioning.MenuAnchoredPosition(onscreenAnchor,corner.TOP_LEFT,!0);pos.reposition(menu,corner.TOP_LEFT);var offset=0;assertEquals(offset,menu.offsetTop);assertEquals(5,menu.offsetLeft)}function testRepositionWithAdjustAndOffscreenAnchor(){var pos=new goog.positioning.MenuAnchoredPosition(offscreenAnchor,corner.TOP_LEFT,!0);pos.reposition(menu,corner.TOP_LEFT);assertEquals(-1e3,menu.offsetTop);assertEquals(-1e3,menu.offsetLeft)}function testRespositionFailoverEvenWhenResizeHeightIsOn(){var pos=new goog.positioning.MenuAnchoredPosition(onscreenAnchor,corner.TOP_LEFT,!0,!0);pos.reposition(menu,corner.TOP_RIGHT);assertEquals(5,menu.offsetTop);assertEquals(5,menu.offsetLeft)}function testRepositionToBottomLeftWhenBottomFailsAndRightFailsAndResizeOn(){var pageSize=goog.dom.getViewportSize();customAnchor.style.left=pageSize.width-10+"px";for(var i=0;200>i;i++){menu.appendChild(goog.dom.createDom(goog.dom.TagName.DIV,null,"New Item "+i))}var pos=new goog.positioning.MenuAnchoredPosition(customAnchor,corner.TOP_LEFT,!0,!0);pos.reposition(menu,corner.TOP_LEFT);assertEquals(menu.offsetLeft+menu.offsetWidth,customAnchor.offsetLeft)}