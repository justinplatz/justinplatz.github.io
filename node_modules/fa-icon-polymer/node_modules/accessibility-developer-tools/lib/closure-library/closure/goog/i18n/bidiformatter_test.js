goog.provide("goog.i18n.BidiFormatterTest");goog.setTestOnly("goog.i18n.BidiFormatterTest");goog.require("goog.html.SafeHtml");goog.require("goog.html.testing");goog.require("goog.i18n.BidiFormatter");goog.require("goog.i18n.bidi.Dir");goog.require("goog.i18n.bidi.Format");goog.require("goog.testing.jsunit");var LRM=goog.i18n.bidi.Format.LRM,RLM=goog.i18n.bidi.Format.RLM,LRE=goog.i18n.bidi.Format.LRE,RLE=goog.i18n.bidi.Format.RLE,PDF=goog.i18n.bidi.Format.PDF,LTR=goog.i18n.bidi.Dir.LTR,RTL=goog.i18n.bidi.Dir.RTL,NEUTRAL=goog.i18n.bidi.Dir.NEUTRAL,he="\u05E0\u05E1",en="abba",html="&lt;",longEn="abba sabba gabba ",longHe="\u05E0 \u05E1 \u05E0 ",ltrFmt=new goog.i18n.BidiFormatter(LTR,!1),rtlFmt=new goog.i18n.BidiFormatter(RTL,!1),unkFmt=new goog.i18n.BidiFormatter(null,!1);function testGetContextDir(){assertEquals(null,unkFmt.getContextDir());assertEquals(null,new goog.i18n.BidiFormatter(NEUTRAL).getContextDir());assertEquals(LTR,ltrFmt.getContextDir());assertEquals(RTL,rtlFmt.getContextDir())}function testEstimateDirection(){assertEquals(NEUTRAL,ltrFmt.estimateDirection(""));assertEquals(NEUTRAL,rtlFmt.estimateDirection(""));assertEquals(NEUTRAL,unkFmt.estimateDirection(""));assertEquals(LTR,ltrFmt.estimateDirection(en));assertEquals(LTR,rtlFmt.estimateDirection(en));assertEquals(LTR,unkFmt.estimateDirection(en));assertEquals(RTL,ltrFmt.estimateDirection(he));assertEquals(RTL,rtlFmt.estimateDirection(he));assertEquals(RTL,unkFmt.estimateDirection(he));assertEquals(LTR,ltrFmt.estimateDirection("<some sort of tag/>"+he+" &amp;",!1));assertEquals(RTL,ltrFmt.estimateDirection("<some sort of tag/>"+he+" &amp;",!0))}function testDirAttrValue(){assertEquals("overall dir is RTL, context dir is LTR","rtl",ltrFmt.dirAttrValue(he,!0));assertEquals("overall dir and context dir are RTL","rtl",rtlFmt.dirAttrValue(he,!0));assertEquals("overall dir is LTR, context dir is RTL","ltr",rtlFmt.dirAttrValue(en,!0));assertEquals("overall dir and context dir are LTR","ltr",ltrFmt.dirAttrValue(en,!0));assertEquals("ltr",ltrFmt.dirAttrValue("",!0));assertEquals("rtl",rtlFmt.dirAttrValue("",!0));assertEquals("ltr",unkFmt.dirAttrValue("",!0));assertEquals("rtl",ltrFmt.dirAttrValue(he+"<some sort of an HTML tag>",!0));assertEquals("ltr",ltrFmt.dirAttrValue(he+"<some sort of an HTML tag>",!1))}function testKnownDirAttrValue(){assertEquals("rtl",ltrFmt.knownDirAttrValue(RTL));assertEquals("rtl",rtlFmt.knownDirAttrValue(RTL));assertEquals("rtl",unkFmt.knownDirAttrValue(RTL));assertEquals("ltr",rtlFmt.knownDirAttrValue(LTR));assertEquals("ltr",ltrFmt.knownDirAttrValue(LTR));assertEquals("ltr",unkFmt.knownDirAttrValue(LTR));assertEquals("ltr",ltrFmt.knownDirAttrValue(NEUTRAL));assertEquals("rtl",rtlFmt.knownDirAttrValue(NEUTRAL));assertEquals("ltr",unkFmt.knownDirAttrValue(NEUTRAL))}function testDirAttr(){assertEquals("overall dir (RTL) doesnt match context dir (LTR)","dir=\"rtl\"",ltrFmt.dirAttr(he,!0));assertEquals("overall dir (RTL) doesnt match context dir (unknown)","dir=\"rtl\"",unkFmt.dirAttr(he,!0));assertEquals("overall dir matches context dir (RTL)","",rtlFmt.dirAttr(he,!0));assertEquals("overall dir (LTR) doesnt match context dir (RTL)","dir=\"ltr\"",rtlFmt.dirAttr(en,!0));assertEquals("overall dir (LTR) doesnt match context dir (unknown)","dir=\"ltr\"",unkFmt.dirAttr(en,!0));assertEquals("overall dir matches context dir (LTR)","",ltrFmt.dirAttr(en,!0));assertEquals("neutral in RTL context","",rtlFmt.dirAttr(".",!0));assertEquals("neutral in LTR context","",ltrFmt.dirAttr(".",!0));assertEquals("neutral in unknown context","",unkFmt.dirAttr(".",!0));assertEquals("dir=\"rtl\"",ltrFmt.dirAttr(he+"<some sort of an HTML tag>",!0));assertEquals("",ltrFmt.dirAttr(he+"<some sort of an HTML tag>",!1))}function testKnownDirAttr(){assertEquals("overall dir (RTL) doesnt match context dir (LTR)","dir=\"rtl\"",ltrFmt.knownDirAttr(RTL));assertEquals("overall dir matches context dir (RTL)","",rtlFmt.knownDirAttr(RTL));assertEquals("overall dir (LTR) doesnt match context dir (RTL)","dir=\"ltr\"",rtlFmt.knownDirAttr(LTR));assertEquals("overall dir matches context dir (LTR)","",ltrFmt.knownDirAttr(LTR))}function spanWrap(formatter,html,opt_dirReset){return goog.html.SafeHtml.unwrap(formatter.spanWrapSafeHtml(goog.html.testing.newSafeHtmlForTest(html),opt_dirReset))}function testSpanWrap(){assertEquals("overall dir matches context dir (LTR), no dirReset",en,spanWrap(ltrFmt,en,!1));assertEquals("overall dir matches context dir (LTR), dirReset",en,spanWrap(ltrFmt,en,!0));assertEquals("overall dir matches context dir (RTL), no dirReset",he,spanWrap(rtlFmt,he,!1));assertEquals("overall dir matches context dir (RTL), dirReset",he,spanWrap(rtlFmt,he,!0));assertEquals("overall dir (RTL) doesnt match context dir (LTR), "+"no dirReset","<span dir=\"rtl\">"+he+"</span>",spanWrap(ltrFmt,he,!1));assertEquals("overall dir (RTL) doesnt match context dir (LTR), dirReset","<span dir=\"rtl\">"+he+"</span>"+LRM,spanWrap(ltrFmt,he,!0));assertEquals("overall dir (LTR) doesnt match context dir (RTL), "+"no dirReset","<span dir=\"ltr\">"+en+"</span>",spanWrap(rtlFmt,en,!1));assertEquals("overall dir (LTR) doesnt match context dir (RTL), dirReset","<span dir=\"ltr\">"+en+"</span>"+RLM,spanWrap(rtlFmt,en,!0));assertEquals("overall dir (LTR) doesnt match context dir (unknown), "+"no dirReset","<span dir=\"ltr\">"+en+"</span>",spanWrap(unkFmt,en,!1));assertEquals("overall dir (RTL) doesnt match context dir (unknown), "+"dirReset","<span dir=\"rtl\">"+he+"</span>",spanWrap(unkFmt,he,!0));assertEquals("overall dir (neutral) doesnt match context dir (LTR), "+"dirReset","",spanWrap(ltrFmt,"",!0));assertEquals("exit dir (but not overall dir) is opposite to context dir, "+"dirReset",longEn+he+html+LRM,spanWrap(ltrFmt,longEn+he+html,!0));assertEquals("overall dir (but not exit dir) is opposite to context dir, "+"dirReset","<span dir=\"ltr\">"+longEn+he+"</span>"+RLM,spanWrap(rtlFmt,longEn+he,!0));var ltrAlwaysSpanFmt=new goog.i18n.BidiFormatter(LTR,!0),rtlAlwaysSpanFmt=new goog.i18n.BidiFormatter(RTL,!0),unkAlwaysSpanFmt=new goog.i18n.BidiFormatter(null,!0);assertEquals("alwaysSpan, overall dir matches context dir (LTR), "+"no dirReset","<span>"+en+"</span>",spanWrap(ltrAlwaysSpanFmt,en,!1));assertEquals("alwaysSpan, overall dir matches context dir (LTR), dirReset","<span>"+en+"</span>",spanWrap(ltrAlwaysSpanFmt,en,!0));assertEquals("alwaysSpan, overall dir matches context dir (RTL), "+"no dirReset","<span>"+he+"</span>",spanWrap(rtlAlwaysSpanFmt,he,!1));assertEquals("alwaysSpan, overall dir matches context dir (RTL), dirReset","<span>"+he+"</span>",spanWrap(rtlAlwaysSpanFmt,he,!0));assertEquals("alwaysSpan, overall dir (RTL) doesnt match "+"context dir (LTR), no dirReset","<span dir=\"rtl\">"+he+"</span>",spanWrap(ltrAlwaysSpanFmt,he,!1));assertEquals("alwaysSpan, overall dir (RTL) doesnt match "+"context dir (LTR), dirReset","<span dir=\"rtl\">"+he+"</span>"+LRM,spanWrap(ltrAlwaysSpanFmt,he,!0));assertEquals("alwaysSpan, overall dir (neutral) doesnt match "+"context dir (LTR), dirReset","<span></span>",spanWrap(ltrAlwaysSpanFmt,"",!0))}function testSpanWrapSafeHtml(){var html=goog.html.SafeHtml.htmlEscape("a"),wrapped=rtlFmt.spanWrapSafeHtml(html,!1);assertHtmlEquals("<span dir=\"ltr\">a</span>",wrapped);assertEquals(NEUTRAL,wrapped.getDirection())}function spanWrapWithKnownDir(formatter,dir,html){return goog.html.SafeHtml.unwrap(formatter.spanWrapSafeHtmlWithKnownDir(dir,goog.html.testing.newSafeHtmlForTest(html)))}function testSpanWrapWithKnownDir(){assertEquals("known LTR in LTR context",en,spanWrapWithKnownDir(ltrFmt,LTR,en));assertEquals("unknown LTR in LTR context",en,spanWrapWithKnownDir(ltrFmt,null,en));assertEquals("overall LTR but exit RTL in LTR context",he+LRM,spanWrapWithKnownDir(ltrFmt,LTR,he));assertEquals("known RTL in LTR context","<span dir=\"rtl\">"+he+"</span>"+LRM,spanWrapWithKnownDir(ltrFmt,RTL,he));assertEquals("unknown RTL in LTR context","<span dir=\"rtl\">"+he+"</span>"+LRM,spanWrapWithKnownDir(ltrFmt,null,he));assertEquals("overall RTL but exit LTR in LTR context","<span dir=\"rtl\">"+en+"</span>"+LRM,spanWrapWithKnownDir(ltrFmt,RTL,en));assertEquals("known neutral in LTR context",".",spanWrapWithKnownDir(ltrFmt,NEUTRAL,"."));assertEquals("unknown neutral in LTR context",".",spanWrapWithKnownDir(ltrFmt,null,"."));assertEquals("overall neutral but exit LTR in LTR context",en,spanWrapWithKnownDir(ltrFmt,NEUTRAL,en));assertEquals("overall neutral but exit RTL in LTR context",he+LRM,spanWrapWithKnownDir(ltrFmt,NEUTRAL,he));assertEquals("known RTL in RTL context",he,spanWrapWithKnownDir(rtlFmt,RTL,he));assertEquals("unknown RTL in RTL context",he,spanWrapWithKnownDir(rtlFmt,null,he));assertEquals("overall RTL but exit LTR in RTL context",en+RLM,spanWrapWithKnownDir(rtlFmt,RTL,en));assertEquals("known LTR in RTL context","<span dir=\"ltr\">"+en+"</span>"+RLM,spanWrapWithKnownDir(rtlFmt,LTR,en));assertEquals("unknown LTR in RTL context","<span dir=\"ltr\">"+en+"</span>"+RLM,spanWrapWithKnownDir(rtlFmt,null,en));assertEquals("LTR but exit RTL in RTL context","<span dir=\"ltr\">"+he+"</span>"+RLM,spanWrapWithKnownDir(rtlFmt,LTR,he));assertEquals("known neutral in RTL context",".",spanWrapWithKnownDir(rtlFmt,NEUTRAL,"."));assertEquals("unknown neutral in RTL context",".",spanWrapWithKnownDir(rtlFmt,null,"."));assertEquals("overall neutral but exit LTR in LTR context",he,spanWrapWithKnownDir(rtlFmt,NEUTRAL,he));assertEquals("overall neutral but exit RTL in LTR context",en+RLM,spanWrapWithKnownDir(rtlFmt,NEUTRAL,en));assertEquals("known RTL in unknown context","<span dir=\"rtl\">"+he+"</span>",spanWrapWithKnownDir(unkFmt,RTL,he));assertEquals("unknown RTL in unknown context","<span dir=\"rtl\">"+he+"</span>",spanWrapWithKnownDir(unkFmt,null,he));assertEquals("overall RTL but exit LTR in unknown context","<span dir=\"rtl\">"+en+"</span>",spanWrapWithKnownDir(unkFmt,RTL,en));assertEquals("known LTR in unknown context","<span dir=\"ltr\">"+en+"</span>",spanWrapWithKnownDir(unkFmt,LTR,en));assertEquals("unknown LTR in unknown context","<span dir=\"ltr\">"+en+"</span>",spanWrapWithKnownDir(unkFmt,null,en));assertEquals("LTR but exit RTL in unknown context","<span dir=\"ltr\">"+he+"</span>",spanWrapWithKnownDir(unkFmt,LTR,he));assertEquals("known neutral in unknown context",".",spanWrapWithKnownDir(unkFmt,NEUTRAL,"."));assertEquals("unknown neutral in unknown context",".",spanWrapWithKnownDir(unkFmt,null,"."));assertEquals("overall neutral but exit LTR in unknown context",he,spanWrapWithKnownDir(unkFmt,NEUTRAL,he));assertEquals("overall neutral but exit RTL in unknown context",en,spanWrapWithKnownDir(unkFmt,NEUTRAL,en))}function testSpanWrapSafeHtmlWithKnownDir(){var html=goog.html.SafeHtml.htmlEscape("a");assertHtmlEquals("<span dir=\"ltr\">a</span>",rtlFmt.spanWrapSafeHtmlWithKnownDir(LTR,html,!1))}function testUnicodeWrap(){assertEquals("overall dir matches context dir (LTR), no dirReset",en,ltrFmt.unicodeWrap(en,!0,!1));assertEquals("overall dir matches context dir (LTR), dirReset",en,ltrFmt.unicodeWrap(en,!0,!0));assertEquals("overall dir matches context dir (RTL), no dirReset",he,rtlFmt.unicodeWrap(he,!0,!1));assertEquals("overall dir matches context dir (RTL), dirReset",he,rtlFmt.unicodeWrap(he,!0,!0));assertEquals("overall dir (RTL) doesnt match context dir (LTR), "+"no dirReset",RLE+he+PDF,ltrFmt.unicodeWrap(he,!0,!1));assertEquals("overall dir (RTL) doesnt match context dir (LTR), dirReset",RLE+he+PDF+LRM,ltrFmt.unicodeWrap(he,!0,!0));assertEquals("overall dir (LTR) doesnt match context dir (RTL), "+"no dirReset",LRE+en+PDF,rtlFmt.unicodeWrap(en,!0,!1));assertEquals("overall dir (LTR) doesnt match context dir (RTL), dirReset",LRE+en+PDF+RLM,rtlFmt.unicodeWrap(en,!0,!0));assertEquals("overall dir (LTR) doesnt match context dir (unknown), "+"no dirReset",LRE+en+PDF,unkFmt.unicodeWrap(en,!0,!1));assertEquals("overall dir (RTL) doesnt match context dir (unknown), "+"dirReset",RLE+he+PDF,unkFmt.unicodeWrap(he,!0,!0));assertEquals("overall dir (neutral) doesnt match context dir (LTR), "+"dirReset","",ltrFmt.unicodeWrap("",!0,!0));assertEquals("exit dir (but not overall dir) is opposite to context dir, "+"dirReset",longEn+he+html+LRM,ltrFmt.unicodeWrap(longEn+he+html,!0,!0));assertEquals("overall dir (but not exit dir) is opposite to context dir, "+"dirReset",LRE+longEn+he+PDF+RLM,rtlFmt.unicodeWrap(longEn+he,!0,!0))}function testUnicodeWrapWithKnownDir(){assertEquals("known LTR in LTR context",en,ltrFmt.unicodeWrapWithKnownDir(LTR,en));assertEquals("unknown LTR in LTR context",en,ltrFmt.unicodeWrapWithKnownDir(null,en));assertEquals("overall LTR but exit RTL in LTR context",he+LRM,ltrFmt.unicodeWrapWithKnownDir(LTR,he));assertEquals("known RTL in LTR context",RLE+he+PDF+LRM,ltrFmt.unicodeWrapWithKnownDir(RTL,he));assertEquals("unknown RTL in LTR context",RLE+he+PDF+LRM,ltrFmt.unicodeWrapWithKnownDir(null,he));assertEquals("overall RTL but exit LTR in LTR context",RLE+en+PDF+LRM,ltrFmt.unicodeWrapWithKnownDir(RTL,en));assertEquals("known neutral in LTR context",".",ltrFmt.unicodeWrapWithKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in LTR context",".",ltrFmt.unicodeWrapWithKnownDir(null,"."));assertEquals("overall neutral but exit LTR in LTR context",en,ltrFmt.unicodeWrapWithKnownDir(NEUTRAL,en));assertEquals("overall neutral but exit RTL in LTR context",he+LRM,ltrFmt.unicodeWrapWithKnownDir(NEUTRAL,he));assertEquals("known RTL in RTL context",he,rtlFmt.unicodeWrapWithKnownDir(RTL,he));assertEquals("unknown RTL in RTL context",he,rtlFmt.unicodeWrapWithKnownDir(null,he));assertEquals("overall RTL but exit LTR in RTL context",en+RLM,rtlFmt.unicodeWrapWithKnownDir(RTL,en));assertEquals("known LTR in RTL context",LRE+en+PDF+RLM,rtlFmt.unicodeWrapWithKnownDir(LTR,en));assertEquals("unknown LTR in RTL context",LRE+en+PDF+RLM,rtlFmt.unicodeWrapWithKnownDir(null,en));assertEquals("LTR but exit RTL in RTL context",LRE+he+PDF+RLM,rtlFmt.unicodeWrapWithKnownDir(LTR,he));assertEquals("known neutral in RTL context",".",rtlFmt.unicodeWrapWithKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in RTL context",".",rtlFmt.unicodeWrapWithKnownDir(null,"."));assertEquals("overall neutral but exit LTR in LTR context",he,rtlFmt.unicodeWrapWithKnownDir(NEUTRAL,he));assertEquals("overall neutral but exit RTL in LTR context",en+RLM,rtlFmt.unicodeWrapWithKnownDir(NEUTRAL,en));assertEquals("known RTL in unknown context",RLE+he+PDF,unkFmt.unicodeWrapWithKnownDir(RTL,he));assertEquals("unknown RTL in unknown context",RLE+he+PDF,unkFmt.unicodeWrapWithKnownDir(null,he));assertEquals("overall RTL but exit LTR in unknown context",RLE+en+PDF,unkFmt.unicodeWrapWithKnownDir(RTL,en));assertEquals("known LTR in unknown context",LRE+en+PDF,unkFmt.unicodeWrapWithKnownDir(LTR,en));assertEquals("unknown LTR in unknown context",LRE+en+PDF,unkFmt.unicodeWrapWithKnownDir(null,en));assertEquals("LTR but exit RTL in unknown context",LRE+he+PDF,unkFmt.unicodeWrapWithKnownDir(LTR,he));assertEquals("known neutral in unknown context",".",unkFmt.unicodeWrapWithKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in unknown context",".",unkFmt.unicodeWrapWithKnownDir(null,"."));assertEquals("overall neutral but exit LTR in unknown context",he,unkFmt.unicodeWrapWithKnownDir(NEUTRAL,he));assertEquals("overall neutral but exit RTL in unknown context",en,unkFmt.unicodeWrapWithKnownDir(NEUTRAL,en))}function testMarkAfter(){assertEquals("exit dir (RTL) is opposite to context dir (LTR)",LRM,ltrFmt.markAfter(longEn+he+html,!0));assertEquals("exit dir (LTR) is opposite to context dir (RTL)",RLM,rtlFmt.markAfter(longHe+en,!0));assertEquals("exit dir (LTR) doesnt match context dir (unknown)","",unkFmt.markAfter(longEn+en,!0));assertEquals("overall dir (RTL) is opposite to context dir (LTR)",LRM,ltrFmt.markAfter(longHe+en,!0));assertEquals("overall dir (LTR) is opposite to context dir (RTL)",RLM,rtlFmt.markAfter(longEn+he,!0));assertEquals("exit dir and overall dir match context dir (LTR)","",ltrFmt.markAfter(longEn+he+html,!1));assertEquals("exit dir and overall dir matches context dir (RTL)","",rtlFmt.markAfter(longHe+he,!0))}function testMarkAfterKnownDir(){assertEquals("known LTR in LTR context","",ltrFmt.markAfterKnownDir(LTR,en));assertEquals("unknown LTR in LTR context","",ltrFmt.markAfterKnownDir(null,en));assertEquals("overall LTR but exit RTL in LTR context",LRM,ltrFmt.markAfterKnownDir(LTR,he));assertEquals("known RTL in LTR context",LRM,ltrFmt.markAfterKnownDir(RTL,he));assertEquals("unknown RTL in LTR context",LRM,ltrFmt.markAfterKnownDir(null,he));assertEquals("overall RTL but exit LTR in LTR context",LRM,ltrFmt.markAfterKnownDir(RTL,en));assertEquals("known neutral in LTR context","",ltrFmt.markAfterKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in LTR context","",ltrFmt.markAfterKnownDir(null,"."));assertEquals("overall neutral but exit LTR in LTR context","",ltrFmt.markAfterKnownDir(NEUTRAL,en));assertEquals("overall neutral but exit RTL in LTR context",LRM,ltrFmt.markAfterKnownDir(NEUTRAL,he));assertEquals("known RTL in RTL context","",rtlFmt.markAfterKnownDir(RTL,he));assertEquals("unknown RTL in RTL context","",rtlFmt.markAfterKnownDir(null,he));assertEquals("overall RTL but exit LTR in RTL context",RLM,rtlFmt.markAfterKnownDir(RTL,en));assertEquals("known LTR in RTL context",RLM,rtlFmt.markAfterKnownDir(LTR,en));assertEquals("unknown LTR in RTL context",RLM,rtlFmt.markAfterKnownDir(null,en));assertEquals("LTR but exit RTL in RTL context",RLM,rtlFmt.markAfterKnownDir(LTR,he));assertEquals("known neutral in RTL context","",rtlFmt.markAfterKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in RTL context","",rtlFmt.markAfterKnownDir(null,"."));assertEquals("overall neutral but exit LTR in LTR context","",rtlFmt.markAfterKnownDir(NEUTRAL,he));assertEquals("overall neutral but exit RTL in LTR context",RLM,rtlFmt.markAfterKnownDir(NEUTRAL,en));assertEquals("known RTL in unknown context","",unkFmt.markAfterKnownDir(RTL,he));assertEquals("unknown RTL in unknown context","",unkFmt.markAfterKnownDir(null,he));assertEquals("overall RTL but exit LTR in unknown context","",unkFmt.markAfterKnownDir(RTL,en));assertEquals("known LTR in unknown context","",unkFmt.markAfterKnownDir(LTR,en));assertEquals("unknown LTR in unknown context","",unkFmt.markAfterKnownDir(null,en));assertEquals("LTR but exit RTL in unknown context","",unkFmt.markAfterKnownDir(LTR,he));assertEquals("known neutral in unknown context","",unkFmt.markAfterKnownDir(NEUTRAL,"."));assertEquals("unknown neutral in unknown context","",unkFmt.markAfterKnownDir(null,"."));assertEquals("overall neutral but exit LTR in unknown context","",unkFmt.markAfterKnownDir(NEUTRAL,he));assertEquals("overall neutral but exit RTL in unknown context","",unkFmt.markAfterKnownDir(NEUTRAL,en))}function testMark(){assertEquals(LRM,new goog.i18n.BidiFormatter(LTR).mark());assertEquals("",new goog.i18n.BidiFormatter(null).mark());assertEquals("",new goog.i18n.BidiFormatter(NEUTRAL).mark());assertEquals(RLM,new goog.i18n.BidiFormatter(RTL).mark());assertEquals(RLM,new goog.i18n.BidiFormatter(!0).mark());assertEquals(LRM,new goog.i18n.BidiFormatter(!1).mark())}function testStartEdge(){assertEquals("left",ltrFmt.startEdge());assertEquals("left",unkFmt.startEdge());assertEquals("right",rtlFmt.startEdge())}function testEndEdge(){assertEquals("right",ltrFmt.endEdge());assertEquals("right",unkFmt.endEdge());assertEquals("left",rtlFmt.endEdge())}function assertHtmlEquals(expected,html){assertEquals(expected,goog.html.SafeHtml.unwrap(html))}