goog.provide("goog.editor.plugins.LinkShortcutPluginTest");goog.setTestOnly("goog.editor.plugins.LinkShortcutPluginTest");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.editor.Field");goog.require("goog.editor.plugins.BasicTextFormatter");goog.require("goog.editor.plugins.LinkBubble");goog.require("goog.editor.plugins.LinkShortcutPlugin");goog.require("goog.events.KeyCodes");goog.require("goog.testing.PropertyReplacer");goog.require("goog.testing.dom");goog.require("goog.testing.events");goog.require("goog.testing.jsunit");goog.require("goog.userAgent.product");var propertyReplacer;function setUp(){propertyReplacer=new goog.testing.PropertyReplacer}function tearDown(){propertyReplacer.reset();var field=document.getElementById("cleanup");goog.dom.removeChildren(field);field.innerHTML="<div id=\"field\">http://www.google.com/</div>"}function testShortcutCreatesALink(){if(goog.userAgent.product.SAFARI){return}propertyReplacer.set(window,"prompt",function(){return"http://www.google.com/"});var linkBubble=new goog.editor.plugins.LinkBubble,formatter=new goog.editor.plugins.BasicTextFormatter,plugin=new goog.editor.plugins.LinkShortcutPlugin,fieldEl=document.getElementById("field"),field=new goog.editor.Field("field");field.registerPlugin(formatter);field.registerPlugin(linkBubble);field.registerPlugin(plugin);field.makeEditable();field.focusAndPlaceCursorAtStart();var textNode=goog.testing.dom.findTextNode("http://www.google.com/",fieldEl);goog.testing.events.fireKeySequence(field.getElement(),goog.events.KeyCodes.K,{ctrlKey:!0});var href=goog.dom.getElementsByTagName(goog.dom.TagName.A,field.getElement())[0];assertEquals("http://www.google.com/",href.href);var bubbleLink=document.getElementById(goog.editor.plugins.LinkBubble.TEST_LINK_ID_);assertEquals("http://www.google.com/",bubbleLink.innerHTML)}