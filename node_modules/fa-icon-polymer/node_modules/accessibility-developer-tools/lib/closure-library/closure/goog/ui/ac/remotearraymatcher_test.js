goog.provide("goog.ui.ac.RemoteArrayMatcherTest");goog.setTestOnly("goog.ui.ac.RemoteArrayMatcherTest");goog.require("goog.json");goog.require("goog.net.XhrIo");goog.require("goog.testing.MockControl");goog.require("goog.testing.jsunit");goog.require("goog.testing.net.XhrIo");goog.require("goog.ui.ac.RemoteArrayMatcher");var url="http://www.google.com",token="goog",maxMatches=5,fullToken="google",responseJsonText="['eric', 'larry', 'sergey', 'marissa', 'pupius']",responseJson=goog.json.unsafeParse(responseJsonText),mockControl,mockMatchHandler;function setUp(){goog.net.XhrIo=goog.testing.net.XhrIo;mockControl=new goog.testing.MockControl;mockMatchHandler=mockControl.createFunctionMock()}function testRequestMatchingRows_noSimilarTrue(){var matcher=new goog.ui.ac.RemoteArrayMatcher(url);mockMatchHandler(token,responseJson);mockControl.$replayAll();matcher.requestMatchingRows(token,maxMatches,mockMatchHandler,fullToken);matcher.xhr_.simulateResponse(200,responseJsonText);mockControl.$verifyAll();mockControl.$resetAll()}function testRequestMatchingRows_twoCalls(){var matcher=new goog.ui.ac.RemoteArrayMatcher(url),dummyMatchHandler=mockControl.createFunctionMock();mockMatchHandler(token,responseJson);mockControl.$replayAll();matcher.requestMatchingRows(token,maxMatches,dummyMatchHandler,fullToken);matcher.requestMatchingRows(token,maxMatches,mockMatchHandler,fullToken);matcher.xhr_.simulateResponse(200,responseJsonText);mockControl.$verifyAll();mockControl.$resetAll()}