goog.provide("goog.math.Integer");goog.math.Integer=function(bits,sign){this.bits_=[];this.sign_=sign;for(var top=!0,i=bits.length-1,val;0<=i;i--){val=0|bits[i];if(!top||val!=sign){this.bits_[i]=val;top=!1}}};goog.math.Integer.IntCache_={};goog.math.Integer.fromInt=function(value){if(-128<=value&&128>value){var cachedObj=goog.math.Integer.IntCache_[value];if(cachedObj){return cachedObj}}var obj=new goog.math.Integer([0|value],0>value?-1:0);if(-128<=value&&128>value){goog.math.Integer.IntCache_[value]=obj}return obj};goog.math.Integer.fromNumber=function(value){if(isNaN(value)||!isFinite(value)){return goog.math.Integer.ZERO}else if(0>value){return goog.math.Integer.fromNumber(-value).negate()}else{for(var bits=[],pow=1,i=0;value>=pow;i++){bits[i]=0|value/pow;pow*=goog.math.Integer.TWO_PWR_32_DBL_}return new goog.math.Integer(bits,0)}};goog.math.Integer.fromBits=function(bits){var high=bits[bits.length-1];return new goog.math.Integer(bits,high&1<<31?-1:0)};goog.math.Integer.fromString=function(str,opt_radix){var _Mathpow=Math.pow;if(0==str.length){throw Error("number format error: empty string")}var radix=opt_radix||10;if(2>radix||36<radix){throw Error("radix out of range: "+radix)}if("-"==str.charAt(0)){return goog.math.Integer.fromString(str.substring(1),radix).negate()}else if(0<=str.indexOf("-")){throw Error("number format error: interior \"-\" character")}for(var radixToPower=goog.math.Integer.fromNumber(_Mathpow(radix,8)),result=goog.math.Integer.ZERO,i=0;i<str.length;i+=8){var size=Math.min(8,str.length-i),value=parseInt(str.substring(i,i+size),radix);if(8>size){var power=goog.math.Integer.fromNumber(_Mathpow(radix,size));result=result.multiply(power).add(goog.math.Integer.fromNumber(value))}else{result=result.multiply(radixToPower);result=result.add(goog.math.Integer.fromNumber(value))}}return result};goog.math.Integer.TWO_PWR_32_DBL_=(1<<16)*(1<<16);goog.math.Integer.ZERO=goog.math.Integer.fromInt(0);goog.math.Integer.ONE=goog.math.Integer.fromInt(1);goog.math.Integer.TWO_PWR_24_=goog.math.Integer.fromInt(1<<24);goog.math.Integer.prototype.toInt=function(){return 0<this.bits_.length?this.bits_[0]:this.sign_};goog.math.Integer.prototype.toNumber=function(){if(this.isNegative()){return-this.negate().toNumber()}else{for(var val=0,pow=1,i=0;i<this.bits_.length;i++){val+=this.getBitsUnsigned(i)*pow;pow*=goog.math.Integer.TWO_PWR_32_DBL_}return val}};goog.math.Integer.prototype.toString=function(opt_radix){var radix=opt_radix||10;if(2>radix||36<radix){throw Error("radix out of range: "+radix)}if(this.isZero()){return"0"}else if(this.isNegative()){return"-"+this.negate().toString(radix)}var radixToPower=goog.math.Integer.fromNumber(Math.pow(radix,6)),rem=this,result="";while(!0){var remDiv=rem.divide(radixToPower),intval=rem.subtract(remDiv.multiply(radixToPower)).toInt()>>>0,digits=intval.toString(radix);rem=remDiv;if(rem.isZero()){return digits+result}else{while(6>digits.length){digits="0"+digits}result=""+digits+result}}};goog.math.Integer.prototype.getBits=function(index){if(0>index){return 0}else if(index<this.bits_.length){return this.bits_[index]}else{return this.sign_}};goog.math.Integer.prototype.getBitsUnsigned=function(index){var val=this.getBits(index);return 0<=val?val:goog.math.Integer.TWO_PWR_32_DBL_+val};goog.math.Integer.prototype.getSign=function(){return this.sign_};goog.math.Integer.prototype.isZero=function(){if(0!=this.sign_){return!1}for(var i=0;i<this.bits_.length;i++){if(0!=this.bits_[i]){return!1}}return!0};goog.math.Integer.prototype.isNegative=function(){return-1==this.sign_};goog.math.Integer.prototype.isOdd=function(){return 0==this.bits_.length&&-1==this.sign_||0<this.bits_.length&&0!=(1&this.bits_[0])};goog.math.Integer.prototype.equals=function(other){if(this.sign_!=other.sign_){return!1}for(var len=Math.max(this.bits_.length,other.bits_.length),i=0;i<len;i++){if(this.getBits(i)!=other.getBits(i)){return!1}}return!0};goog.math.Integer.prototype.notEquals=function(other){return!this.equals(other)};goog.math.Integer.prototype.greaterThan=function(other){return 0<this.compare(other)};goog.math.Integer.prototype.greaterThanOrEqual=function(other){return 0<=this.compare(other)};goog.math.Integer.prototype.lessThan=function(other){return 0>this.compare(other)};goog.math.Integer.prototype.lessThanOrEqual=function(other){return 0>=this.compare(other)};goog.math.Integer.prototype.compare=function(other){var diff=this.subtract(other);if(diff.isNegative()){return-1}else if(diff.isZero()){return 0}else{return+1}};goog.math.Integer.prototype.shorten=function(numBits){for(var arr_index=numBits-1>>5,bit_index=(numBits-1)%32,bits=[],i=0;i<arr_index;i++){bits[i]=this.getBits(i)}var sigBits=31==bit_index?4294967295:(1<<bit_index+1)-1,val=this.getBits(arr_index)&sigBits;if(val&1<<bit_index){val|=4294967295-sigBits;bits[arr_index]=val;return new goog.math.Integer(bits,-1)}else{bits[arr_index]=val;return new goog.math.Integer(bits,0)}};goog.math.Integer.prototype.negate=function(){return this.not().add(goog.math.Integer.ONE)};goog.math.Integer.prototype.add=function(other){for(var len=Math.max(this.bits_.length,other.bits_.length),arr=[],carry=0,i=0;i<=len;i++){var a1=this.getBits(i)>>>16,a0=65535&this.getBits(i),b1=other.getBits(i)>>>16,b0=65535&other.getBits(i),c0=carry+a0+b0,c1=(c0>>>16)+a1+b1;carry=c1>>>16;c0&=65535;c1&=65535;arr[i]=c1<<16|c0}return goog.math.Integer.fromBits(arr)};goog.math.Integer.prototype.subtract=function(other){return this.add(other.negate())};goog.math.Integer.prototype.multiply=function(other){if(this.isZero()){return goog.math.Integer.ZERO}else if(other.isZero()){return goog.math.Integer.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().multiply(other.negate())}else{return this.negate().multiply(other).negate()}}else if(other.isNegative()){return this.multiply(other.negate()).negate()}if(this.lessThan(goog.math.Integer.TWO_PWR_24_)&&other.lessThan(goog.math.Integer.TWO_PWR_24_)){return goog.math.Integer.fromNumber(this.toNumber()*other.toNumber())}for(var len=this.bits_.length+other.bits_.length,arr=[],i=0;i<2*len;i++){arr[i]=0}for(var i=0;i<this.bits_.length;i++){for(var j=0;j<other.bits_.length;j++){var a1=this.getBits(i)>>>16,a0=65535&this.getBits(i),b1=other.getBits(j)>>>16,b0=65535&other.getBits(j);arr[2*i+2*j]+=a0*b0;goog.math.Integer.carry16_(arr,2*i+2*j);arr[2*i+2*j+1]+=a1*b0;goog.math.Integer.carry16_(arr,2*i+2*j+1);arr[2*i+2*j+1]+=a0*b1;goog.math.Integer.carry16_(arr,2*i+2*j+1);arr[2*i+2*j+2]+=a1*b1;goog.math.Integer.carry16_(arr,2*i+2*j+2)}}for(var i=0;i<len;i++){arr[i]=arr[2*i+1]<<16|arr[2*i]}for(var i=len;i<2*len;i++){arr[i]=0}return new goog.math.Integer(arr,0)};goog.math.Integer.carry16_=function(bits,index){while((65535&bits[index])!=bits[index]){bits[index+1]+=bits[index]>>>16;bits[index]&=65535;index++}};goog.math.Integer.prototype.slowDivide_=function(other){if(this.isNegative()||other.isNegative()){throw Error("slowDivide_ only works with positive integers.")}var twoPower=goog.math.Integer.ONE,multiple=other;while(multiple.lessThanOrEqual(this)){twoPower=twoPower.shiftLeft(1);multiple=multiple.shiftLeft(1)}var res=twoPower.shiftRight(1),total=multiple.shiftRight(1),total2;multiple=multiple.shiftRight(2);twoPower=twoPower.shiftRight(2);while(!multiple.isZero()){total2=total.add(multiple);if(total2.lessThanOrEqual(this)){res=res.add(twoPower);total=total2}multiple=multiple.shiftRight(1);twoPower=twoPower.shiftRight(1)}return res};goog.math.Integer.prototype.divide=function(other){if(other.isZero()){throw Error("division by zero")}else if(this.isZero()){return goog.math.Integer.ZERO}if(this.isNegative()){if(other.isNegative()){return this.negate().divide(other.negate())}else{return this.negate().divide(other).negate()}}else if(other.isNegative()){return this.divide(other.negate()).negate()}if(30<this.bits_.length){return this.slowDivide_(other)}var res=goog.math.Integer.ZERO,rem=this;while(rem.greaterThanOrEqual(other)){var approx=Math.max(1,Math.floor(rem.toNumber()/other.toNumber())),log2=Math.ceil(Math.log(approx)/Math.LN2),delta=48>=log2?1:Math.pow(2,log2-48),approxRes=goog.math.Integer.fromNumber(approx),approxRem=approxRes.multiply(other);while(approxRem.isNegative()||approxRem.greaterThan(rem)){approx-=delta;approxRes=goog.math.Integer.fromNumber(approx);approxRem=approxRes.multiply(other)}if(approxRes.isZero()){approxRes=goog.math.Integer.ONE}res=res.add(approxRes);rem=rem.subtract(approxRem)}return res};goog.math.Integer.prototype.modulo=function(other){return this.subtract(this.divide(other).multiply(other))};goog.math.Integer.prototype.not=function(){for(var len=this.bits_.length,arr=[],i=0;i<len;i++){arr[i]=~this.bits_[i]}return new goog.math.Integer(arr,~this.sign_)};goog.math.Integer.prototype.and=function(other){for(var len=Math.max(this.bits_.length,other.bits_.length),arr=[],i=0;i<len;i++){arr[i]=this.getBits(i)&other.getBits(i)}return new goog.math.Integer(arr,this.sign_&other.sign_)};goog.math.Integer.prototype.or=function(other){for(var len=Math.max(this.bits_.length,other.bits_.length),arr=[],i=0;i<len;i++){arr[i]=this.getBits(i)|other.getBits(i)}return new goog.math.Integer(arr,this.sign_|other.sign_)};goog.math.Integer.prototype.xor=function(other){for(var len=Math.max(this.bits_.length,other.bits_.length),arr=[],i=0;i<len;i++){arr[i]=this.getBits(i)^other.getBits(i)}return new goog.math.Integer(arr,this.sign_^other.sign_)};goog.math.Integer.prototype.shiftLeft=function(numBits){for(var arr_delta=numBits>>5,bit_delta=numBits%32,len=this.bits_.length+arr_delta+(0<bit_delta?1:0),arr=[],i=0;i<len;i++){if(0<bit_delta){arr[i]=this.getBits(i-arr_delta)<<bit_delta|this.getBits(i-arr_delta-1)>>>32-bit_delta}else{arr[i]=this.getBits(i-arr_delta)}}return new goog.math.Integer(arr,this.sign_)};goog.math.Integer.prototype.shiftRight=function(numBits){for(var arr_delta=numBits>>5,bit_delta=numBits%32,len=this.bits_.length-arr_delta,arr=[],i=0;i<len;i++){if(0<bit_delta){arr[i]=this.getBits(i+arr_delta)>>>bit_delta|this.getBits(i+arr_delta+1)<<32-bit_delta}else{arr[i]=this.getBits(i+arr_delta)}}return new goog.math.Integer(arr,this.sign_)};