goog.provide("goog.labs.dom.PageVisibilityMonitorTest");goog.setTestOnly("goog.labs.dom.PageVisibilityMonitorTest");goog.require("goog.events");goog.require("goog.functions");goog.require("goog.labs.dom.PageVisibilityMonitor");goog.require("goog.testing.PropertyReplacer");goog.require("goog.testing.events");goog.require("goog.testing.events.Event");goog.require("goog.testing.jsunit");goog.require("goog.testing.recordFunction");var stubs=new goog.testing.PropertyReplacer,vh;function tearDown(){goog.dispose(vh);vh=null;stubs.reset()}function testConstructor(){vh=new goog.labs.dom.PageVisibilityMonitor}function testNoVisibilitySupport(){stubs.set(goog.labs.dom.PageVisibilityMonitor.prototype,"getBrowserEventType_",goog.functions.NULL);var listener=goog.testing.recordFunction();vh=new goog.labs.dom.PageVisibilityMonitor;goog.events.listen(vh,"visibilitychange",listener);var e=new goog.testing.events.Event("visibilitychange");e.target=window.document;goog.testing.events.fireBrowserEvent(e);assertEquals(0,listener.getCallCount())}function testListener(){stubs.set(goog.labs.dom.PageVisibilityMonitor.prototype,"getBrowserEventType_",goog.functions.constant("visibilitychange"));var listener=goog.testing.recordFunction();vh=new goog.labs.dom.PageVisibilityMonitor;goog.events.listen(vh,"visibilitychange",listener);var e=new goog.testing.events.Event("visibilitychange");e.target=window.document;goog.testing.events.fireBrowserEvent(e);assertEquals(1,listener.getCallCount())}function testListenerForWebKit(){stubs.set(goog.labs.dom.PageVisibilityMonitor.prototype,"getBrowserEventType_",goog.functions.constant("webkitvisibilitychange"));var listener=goog.testing.recordFunction();vh=new goog.labs.dom.PageVisibilityMonitor;goog.events.listen(vh,"visibilitychange",listener);var e=new goog.testing.events.Event("webkitvisibilitychange");e.target=window.document;goog.testing.events.fireBrowserEvent(e);assertEquals(1,listener.getCallCount())}