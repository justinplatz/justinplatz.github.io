goog.provide("goog.editor.plugins.ListTabHandlerTest");goog.setTestOnly("goog.editor.plugins.ListTabHandlerTest");goog.require("goog.dom");goog.require("goog.editor.Command");goog.require("goog.editor.plugins.ListTabHandler");goog.require("goog.events.BrowserEvent");goog.require("goog.events.KeyCodes");goog.require("goog.functions");goog.require("goog.testing.StrictMock");goog.require("goog.testing.editor.FieldMock");goog.require("goog.testing.editor.TestHelper");goog.require("goog.testing.jsunit");var field,editableField,tabHandler,testHelper;function setUpPage(){field=goog.dom.getElement("field")}function setUp(){editableField=new goog.testing.editor.FieldMock;editableField.inModalMode=goog.functions.FALSE;tabHandler=new goog.editor.plugins.ListTabHandler;tabHandler.registerFieldObject(editableField);testHelper=new goog.testing.editor.TestHelper(field);testHelper.setUpEditableElement()}function tearDown(){editableField=null;testHelper.tearDownEditableElement();tabHandler.dispose()}function testListIndentInLi(){field.innerHTML="<ul><li>Text</li></ul>";var testText=field.firstChild.firstChild.firstChild;testHelper.select(testText,0,testText,4);var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.shiftKey=!1;editableField.execCommand(goog.editor.Command.INDENT);event.preventDefault();editableField.$replay();event.$replay();assertTrue("Event must be handled",tabHandler.handleKeyboardShortcut(event,"",!1));editableField.$verify();event.$verify()}function testListIndentContainLi(){field.innerHTML="<ul><li>Text</li></ul>";var testText=field.firstChild.firstChild.firstChild;testHelper.select(field.firstChild,0,testText,4);var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.shiftKey=!1;editableField.execCommand(goog.editor.Command.INDENT);event.preventDefault();editableField.$replay();event.$replay();assertTrue("Event must be handled",tabHandler.handleKeyboardShortcut(event,"",!1));editableField.$verify();event.$verify()}function testListOutdentInLi(){field.innerHTML="<ul><li>Text</li></ul>";var testText=field.firstChild.firstChild.firstChild;testHelper.select(testText,0,testText,4);var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.shiftKey=!0;editableField.execCommand(goog.editor.Command.OUTDENT);event.preventDefault();editableField.$replay();event.$replay();assertTrue("Event must be handled",tabHandler.handleKeyboardShortcut(event,"",!1));editableField.$verify();event.$verify()}function testListOutdentContainLi(){field.innerHTML="<ul><li>Text</li></ul>";var testText=field.firstChild.firstChild.firstChild;testHelper.select(field.firstChild,0,testText,4);var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.shiftKey=!0;editableField.execCommand(goog.editor.Command.OUTDENT);event.preventDefault();editableField.$replay();event.$replay();assertTrue("Event must be handled",tabHandler.handleKeyboardShortcut(event,"",!1));editableField.$verify();event.$verify()}function testNoOp(){goog.dom.setTextContent(field,"Text");var testText=field.firstChild;testHelper.select(testText,0,testText,4);var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.shiftKey=!0;editableField.$replay();event.$replay();assertFalse("Event must not be handled",tabHandler.handleKeyboardShortcut(event,"",!1));editableField.$verify();event.$verify()}