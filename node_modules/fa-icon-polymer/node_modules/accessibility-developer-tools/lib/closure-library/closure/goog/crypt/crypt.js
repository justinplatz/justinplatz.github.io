goog.provide("goog.crypt");goog.require("goog.array");goog.require("goog.asserts");goog.crypt.stringToByteArray=function(str){for(var output=[],p=0,i=0,c;i<str.length;i++){c=str.charCodeAt(i);while(255<c){output[p++]=255&c;c>>=8}output[p++]=c}return output};goog.crypt.byteArrayToString=function(bytes){var _StringfromCharCode=String.fromCharCode,CHUNK_SIZE=8192;if(bytes.length<=CHUNK_SIZE){return _StringfromCharCode.apply(null,bytes)}for(var str="",i=0,chunk;i<bytes.length;i+=CHUNK_SIZE){chunk=goog.array.slice(bytes,i,i+CHUNK_SIZE);str+=_StringfromCharCode.apply(null,chunk)}return str};goog.crypt.byteArrayToHex=function(array){return goog.array.map(array,function(numByte){var hexByte=numByte.toString(16);return 1<hexByte.length?hexByte:"0"+hexByte}).join("")};goog.crypt.hexToByteArray=function(hexString){goog.asserts.assert(0==hexString.length%2,"Key string length must be multiple of 2");for(var arr=[],i=0;i<hexString.length;i+=2){arr.push(parseInt(hexString.substring(i,i+2),16))}return arr};goog.crypt.stringToUtf8ByteArray=function(str){for(var out=[],p=0,i=0,c;i<str.length;i++){c=str.charCodeAt(i);if(128>c){out[p++]=c}else if(2048>c){out[p++]=192|c>>6;out[p++]=128|63&c}else if(55296==(64512&c)&&i+1<str.length&&56320==(64512&str.charCodeAt(i+1))){c=65536+((1023&c)<<10)+(1023&str.charCodeAt(++i));out[p++]=240|c>>18;out[p++]=128|63&c>>12;out[p++]=128|63&c>>6;out[p++]=128|63&c}else{out[p++]=224|c>>12;out[p++]=128|63&c>>6;out[p++]=128|63&c}}return out};goog.crypt.utf8ByteArrayToString=function(bytes){var _StringfromCharCode2=String.fromCharCode,out=[],pos=0,c=0;while(pos<bytes.length){var c1=bytes[pos++];if(128>c1){out[c++]=_StringfromCharCode2(c1)}else if(191<c1&&224>c1){var c2=bytes[pos++];out[c++]=_StringfromCharCode2((31&c1)<<6|63&c2)}else if(239<c1&&365>c1){var c2=bytes[pos++],c3=bytes[pos++],c4=bytes[pos++],u=((7&c1)<<18|(63&c2)<<12|(63&c3)<<6|63&c4)-65536;out[c++]=_StringfromCharCode2(55296+(u>>10));out[c++]=_StringfromCharCode2(56320+(1023&u))}else{var c2=bytes[pos++],c3=bytes[pos++];out[c++]=_StringfromCharCode2((15&c1)<<12|(63&c2)<<6|63&c3)}}return out.join("")};goog.crypt.xorByteArray=function(bytes1,bytes2){goog.asserts.assert(bytes1.length==bytes2.length,"XOR array lengths must match");for(var result=[],i=0;i<bytes1.length;i++){result.push(bytes1[i]^bytes2[i])}return result};