goog.provide("goog.async.run");goog.require("goog.async.WorkQueue");goog.require("goog.async.nextTick");goog.require("goog.async.throwException");goog.async.run=function(callback,opt_context){if(!goog.async.run.schedule_){goog.async.run.initializeRunner_()}if(!goog.async.run.workQueueScheduled_){goog.async.run.schedule_();goog.async.run.workQueueScheduled_=!0}goog.async.run.workQueue_.add(callback,opt_context)};goog.async.run.initializeRunner_=function(){var Promise=goog.global.Promise;if(-1!=(Promise+"").indexOf("[native code]")){var promise=Promise.resolve(void 0);goog.async.run.schedule_=function(){promise.then(goog.async.run.processWorkQueue)}}else{goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}}};goog.async.run.forceNextTick=function(opt_realSetTimeout){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);if(opt_realSetTimeout){opt_realSetTimeout(goog.async.run.processWorkQueue)}}};goog.async.run.schedule_;goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue;if(goog.DEBUG){goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new goog.async.WorkQueue}}goog.async.run.processWorkQueue=function(){var item=null;while(item=goog.async.run.workQueue_.remove()){try{item.fn.call(item.scope)}catch(e){goog.async.throwException(e)}goog.async.run.workQueue_.returnUnused(item)}goog.async.run.workQueueScheduled_=!1};