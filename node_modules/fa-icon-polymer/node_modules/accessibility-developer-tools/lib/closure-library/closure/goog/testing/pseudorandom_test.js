goog.provide("goog.testing.PseudoRandomTest");goog.setTestOnly("goog.testing.PseudoRandomTest");goog.require("goog.testing.PseudoRandom");goog.require("goog.testing.jsunit");function runFairnessTest(sides,rolls,chiSquareLimit){for(var counts=[],i=0;i<sides;++i){counts[i]=0}for(var i=0;i<rolls;++i){++counts[Math.floor(Math.random()*sides)]}for(var expected=rolls/sides,chiSquare=0,i=0;i<sides;++i){chiSquare+=(counts[i]-expected)*(counts[i]-expected)/expected}assert("Chi-square test for a distribution fit failed",chiSquare<chiSquareLimit)}function testInstall(){var random=new goog.testing.PseudoRandom,originalRandom=Math.random;assertFalse(!!random.installed_);random.install();assertTrue(random.installed_);assertNotEquals(Math.random,originalRandom);random.uninstall();assertFalse(random.installed_);assertEquals(originalRandom,Math.random)}function testBounds(){var random=new goog.testing.PseudoRandom;random.install();for(var i=0,value;1e5>i;++i){value=Math.random();assert("Random value out of bounds",0<=value&&1>value)}random.uninstall()}function testFairness(){var random=new goog.testing.PseudoRandom(0,!0);runFairnessTest(6,1e5,11.07);runFairnessTest(101,1e5,124.34);random.uninstall()}function testReseed(){for(var random=new goog.testing.PseudoRandom(100,!0),sequence=[],i=0;64e3>i;++i){sequence.push(Math.random())}random.seed(100);for(var i=0;i<sequence.length;++i){assertEquals(sequence[i],Math.random())}random.uninstall()}