goog.provide("goog.ui.emoji.EmojiPaletteRenderer");goog.require("goog.a11y.aria");goog.require("goog.asserts");goog.require("goog.dom.NodeType");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.style");goog.require("goog.ui.PaletteRenderer");goog.require("goog.ui.emoji.Emoji");goog.ui.emoji.EmojiPaletteRenderer=function(defaultImgUrl){goog.ui.PaletteRenderer.call(this);this.defaultImgUrl_=defaultImgUrl};goog.inherits(goog.ui.emoji.EmojiPaletteRenderer,goog.ui.PaletteRenderer);goog.ui.emoji.EmojiPaletteRenderer.cellId_=0;goog.ui.emoji.EmojiPaletteRenderer.prototype.defaultImgUrl_=null;goog.ui.emoji.EmojiPaletteRenderer.getCssClass=function(){return goog.getCssName("goog-ui-emojipalette")};goog.ui.emoji.EmojiPaletteRenderer.prototype.createPaletteItem=function(dom,id,spriteInfo,displayUrl){var el;if(spriteInfo){var cssClass=spriteInfo.getCssClass();if(cssClass){el=dom.createDom(goog.dom.TagName.DIV,cssClass)}else{el=this.buildElementFromSpriteMetadata(dom,spriteInfo,displayUrl)}}else{el=dom.createDom(goog.dom.TagName.IMG,{src:displayUrl})}var outerdiv=dom.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-palette-cell-wrapper"),el);outerdiv.setAttribute(goog.ui.emoji.Emoji.ATTRIBUTE,id);outerdiv.setAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE,id);return outerdiv};goog.ui.emoji.EmojiPaletteRenderer.prototype.updateAnimatedPaletteItem=function(item,animatedImg){var inner=item.firstChild;goog.asserts.assert(inner);var classes=goog.dom.classlist.get(inner);if(classes&&1==classes.length){inner.className=""}goog.style.setStyle(inner,{width:animatedImg.width,height:animatedImg.height,"background-image":"url("+animatedImg.src+")","background-position":"0 0"})};goog.ui.emoji.EmojiPaletteRenderer.prototype.buildElementFromSpriteMetadata=function(dom,spriteInfo,displayUrl){var width=spriteInfo.getWidthCssValue(),height=spriteInfo.getHeightCssValue(),x=spriteInfo.getXOffsetCssValue(),y=spriteInfo.getYOffsetCssValue(),el=dom.createDom(goog.dom.TagName.DIV);goog.style.setStyle(el,{width:width,height:height,"background-image":"url("+displayUrl+")","background-repeat":"no-repeat","background-position":x+" "+y});return el};goog.ui.emoji.EmojiPaletteRenderer.prototype.createCell=function(node,dom){if(!node){var elem=this.defaultImgUrl_?dom.createDom(goog.dom.TagName.IMG,{src:this.defaultImgUrl_}):dom.createDom(goog.dom.TagName.DIV);node=dom.createDom(goog.dom.TagName.DIV,goog.getCssName("goog-palette-cell-wrapper"),elem)}var cell=dom.createDom(goog.dom.TagName.TD,{class:goog.getCssName(this.getCssClass(),"cell"),id:this.getCssClass()+"-cell-"+goog.ui.emoji.EmojiPaletteRenderer.cellId_++},node);goog.a11y.aria.setRole(cell,"gridcell");return cell};goog.ui.emoji.EmojiPaletteRenderer.prototype.getContainingItem=function(palette,node){var root=palette.getElement();while(node&&node.nodeType==goog.dom.NodeType.ELEMENT&&node!=root){if(node.tagName==goog.dom.TagName.TD){return node.firstChild}node=node.parentNode}return null};