goog.provide("goog.vec.mat3d");goog.provide("goog.vec.mat3d.Type");goog.require("goog.vec");goog.vec.mat3d.Type;goog.vec.mat3d.create=function(){return new Float64Array(9)};goog.vec.mat3d.createIdentity=function(){var mat=goog.vec.mat3d.create();mat[0]=mat[4]=mat[8]=1;return mat};goog.vec.mat3d.setFromValues=function(mat,v00,v10,v20,v01,v11,v21,v02,v12,v22){mat[0]=v00;mat[1]=v10;mat[2]=v20;mat[3]=v01;mat[4]=v11;mat[5]=v21;mat[6]=v02;mat[7]=v12;mat[8]=v22;return mat};goog.vec.mat3d.setFromMat3d=function(mat,src){mat[0]=src[0];mat[1]=src[1];mat[2]=src[2];mat[3]=src[3];mat[4]=src[4];mat[5]=src[5];mat[6]=src[6];mat[7]=src[7];mat[8]=src[8];return mat};goog.vec.mat3d.setFromMat3f=function(mat,src){mat[0]=src[0];mat[1]=src[1];mat[2]=src[2];mat[3]=src[3];mat[4]=src[4];mat[5]=src[5];mat[6]=src[6];mat[7]=src[7];mat[8]=src[8];return mat};goog.vec.mat3d.setFromArray=function(mat,src){mat[0]=src[0];mat[1]=src[1];mat[2]=src[2];mat[3]=src[3];mat[4]=src[4];mat[5]=src[5];mat[6]=src[6];mat[7]=src[7];mat[8]=src[8];return mat};goog.vec.mat3d.getElement=function(mat,row,column){return mat[row+3*column]};goog.vec.mat3d.setElement=function(mat,row,column,value){mat[row+3*column]=value;return mat};goog.vec.mat3d.setDiagonalValues=function(mat,v00,v11,v22){mat[0]=v00;mat[4]=v11;mat[8]=v22;return mat};goog.vec.mat3d.setDiagonal=function(mat,vec){mat[0]=vec[0];mat[4]=vec[1];mat[8]=vec[2];return mat};goog.vec.mat3d.setColumnValues=function(mat,column,v0,v1,v2){var i=3*column;mat[i]=v0;mat[i+1]=v1;mat[i+2]=v2;return mat};goog.vec.mat3d.setColumn=function(mat,column,vec){var i=3*column;mat[i]=vec[0];mat[i+1]=vec[1];mat[i+2]=vec[2];return mat};goog.vec.mat3d.getColumn=function(mat,column,vec){var i=3*column;vec[0]=mat[i];vec[1]=mat[i+1];vec[2]=mat[i+2];return vec};goog.vec.mat3d.setColumns=function(mat,vec0,vec1,vec2){goog.vec.mat3d.setColumn(mat,0,vec0);goog.vec.mat3d.setColumn(mat,1,vec1);goog.vec.mat3d.setColumn(mat,2,vec2);return mat};goog.vec.mat3d.getColumns=function(mat,vec0,vec1,vec2){goog.vec.mat3d.getColumn(mat,0,vec0);goog.vec.mat3d.getColumn(mat,1,vec1);goog.vec.mat3d.getColumn(mat,2,vec2)};goog.vec.mat3d.setRowValues=function(mat,row,v0,v1,v2){mat[row]=v0;mat[row+3]=v1;mat[row+6]=v2;return mat};goog.vec.mat3d.setRow=function(mat,row,vec){mat[row]=vec[0];mat[row+3]=vec[1];mat[row+6]=vec[2];return mat};goog.vec.mat3d.getRow=function(mat,row,vec){vec[0]=mat[row];vec[1]=mat[row+3];vec[2]=mat[row+6];return vec};goog.vec.mat3d.setRows=function(mat,vec0,vec1,vec2){goog.vec.mat3d.setRow(mat,0,vec0);goog.vec.mat3d.setRow(mat,1,vec1);goog.vec.mat3d.setRow(mat,2,vec2);return mat};goog.vec.mat3d.getRows=function(mat,vec0,vec1,vec2){goog.vec.mat3d.getRow(mat,0,vec0);goog.vec.mat3d.getRow(mat,1,vec1);goog.vec.mat3d.getRow(mat,2,vec2)};goog.vec.mat3d.makeZero=function(mat){mat[0]=0;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=0;mat[5]=0;mat[6]=0;mat[7]=0;mat[8]=0;return mat};goog.vec.mat3d.makeIdentity=function(mat){mat[0]=1;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=1;mat[5]=0;mat[6]=0;mat[7]=0;mat[8]=1;return mat};goog.vec.mat3d.addMat=function(mat0,mat1,resultMat){resultMat[0]=mat0[0]+mat1[0];resultMat[1]=mat0[1]+mat1[1];resultMat[2]=mat0[2]+mat1[2];resultMat[3]=mat0[3]+mat1[3];resultMat[4]=mat0[4]+mat1[4];resultMat[5]=mat0[5]+mat1[5];resultMat[6]=mat0[6]+mat1[6];resultMat[7]=mat0[7]+mat1[7];resultMat[8]=mat0[8]+mat1[8];return resultMat};goog.vec.mat3d.subMat=function(mat0,mat1,resultMat){resultMat[0]=mat0[0]-mat1[0];resultMat[1]=mat0[1]-mat1[1];resultMat[2]=mat0[2]-mat1[2];resultMat[3]=mat0[3]-mat1[3];resultMat[4]=mat0[4]-mat1[4];resultMat[5]=mat0[5]-mat1[5];resultMat[6]=mat0[6]-mat1[6];resultMat[7]=mat0[7]-mat1[7];resultMat[8]=mat0[8]-mat1[8];return resultMat};goog.vec.mat3d.multScalar=function(mat,scalar,resultMat){resultMat[0]=mat[0]*scalar;resultMat[1]=mat[1]*scalar;resultMat[2]=mat[2]*scalar;resultMat[3]=mat[3]*scalar;resultMat[4]=mat[4]*scalar;resultMat[5]=mat[5]*scalar;resultMat[6]=mat[6]*scalar;resultMat[7]=mat[7]*scalar;resultMat[8]=mat[8]*scalar;return resultMat};goog.vec.mat3d.multMat=function(mat0,mat1,resultMat){var a00=mat0[0],a10=mat0[1],a20=mat0[2],a01=mat0[3],a11=mat0[4],a21=mat0[5],a02=mat0[6],a12=mat0[7],a22=mat0[8],b00=mat1[0],b10=mat1[1],b20=mat1[2],b01=mat1[3],b11=mat1[4],b21=mat1[5],b02=mat1[6],b12=mat1[7],b22=mat1[8];resultMat[0]=a00*b00+a01*b10+a02*b20;resultMat[1]=a10*b00+a11*b10+a12*b20;resultMat[2]=a20*b00+a21*b10+a22*b20;resultMat[3]=a00*b01+a01*b11+a02*b21;resultMat[4]=a10*b01+a11*b11+a12*b21;resultMat[5]=a20*b01+a21*b11+a22*b21;resultMat[6]=a00*b02+a01*b12+a02*b22;resultMat[7]=a10*b02+a11*b12+a12*b22;resultMat[8]=a20*b02+a21*b12+a22*b22;return resultMat};goog.vec.mat3d.transpose=function(mat,resultMat){if(resultMat==mat){var a10=mat[1],a20=mat[2],a21=mat[5];resultMat[1]=mat[3];resultMat[2]=mat[6];resultMat[3]=a10;resultMat[5]=mat[7];resultMat[6]=a20;resultMat[7]=a21}else{resultMat[0]=mat[0];resultMat[1]=mat[3];resultMat[2]=mat[6];resultMat[3]=mat[1];resultMat[4]=mat[4];resultMat[5]=mat[7];resultMat[6]=mat[2];resultMat[7]=mat[5];resultMat[8]=mat[8]}return resultMat};goog.vec.mat3d.invert=function(mat0,resultMat){var a00=mat0[0],a10=mat0[1],a20=mat0[2],a01=mat0[3],a11=mat0[4],a21=mat0[5],a02=mat0[6],a12=mat0[7],a22=mat0[8],t00=a11*a22-a12*a21,t10=a12*a20-a10*a22,t20=a10*a21-a11*a20,det=a00*t00+a01*t10+a02*t20;if(0==det){return!1}var idet=1/det;resultMat[0]=t00*idet;resultMat[3]=(a02*a21-a01*a22)*idet;resultMat[6]=(a01*a12-a02*a11)*idet;resultMat[1]=t10*idet;resultMat[4]=(a00*a22-a02*a20)*idet;resultMat[7]=(a02*a10-a00*a12)*idet;resultMat[2]=t20*idet;resultMat[5]=(a01*a20-a00*a21)*idet;resultMat[8]=(a00*a11-a01*a10)*idet;return!0};goog.vec.mat3d.equals=function(mat0,mat1){return mat0.length==mat1.length&&mat0[0]==mat1[0]&&mat0[1]==mat1[1]&&mat0[2]==mat1[2]&&mat0[3]==mat1[3]&&mat0[4]==mat1[4]&&mat0[5]==mat1[5]&&mat0[6]==mat1[6]&&mat0[7]==mat1[7]&&mat0[8]==mat1[8]};goog.vec.mat3d.multVec3=function(mat,vec,resultVec){var x=vec[0],y=vec[1],z=vec[2];resultVec[0]=x*mat[0]+y*mat[3]+z*mat[6];resultVec[1]=x*mat[1]+y*mat[4]+z*mat[7];resultVec[2]=x*mat[2]+y*mat[5]+z*mat[8];return resultVec};goog.vec.mat3d.makeTranslate=function(mat,x,y){mat[0]=1;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=1;mat[5]=0;mat[6]=x;mat[7]=y;mat[8]=1;return mat};goog.vec.mat3d.makeScale=function(mat,x,y,z){mat[0]=x;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=y;mat[5]=0;mat[6]=0;mat[7]=0;mat[8]=z;return mat};goog.vec.mat3d.makeRotate=function(mat,angle,ax,ay,az){var c=Math.cos(angle),d=1-c,s=Math.sin(angle);mat[0]=ax*ax*d+c;mat[1]=ax*ay*d+az*s;mat[2]=ax*az*d-ay*s;mat[3]=ax*ay*d-az*s;mat[4]=ay*ay*d+c;mat[5]=ay*az*d+ax*s;mat[6]=ax*az*d+ay*s;mat[7]=ay*az*d-ax*s;mat[8]=az*az*d+c;return mat};goog.vec.mat3d.makeRotateX=function(mat,angle){var c=Math.cos(angle),s=Math.sin(angle);mat[0]=1;mat[1]=0;mat[2]=0;mat[3]=0;mat[4]=c;mat[5]=s;mat[6]=0;mat[7]=-s;mat[8]=c;return mat};goog.vec.mat3d.makeRotateY=function(mat,angle){var c=Math.cos(angle),s=Math.sin(angle);mat[0]=c;mat[1]=0;mat[2]=-s;mat[3]=0;mat[4]=1;mat[5]=0;mat[6]=s;mat[7]=0;mat[8]=c;return mat};goog.vec.mat3d.makeRotateZ=function(mat,angle){var c=Math.cos(angle),s=Math.sin(angle);mat[0]=c;mat[1]=s;mat[2]=0;mat[3]=-s;mat[4]=c;mat[5]=0;mat[6]=0;mat[7]=0;mat[8]=1;return mat};goog.vec.mat3d.rotate=function(mat,angle,x,y,z){var m00=mat[0],m10=mat[1],m20=mat[2],m01=mat[3],m11=mat[4],m21=mat[5],m02=mat[6],m12=mat[7],m22=mat[8],cosAngle=Math.cos(angle),sinAngle=Math.sin(angle),diffCosAngle=1-cosAngle,r00=x*x*diffCosAngle+cosAngle,r10=x*y*diffCosAngle+z*sinAngle,r20=x*z*diffCosAngle-y*sinAngle,r01=x*y*diffCosAngle-z*sinAngle,r11=y*y*diffCosAngle+cosAngle,r21=y*z*diffCosAngle+x*sinAngle,r02=x*z*diffCosAngle+y*sinAngle,r12=y*z*diffCosAngle-x*sinAngle,r22=z*z*diffCosAngle+cosAngle;mat[0]=m00*r00+m01*r10+m02*r20;mat[1]=m10*r00+m11*r10+m12*r20;mat[2]=m20*r00+m21*r10+m22*r20;mat[3]=m00*r01+m01*r11+m02*r21;mat[4]=m10*r01+m11*r11+m12*r21;mat[5]=m20*r01+m21*r11+m22*r21;mat[6]=m00*r02+m01*r12+m02*r22;mat[7]=m10*r02+m11*r12+m12*r22;mat[8]=m20*r02+m21*r12+m22*r22;return mat};goog.vec.mat3d.rotateX=function(mat,angle){var m01=mat[3],m11=mat[4],m21=mat[5],m02=mat[6],m12=mat[7],m22=mat[8],c=Math.cos(angle),s=Math.sin(angle);mat[3]=m01*c+m02*s;mat[4]=m11*c+m12*s;mat[5]=m21*c+m22*s;mat[6]=m01*-s+m02*c;mat[7]=m11*-s+m12*c;mat[8]=m21*-s+m22*c;return mat};goog.vec.mat3d.rotateY=function(mat,angle){var m00=mat[0],m10=mat[1],m20=mat[2],m02=mat[6],m12=mat[7],m22=mat[8],c=Math.cos(angle),s=Math.sin(angle);mat[0]=m00*c+m02*-s;mat[1]=m10*c+m12*-s;mat[2]=m20*c+m22*-s;mat[6]=m00*s+m02*c;mat[7]=m10*s+m12*c;mat[8]=m20*s+m22*c;return mat};goog.vec.mat3d.rotateZ=function(mat,angle){var m00=mat[0],m10=mat[1],m20=mat[2],m01=mat[3],m11=mat[4],m21=mat[5],c=Math.cos(angle),s=Math.sin(angle);mat[0]=m00*c+m01*s;mat[1]=m10*c+m11*s;mat[2]=m20*c+m21*s;mat[3]=m00*-s+m01*c;mat[4]=m10*-s+m11*c;mat[5]=m20*-s+m21*c;return mat};goog.vec.mat3d.makeEulerZXZ=function(mat,theta1,theta2,theta3){var _Mathsin=Math.sin,_Mathcos=Math.cos,c1=_Mathcos(theta1),s1=_Mathsin(theta1),c2=_Mathcos(theta2),s2=_Mathsin(theta2),c3=_Mathcos(theta3),s3=_Mathsin(theta3);mat[0]=c1*c3-c2*s1*s3;mat[1]=c2*c1*s3+c3*s1;mat[2]=s3*s2;mat[3]=-c1*s3-c3*c2*s1;mat[4]=c1*c2*c3-s1*s3;mat[5]=c3*s2;mat[6]=s2*s1;mat[7]=-c1*s2;mat[8]=c2;return mat};goog.vec.mat3d.toEulerZXZ=function(mat,euler,opt_theta2IsNegative){var _MathPI=Math.PI,_Mathatan=Math.atan2,sinTheta2=Math.sqrt(mat[2]*mat[2]+mat[5]*mat[5]),signTheta2=opt_theta2IsNegative?-1:1;if(sinTheta2>goog.vec.EPSILON){euler[2]=_Mathatan(mat[2]*signTheta2,mat[5]*signTheta2);euler[1]=_Mathatan(sinTheta2*signTheta2,mat[8]);euler[0]=_Mathatan(mat[6]*signTheta2,-mat[7]*signTheta2)}else{euler[0]=0;euler[1]=_Mathatan(sinTheta2*signTheta2,mat[8]);euler[2]=_Mathatan(mat[1],mat[0])}euler[0]=(euler[0]+2*_MathPI)%(2*_MathPI);euler[2]=(euler[2]+2*_MathPI)%(2*_MathPI);euler[1]=(euler[1]*signTheta2+2*_MathPI)%(2*_MathPI)*signTheta2;return euler};