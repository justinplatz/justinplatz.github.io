goog.provide("goog.storage.mechanism.iterableMechanismTester");goog.require("goog.iter");goog.require("goog.iter.StopIteration");goog.require("goog.testing.asserts");goog.setTestOnly("iterableMechanismTester");var mechanism=null;function testCount(){if(!mechanism){return}assertEquals(0,mechanism.getCount());mechanism.set("first","one");assertEquals(1,mechanism.getCount());mechanism.set("second","two");assertEquals(2,mechanism.getCount());mechanism.set("first","three");assertEquals(2,mechanism.getCount())}function testIteratorBasics(){if(!mechanism){return}mechanism.set("first","one");assertEquals("first",mechanism.__iterator__(!0).next());assertEquals("one",mechanism.__iterator__(!1).next());var iterator=mechanism.__iterator__();assertEquals("one",iterator.next());assertEquals(goog.iter.StopIteration,assertThrows(iterator.next))}function testIteratorWithTwoValues(){if(!mechanism){return}mechanism.set("first","one");mechanism.set("second","two");assertSameElements(["one","two"],goog.iter.toArray(mechanism));assertSameElements(["first","second"],goog.iter.toArray(mechanism.__iterator__(!0)))}function testClear(){if(!mechanism){return}mechanism.set("first","one");mechanism.set("second","two");mechanism.clear();assertNull(mechanism.get("first"));assertNull(mechanism.get("second"));assertEquals(0,mechanism.getCount());assertEquals(goog.iter.StopIteration,assertThrows(mechanism.__iterator__(!0).next));assertEquals(goog.iter.StopIteration,assertThrows(mechanism.__iterator__(!1).next))}function testClearClear(){if(!mechanism){return}mechanism.clear();mechanism.clear();assertEquals(0,mechanism.getCount())}function testIteratorWithWeirdKeys(){if(!mechanism){return}mechanism.set(" ","space");mechanism.set("=+!@#$%^&*()-_\\|;:'\",./<>?[]{}~`","control");mechanism.set("\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341","ten");assertEquals(3,mechanism.getCount());assertSameElements([" ","=+!@#$%^&*()-_\\|;:'\",./<>?[]{}~`","\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341"],goog.iter.toArray(mechanism.__iterator__(!0)));mechanism.clear();assertEquals(0,mechanism.getCount())}