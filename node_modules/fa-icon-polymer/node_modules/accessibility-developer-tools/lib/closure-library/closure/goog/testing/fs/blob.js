goog.setTestOnly("goog.testing.fs.Blob");goog.provide("goog.testing.fs.Blob");goog.require("goog.crypt");goog.require("goog.crypt.base64");goog.testing.fs.Blob=function(opt_data,opt_type){this.type=opt_type||"";this.data_=[];this.size=0;this.setDataInternal(opt_data||"")};goog.testing.fs.Blob.prototype.slice=function(opt_start,opt_end,opt_contentType){var _Mathmin=Math.min,_Mathmax=Math.max,relativeStart;if(goog.isNumber(opt_start)){relativeStart=0>opt_start?_Mathmax(this.size+opt_start,0):_Mathmin(opt_start,this.size)}else{relativeStart=0}var relativeEnd;if(goog.isNumber(opt_end)){relativeEnd=0>opt_end?_Mathmax(this.size+opt_end,0):_Mathmin(opt_end,this.size)}else{relativeEnd=this.size}var span=_Mathmax(relativeEnd-relativeStart,0),blob=new goog.testing.fs.Blob(this.data_.slice(relativeStart,relativeStart+span),opt_contentType);return blob};goog.testing.fs.Blob.prototype.toString=function(){return goog.crypt.utf8ByteArrayToString(this.data_)};goog.testing.fs.Blob.prototype.toArrayBuffer=function(){for(var buf=new ArrayBuffer(this.data_.length),arr=new Uint8Array(buf),i=0;i<this.data_.length;i++){arr[i]=this.data_[i]}return buf};goog.testing.fs.Blob.prototype.toDataUrl=function(){return"data:"+this.type+";base64,"+goog.crypt.base64.encodeByteArray(this.data_)};goog.testing.fs.Blob.prototype.setDataInternal=function(data){this.data_=[];if("string"===typeof data){this.appendString_(data)}else if(data instanceof Array){for(var i=0;i<data.length;i++){if("string"===typeof data[i]){this.appendString_(data[i])}else if("number"===typeof data[i]){this.appendByte_(data[i])}else if(data[i]instanceof Uint8Array){this.appendUint8_(data[i])}}}this.size=this.data_.length};goog.testing.fs.Blob.prototype.appendString_=function(data){Array.prototype.push.apply(this.data_,goog.crypt.stringToUtf8ByteArray(data))};goog.testing.fs.Blob.prototype.appendByte_=function(data){this.data_.push(data)};goog.testing.fs.Blob.prototype.appendUint8_=function(data){for(var result=[],i=0;i<data.length;i++){this.data_.push(data[i])}};