<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Closure Performance Tests - goog.ui.Control</title><link rel="stylesheet" type="text/css" href="../testing/performancetable.css"><script src="../base.js"></script><script>goog.require("goog.dom");goog.require("goog.testing.PerformanceTable");goog.require("goog.testing.jsunit");goog.require("goog.ui.Control");goog.require("goog.dom.TagName");</script></head><body><h1>goog.ui.Control Performance Tests</h1><p><b>User-agent:</b><script>document.write(navigator.userAgent);</script></p><div id="perfTable"></div><hr><div id="renderSandbox"></div><div id="decorateSandbox"></div><script>var renderSandbox=goog.dom.getElement("renderSandbox"),decorateSandbox=goog.dom.getElement("decorateSandbox"),renderedControls,decoratedControls,renderIndex,decorateIndex,elementToDecorate,SAMPLES_PER_RUN=100,table;function setUpRenderTest(){renderedControls=[];renderIndex=0}function cleanUpAfterRenderTest(){for(var i=0,count=renderedControls.length;i<count;i++){renderedControls[i].dispose()}renderedControls=null;goog.dom.removeChildren(renderSandbox)}function setUpDecorateTest(opt_count){for(var count=opt_count||1e3,i=0;i<count;i++){decorateSandbox.appendChild(goog.dom.createDom(goog.dom.TagName.DIV,"goog-control","W00t!"))}elementToDecorate=decorateSandbox.firstChild;decoratedControls=[];decorateIndex=0}function cleanUpAfterDecorateTest(){for(var i=0,count=decoratedControls.length;i<count;i++){decoratedControls[i].dispose()}decoratedControls=null;goog.dom.removeChildren(decorateSandbox)}function renderControls(count,autoDetectBiDi){for(var i=0,control;i<count;i++){control=new goog.ui.Control("W00t!");if(!autoDetectBiDi){control.setRightToLeft(!1)}control.render(renderSandbox);renderedControls[renderIndex++]=control}}function decorateControls(count,autoDetectBiDi){for(var i=0;i<count;i++){var next=elementToDecorate.nextSibling,control=new goog.ui.Control;if(!autoDetectBiDi){control.setRightToLeft(!1)}control.decorate(elementToDecorate);decoratedControls[decorateIndex++]=control;elementToDecorate=next}}function setUpPage(){table=new goog.testing.PerformanceTable(goog.dom.getElement("perfTable"))}function testRender(){setUpRenderTest();table.run(goog.partial(renderControls,SAMPLES_PER_RUN,!0),"Render "+SAMPLES_PER_RUN+" controls (default)");cleanUpAfterRenderTest();assertEquals("The expected number of controls must have been rendered",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),renderIndex)}function testDecorate(){setUpDecorateTest(SAMPLES_PER_RUN*table.getTimer().getNumSamples());table.run(goog.partial(decorateControls,SAMPLES_PER_RUN,!0),"Decorate "+SAMPLES_PER_RUN+" controls (default)");cleanUpAfterDecorateTest();assertEquals("The expected number of controls must have been decorated",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),decorateIndex);assertNull("All controls must have been decorated",elementToDecorate)}function testRenderNoBiDiAutoDetect(){setUpRenderTest();table.run(goog.partial(renderControls,SAMPLES_PER_RUN,!1),"Render "+SAMPLES_PER_RUN+" controls (no BiDi auto-detect)");cleanUpAfterRenderTest();assertEquals("The expected number of controls must have been rendered",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),renderIndex)}function testDecorateNoBiDiAutoDetect(){setUpDecorateTest(SAMPLES_PER_RUN*table.getTimer().getNumSamples());table.run(goog.partial(decorateControls,SAMPLES_PER_RUN,!1),"Decorate "+SAMPLES_PER_RUN+" controls (no BiDi auto-detect)");cleanUpAfterDecorateTest();assertEquals("The expected number of controls must have been decorated",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),decorateIndex);assertNull("All controls must have been decorated",elementToDecorate)}</script></body></html>