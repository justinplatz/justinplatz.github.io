goog.provide("goog.db.Error");goog.provide("goog.db.Error.ErrorCode");goog.provide("goog.db.Error.ErrorName");goog.provide("goog.db.Error.VersionChangeBlockedError");goog.require("goog.debug.Error");goog.db.Error=function(error,context,opt_message){var errorCode=null,internalError=null;if(goog.isNumber(error)){errorCode=error;internalError={name:goog.db.Error.getName(errorCode)}}else{internalError=error;errorCode=goog.db.Error.getCode(error.name)}this.code=errorCode;this.error_=internalError;var msg="Error "+context+": "+this.getName();if(opt_message){msg+=", "+opt_message}goog.db.Error.base(this,"constructor",msg)};goog.inherits(goog.db.Error,goog.debug.Error);goog.db.Error.prototype.getName=function(){return this.error_.name};goog.db.Error.VersionChangeBlockedError=function(){goog.db.Error.VersionChangeBlockedError.base(this,"constructor","Version change blocked")};goog.inherits(goog.db.Error.VersionChangeBlockedError,goog.debug.Error);goog.db.Error.DatabaseErrorCode_={UNKNOWN_ERR:1,NON_TRANSIENT_ERR:2,NOT_FOUND_ERR:3,CONSTRAINT_ERR:4,DATA_ERR:5,NOT_ALLOWED_ERR:6,TRANSACTION_INACTIVE_ERR:7,ABORT_ERR:8,READ_ONLY_ERR:9,TRANSIENT_ERR:10,TIMEOUT_ERR:11,QUOTA_ERR:12,INVALID_ACCESS_ERR:13,INVALID_STATE_ERR:14};goog.db.Error.ErrorCode={UNKNOWN_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).UNKNOWN_ERR,NON_TRANSIENT_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).NON_TRANSIENT_ERR,NOT_FOUND_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).NOT_FOUND_ERR,CONSTRAINT_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).CONSTRAINT_ERR,DATA_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).DATA_ERR,NOT_ALLOWED_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).NOT_ALLOWED_ERR,TRANSACTION_INACTIVE_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).TRANSACTION_INACTIVE_ERR,ABORT_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).ABORT_ERR,READ_ONLY_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).READ_ONLY_ERR,TIMEOUT_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).TIMEOUT_ERR,QUOTA_ERR:(goog.global.IDBDatabaseException||goog.global.webkitIDBDatabaseException||goog.db.Error.DatabaseErrorCode_).QUOTA_ERR,INVALID_ACCESS_ERR:(goog.global.DOMException||goog.db.Error.DatabaseErrorCode_).INVALID_ACCESS_ERR,INVALID_STATE_ERR:(goog.global.DOMException||goog.db.Error.DatabaseErrorCode_).INVALID_STATE_ERR};goog.db.Error.getMessage=function(code){switch(code){case goog.db.Error.ErrorCode.UNKNOWN_ERR:return"Unknown error";case goog.db.Error.ErrorCode.NON_TRANSIENT_ERR:return"Invalid operation";case goog.db.Error.ErrorCode.NOT_FOUND_ERR:return"Required database object not found";case goog.db.Error.ErrorCode.CONSTRAINT_ERR:return"Constraint unsatisfied";case goog.db.Error.ErrorCode.DATA_ERR:return"Invalid data";case goog.db.Error.ErrorCode.NOT_ALLOWED_ERR:return"Operation disallowed";case goog.db.Error.ErrorCode.TRANSACTION_INACTIVE_ERR:return"Transaction not active";case goog.db.Error.ErrorCode.ABORT_ERR:return"Request aborted";case goog.db.Error.ErrorCode.READ_ONLY_ERR:return"Modifying operation not allowed in a read-only transaction";case goog.db.Error.ErrorCode.TIMEOUT_ERR:return"Transaction timed out";case goog.db.Error.ErrorCode.QUOTA_ERR:return"Database storage space quota exceeded";case goog.db.Error.ErrorCode.INVALID_ACCESS_ERR:return"Invalid operation";case goog.db.Error.ErrorCode.INVALID_STATE_ERR:return"Invalid state";default:return"Unrecognized exception with code "+code;}};goog.db.Error.ErrorName={ABORT_ERR:"AbortError",CONSTRAINT_ERR:"ConstraintError",DATA_CLONE_ERR:"DataCloneError",DATA_ERR:"DataError",INVALID_ACCESS_ERR:"InvalidAccessError",INVALID_STATE_ERR:"InvalidStateError",NOT_FOUND_ERR:"NotFoundError",QUOTA_EXCEEDED_ERR:"QuotaExceededError",READ_ONLY_ERR:"ReadOnlyError",SYNTAX_ERROR:"SyntaxError",TIMEOUT_ERR:"TimeoutError",TRANSACTION_INACTIVE_ERR:"TransactionInactiveError",UNKNOWN_ERR:"UnknownError",VERSION_ERR:"VersionError"};goog.db.Error.getCode=function(name){switch(name){case goog.db.Error.ErrorName.UNKNOWN_ERR:return goog.db.Error.ErrorCode.UNKNOWN_ERR;case goog.db.Error.ErrorName.NOT_FOUND_ERR:return goog.db.Error.ErrorCode.NOT_FOUND_ERR;case goog.db.Error.ErrorName.CONSTRAINT_ERR:return goog.db.Error.ErrorCode.CONSTRAINT_ERR;case goog.db.Error.ErrorName.DATA_ERR:return goog.db.Error.ErrorCode.DATA_ERR;case goog.db.Error.ErrorName.TRANSACTION_INACTIVE_ERR:return goog.db.Error.ErrorCode.TRANSACTION_INACTIVE_ERR;case goog.db.Error.ErrorName.ABORT_ERR:return goog.db.Error.ErrorCode.ABORT_ERR;case goog.db.Error.ErrorName.READ_ONLY_ERR:return goog.db.Error.ErrorCode.READ_ONLY_ERR;case goog.db.Error.ErrorName.TIMEOUT_ERR:return goog.db.Error.ErrorCode.TIMEOUT_ERR;case goog.db.Error.ErrorName.QUOTA_EXCEEDED_ERR:return goog.db.Error.ErrorCode.QUOTA_ERR;case goog.db.Error.ErrorName.INVALID_ACCESS_ERR:return goog.db.Error.ErrorCode.INVALID_ACCESS_ERR;case goog.db.Error.ErrorName.INVALID_STATE_ERR:return goog.db.Error.ErrorCode.INVALID_STATE_ERR;default:return goog.db.Error.ErrorCode.UNKNOWN_ERR;}};goog.db.Error.getName=function(code){switch(code){case goog.db.Error.ErrorCode.UNKNOWN_ERR:return goog.db.Error.ErrorName.UNKNOWN_ERR;case goog.db.Error.ErrorCode.NOT_FOUND_ERR:return goog.db.Error.ErrorName.NOT_FOUND_ERR;case goog.db.Error.ErrorCode.CONSTRAINT_ERR:return goog.db.Error.ErrorName.CONSTRAINT_ERR;case goog.db.Error.ErrorCode.DATA_ERR:return goog.db.Error.ErrorName.DATA_ERR;case goog.db.Error.ErrorCode.TRANSACTION_INACTIVE_ERR:return goog.db.Error.ErrorName.TRANSACTION_INACTIVE_ERR;case goog.db.Error.ErrorCode.ABORT_ERR:return goog.db.Error.ErrorName.ABORT_ERR;case goog.db.Error.ErrorCode.READ_ONLY_ERR:return goog.db.Error.ErrorName.READ_ONLY_ERR;case goog.db.Error.ErrorCode.TIMEOUT_ERR:return goog.db.Error.ErrorName.TIMEOUT_ERR;case goog.db.Error.ErrorCode.QUOTA_ERR:return goog.db.Error.ErrorName.QUOTA_EXCEEDED_ERR;case goog.db.Error.ErrorCode.INVALID_ACCESS_ERR:return goog.db.Error.ErrorName.INVALID_ACCESS_ERR;case goog.db.Error.ErrorCode.INVALID_STATE_ERR:return goog.db.Error.ErrorName.INVALID_STATE_ERR;default:return goog.db.Error.ErrorName.UNKNOWN_ERR;}};goog.db.Error.fromRequest=function(request,message){if("error"in request){return new goog.db.Error(request.error,message)}else if("name"in request){var errorName=goog.db.Error.getName(request.error.severity);return new goog.db.Error({name:errorName},message)}else{return new goog.db.Error({name:goog.db.Error.ErrorName.UNKNOWN_ERR},message)}};goog.db.Error.fromException=function(ex,message){if("name"in ex){var errorMessage=message+": "+ex.message;return new goog.db.Error(ex,errorMessage)}else if("code"in ex){var errorName=goog.db.Error.getName(ex.code),errorMessage=message+": "+ex.message;return new goog.db.Error({name:errorName},errorMessage)}else{return new goog.db.Error({name:goog.db.Error.ErrorName.UNKNOWN_ERR},message)}};