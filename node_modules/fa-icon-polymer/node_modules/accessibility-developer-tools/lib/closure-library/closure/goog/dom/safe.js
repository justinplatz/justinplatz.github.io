goog.provide("goog.dom.safe");goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition");goog.require("goog.asserts");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.string");goog.require("goog.string.Const");goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(node,position,html){node.insertAdjacentHTML(position,goog.html.SafeHtml.unwrap(html))};goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};goog.dom.safe.setInnerHtml=function(elem,html){if(goog.asserts.ENABLE_ASSERTS){var tagName=elem.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[tagName]){throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+elem.tagName+".")}}elem.innerHTML=goog.html.SafeHtml.unwrap(html)};goog.dom.safe.setOuterHtml=function(elem,html){elem.outerHTML=goog.html.SafeHtml.unwrap(html)};goog.dom.safe.setStyle=function(elem,style){elem.style.cssText=goog.html.SafeStyle.unwrap(style)};goog.dom.safe.documentWrite=function(doc,html){doc.write(goog.html.SafeHtml.unwrap(html))};goog.dom.safe.setAnchorHref=function(anchor,url){goog.dom.safe.assertIsHTMLAnchorElement_(anchor);var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}anchor.href=goog.html.SafeUrl.unwrap(safeUrl)};goog.dom.safe.setImageSrc=function(imageElement,url){goog.dom.safe.assertIsHTMLImageElement_(imageElement);var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}imageElement.src=goog.html.SafeUrl.unwrap(safeUrl)};goog.dom.safe.setEmbedSrc=function(embed,url){goog.dom.safe.assertIsHTMLEmbedElement_(embed);embed.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setFrameSrc=function(frame,url){goog.dom.safe.assertIsHTMLFrameElement_(frame);frame.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setIframeSrc=function(iframe,url){goog.dom.safe.assertIsHTMLIFrameElement_(iframe);iframe.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setIframeSrcdoc=function(iframe,html){goog.dom.safe.assertIsHTMLIFrameElement_(iframe);iframe.srcdoc=goog.html.SafeHtml.unwrap(html)};goog.dom.safe.setLinkHrefAndRel=function(link,url,rel){goog.dom.safe.assertIsHTMLLinkElement_(link);link.rel=rel;if(goog.string.caseInsensitiveContains(rel,"stylesheet")){goog.asserts.assert(url instanceof goog.html.TrustedResourceUrl,"URL must be TrustedResourceUrl because \"rel\" contains \"stylesheet\"");link.href=goog.html.TrustedResourceUrl.unwrap(url)}else if(url instanceof goog.html.TrustedResourceUrl){link.href=goog.html.TrustedResourceUrl.unwrap(url)}else if(url instanceof goog.html.SafeUrl){link.href=goog.html.SafeUrl.unwrap(url)}else{link.href=goog.html.SafeUrl.sanitize(url).getTypedStringValue()}};goog.dom.safe.setObjectData=function(object,url){goog.dom.safe.assertIsHTMLObjectElement_(object);object.data=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setScriptSrc=function(script,url){goog.dom.safe.assertIsHTMLScriptElement_(script);script.src=goog.html.TrustedResourceUrl.unwrap(url)};goog.dom.safe.setLocationHref=function(loc,url){goog.dom.safe.assertIsLocation_(loc);var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}loc.href=goog.html.SafeUrl.unwrap(safeUrl)};goog.dom.safe.openInWindow=function(url,opt_openerWin,opt_name,opt_specs,opt_replace){var safeUrl;if(url instanceof goog.html.SafeUrl){safeUrl=url}else{safeUrl=goog.html.SafeUrl.sanitize(url)}var win=opt_openerWin||window;return win.open(goog.html.SafeUrl.unwrap(safeUrl),opt_name?goog.string.Const.unwrap(opt_name):"",opt_specs,opt_replace)};goog.dom.safe.assertIsLocation_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof Location&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof Location||!(o instanceof Element)),"Argument is not a Location (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLAnchorElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLAnchorElement&&"undefined"!=typeof Location&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLAnchorElement||!(o instanceof Location||o instanceof Element)),"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLLinkElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLLinkElement&&"undefined"!=typeof Location&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLLinkElement||!(o instanceof Location||o instanceof Element)),"Argument is not a HTMLLinkElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLImageElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLImageElement||!(o instanceof Element)),"Argument is not a HTMLImageElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLEmbedElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLEmbedElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLEmbedElement||!(o instanceof Element)),"Argument is not a HTMLEmbedElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLFrameElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLFrameElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLFrameElement||!(o instanceof Element)),"Argument is not a HTMLFrameElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLIFrameElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLIFrameElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLIFrameElement||!(o instanceof Element)),"Argument is not a HTMLIFrameElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLObjectElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLObjectElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLObjectElement||!(o instanceof Element)),"Argument is not a HTMLObjectElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.assertIsHTMLScriptElement_=function(o){if(goog.asserts.ENABLE_ASSERTS&&"undefined"!=typeof HTMLScriptElement&&"undefined"!=typeof Element){goog.asserts.assert(o&&(o instanceof HTMLScriptElement||!(o instanceof Element)),"Argument is not a HTMLScriptElement (or a non-Element mock); got: %s",goog.dom.safe.debugStringForType_(o))}return o};goog.dom.safe.debugStringForType_=function(value){if(goog.isObject(value)){return value.constructor.displayName||value.constructor.name||Object.prototype.toString.call(value)}else{return value===void 0?"undefined":null===value?"null":typeof value}};