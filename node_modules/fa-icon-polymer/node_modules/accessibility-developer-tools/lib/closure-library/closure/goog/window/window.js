goog.provide("goog.window");goog.require("goog.dom.TagName");goog.require("goog.dom.safe");goog.require("goog.html.SafeUrl");goog.require("goog.html.uncheckedconversions");goog.require("goog.labs.userAgent.platform");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.userAgent");goog.window.DEFAULT_POPUP_HEIGHT=500;goog.window.DEFAULT_POPUP_WIDTH=690;goog.window.DEFAULT_POPUP_TARGET="google_popup";goog.window.open=function(linkRef,opt_options,opt_parentWin){if(!opt_options){opt_options={}}var parentWin=opt_parentWin||window,safeLinkRef;if(linkRef instanceof goog.html.SafeUrl){safeLinkRef=linkRef}else{var url="undefined"!=typeof linkRef.href?linkRef.href:linkRef+"";safeLinkRef=goog.html.SafeUrl.sanitize(url)}var target=opt_options.target||linkRef.target,sb=[];for(var option in opt_options){switch(option){case"width":case"height":case"top":case"left":sb.push(option+"="+opt_options[option]);break;case"target":case"noreferrer":break;default:sb.push(option+"="+(opt_options[option]?1:0));}}var optionString=sb.join(","),newWin;if(goog.labs.userAgent.platform.isIos()&&parentWin.navigator&&parentWin.navigator.standalone&&target&&"_self"!=target){var a=parentWin.document.createElement(goog.dom.TagName.A+"");goog.dom.safe.setAnchorHref(a,safeLinkRef);a.setAttribute("target",target);if(opt_options.noreferrer){a.setAttribute("rel","noreferrer")}var click=document.createEvent("MouseEvent");click.initMouseEvent("click",!0,!0,parentWin,1);a.dispatchEvent(click);newWin={}}else if(opt_options.noreferrer){newWin=parentWin.open("",target,optionString);var sanitizedLinkRef=goog.html.SafeUrl.unwrap(safeLinkRef);if(newWin){if(goog.userAgent.EDGE_OR_IE){if(goog.string.contains(sanitizedLinkRef,";")){sanitizedLinkRef="'"+sanitizedLinkRef.replace(/'/g,"%27")+"'"}}newWin.opener=null;var safeHtml=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("b/12014412, meta tag with sanitized URL"),"<META HTTP-EQUIV=\"refresh\" content=\"0; url="+goog.string.htmlEscape(sanitizedLinkRef)+"\">");goog.dom.safe.documentWrite(newWin.document,safeHtml);newWin.document.close()}}else{newWin=parentWin.open(goog.html.SafeUrl.unwrap(safeLinkRef),target,optionString)}return newWin};goog.window.openBlank=function(opt_message,opt_options,opt_parentWin){var loadingMessage;if(!opt_message){loadingMessage=""}else{loadingMessage=goog.string.escapeString(goog.string.htmlEscape(opt_message))}var url=goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("b/12014412, encoded string in javascript: URL"),"javascript:\""+encodeURI(loadingMessage)+"\"");return goog.window.open(url,opt_options,opt_parentWin)};goog.window.popup=function(linkRef,opt_options){if(!opt_options){opt_options={}}opt_options.target=opt_options.target||linkRef.target||goog.window.DEFAULT_POPUP_TARGET;opt_options.width=opt_options.width||goog.window.DEFAULT_POPUP_WIDTH;opt_options.height=opt_options.height||goog.window.DEFAULT_POPUP_HEIGHT;var newWin=goog.window.open(linkRef,opt_options);if(!newWin){return!0}newWin.focus();return!1};