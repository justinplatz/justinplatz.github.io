goog.provide("goog.style.transformTest");goog.setTestOnly("goog.style.transformTest");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.style");goog.require("goog.style.transform");goog.require("goog.testing.jsunit");goog.require("goog.userAgent");goog.require("goog.userAgent.product.isVersion");var EPSILON=1e-4,element,setAndAssertTranslation=function(x,y){if(goog.userAgent.GECKO||goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){return}var success=goog.style.transform.setTranslation(element,x,y);if(!goog.style.transform.isSupported()){assertFalse(success)}else{assertTrue(success);var translation=goog.style.transform.getTranslation(element);assertEquals(x,translation.x);assertEquals(y,translation.y)}},setAndAssertScale=function(x,y,z){if(goog.userAgent.GECKO||goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){return}var success=goog.style.transform.setScale(element,x,y,z);if(!goog.style.transform.isSupported()){assertFalse(success)}else{assertTrue(success);var scale=goog.style.transform.getScale(element);assertEquals(x,scale.x);assertEquals(y,scale.y);if(goog.style.transform.is3dSupported()){assertEquals(z,scale.z)}}},setAndAssertRotation=function(expectedDegrees,opt_transform){if(goog.userAgent.GECKO||goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)){return}if(opt_transform){goog.style.setStyle(element,goog.style.transform.getTransformProperty_(),opt_transform)}else{var success=goog.style.transform.setRotation(element,+expectedDegrees);if(!goog.style.transform.isSupported()){assertFalse(success);return}else{assertTrue(success)}}var rotation=goog.style.transform.getRotation(element);if(expectedDegrees instanceof Function){assertTrue("Incorrect rotation: "+rotation,expectedDegrees(rotation))}else{assertRoughlyEquals(expectedDegrees,rotation,EPSILON)}};function setUp(){element=goog.dom.createElement(goog.dom.TagName.DIV);goog.dom.appendChild(goog.dom.getDocument().body,element)}function tearDown(){goog.dom.removeNode(element)}function testIsSupported(){if(goog.userAgent.IE&&!goog.userAgent.product.isVersion(9)){assertFalse(goog.style.transform.isSupported())}else{assertTrue(goog.style.transform.isSupported())}}function testIs3dSupported(){if(goog.userAgent.GECKO&&!goog.userAgent.product.isVersion(10)||goog.userAgent.IE&&!goog.userAgent.product.isVersion(10)){assertFalse(goog.style.transform.is3dSupported())}else{assertTrue(goog.style.transform.is3dSupported())}}function testTranslateX(){setAndAssertTranslation(10,0)}function testTranslateY(){setAndAssertTranslation(0,10)}function testTranslateXY(){setAndAssertTranslation(10,20)}function testScaleX(){setAndAssertScale(5,1,1)}function testScaleY(){setAndAssertScale(1,3,1)}function testScaleZ(){setAndAssertScale(1,1,8)}function testScale(){setAndAssertScale(2,2,2)}function testRotatePositive(){setAndAssertRotation(90)}function testRotateNegative(){setAndAssertRotation(-90)}function testGetRotationWhenScaledUp(){setAndAssertRotation(90,"scale(5) rotate3d(0,0,1,90deg)")}function testGetRotationWhenScaledDown(){setAndAssertRotation(90,"scale(.5) rotate3d(0,0,1,90deg)")}function testGetRotationWithSkew(){setAndAssertRotation(0,"skew(30deg, 30deg)");setAndAssertRotation(function(x){return 0<x&&30>x},"skew(0, 30deg)");setAndAssertRotation(function(x){return 0>x&&-30<x},"skew(30deg, 0)")}