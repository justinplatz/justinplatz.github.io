goog.provide("goog.format.JsonPrettyPrinter");goog.provide("goog.format.JsonPrettyPrinter.SafeHtmlDelimiters");goog.provide("goog.format.JsonPrettyPrinter.TextDelimiters");goog.require("goog.html.SafeHtml");goog.require("goog.json");goog.require("goog.json.Serializer");goog.require("goog.string");goog.require("goog.string.format");goog.format.JsonPrettyPrinter=function(opt_delimiters){this.delimiters_=opt_delimiters||new goog.format.JsonPrettyPrinter.TextDelimiters;this.jsonSerializer_=new goog.json.Serializer};goog.format.JsonPrettyPrinter.prototype.format=function(json){for(var buffer=this.format_(json),output="",i=0,item;i<buffer.length;i++){item=buffer[i];output+=item instanceof goog.html.SafeHtml?goog.html.SafeHtml.unwrap(item):item}return output};goog.format.JsonPrettyPrinter.prototype.formatSafeHtml=function(json){return goog.html.SafeHtml.concat(this.format_(json))};goog.format.JsonPrettyPrinter.prototype.format_=function(json){if(!goog.isDefAndNotNull(json)){return[]}if(goog.isString(json)){if(goog.string.isEmptyOrWhitespace(json)){return[]}json=goog.json.parse(json)}var outputBuffer=[];this.printObject_(json,outputBuffer,0);return outputBuffer};goog.format.JsonPrettyPrinter.prototype.printObject_=function(val,outputBuffer,indent){var typeOf=goog.typeOf(val);switch(typeOf){case"null":case"boolean":case"number":case"string":this.printValue_(val,typeOf,outputBuffer);break;case"array":outputBuffer.push(this.delimiters_.arrayStart);var i=0;for(i=0;i<val.length;i++){if(0<i){outputBuffer.push(this.delimiters_.propertySeparator)}outputBuffer.push(this.delimiters_.lineBreak);this.printSpaces_(indent+this.delimiters_.indent,outputBuffer);this.printObject_(val[i],outputBuffer,indent+this.delimiters_.indent)}if(0<i){outputBuffer.push(this.delimiters_.lineBreak);this.printSpaces_(indent,outputBuffer)}outputBuffer.push(this.delimiters_.arrayEnd);break;case"object":outputBuffer.push(this.delimiters_.objectStart);var propertyCount=0;for(var name in val){if(!val.hasOwnProperty(name)){continue}if(0<propertyCount){outputBuffer.push(this.delimiters_.propertySeparator)}outputBuffer.push(this.delimiters_.lineBreak);this.printSpaces_(indent+this.delimiters_.indent,outputBuffer);this.printName_(name,outputBuffer);outputBuffer.push(this.delimiters_.nameValueSeparator,this.delimiters_.space);this.printObject_(val[name],outputBuffer,indent+this.delimiters_.indent);propertyCount++}if(0<propertyCount){outputBuffer.push(this.delimiters_.lineBreak);this.printSpaces_(indent,outputBuffer)}outputBuffer.push(this.delimiters_.objectEnd);break;default:this.printValue_("","unknown",outputBuffer);}};goog.format.JsonPrettyPrinter.prototype.printName_=function(name,outputBuffer){outputBuffer.push(this.delimiters_.formatName(this.jsonSerializer_.serialize(name)))};goog.format.JsonPrettyPrinter.prototype.printValue_=function(val,typeOf,outputBuffer){var value=this.jsonSerializer_.serialize(val);outputBuffer.push(this.delimiters_.formatValue(value,typeOf))};goog.format.JsonPrettyPrinter.prototype.printSpaces_=function(indent,outputBuffer){outputBuffer.push(goog.string.repeat(this.delimiters_.space,indent))};goog.format.JsonPrettyPrinter.TextDelimiters=function(){};goog.format.JsonPrettyPrinter.TextDelimiters.prototype.space=" ";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.lineBreak="\n";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.objectStart="{";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.objectEnd="}";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.arrayStart="[";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.arrayEnd="]";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.propertySeparator=",";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.nameValueSeparator=":";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.preName="";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.postName="";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.formatName=function(name){return this.preName+name+this.postName};goog.format.JsonPrettyPrinter.TextDelimiters.prototype.preValue="";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.postValue="";goog.format.JsonPrettyPrinter.TextDelimiters.prototype.formatValue=function(value,typeOf){return goog.string.format(this.preValue,typeOf)+value+this.postValue};goog.format.JsonPrettyPrinter.TextDelimiters.prototype.indent=2;goog.format.JsonPrettyPrinter.SafeHtmlDelimiters=function(){goog.format.JsonPrettyPrinter.TextDelimiters.call(this)};goog.inherits(goog.format.JsonPrettyPrinter.SafeHtmlDelimiters,goog.format.JsonPrettyPrinter.TextDelimiters);goog.format.JsonPrettyPrinter.SafeHtmlDelimiters.prototype.formatName=function(name){var classes=goog.getCssName("goog-jsonprettyprinter-propertyname");return goog.html.SafeHtml.create("span",{class:classes},name)};goog.format.JsonPrettyPrinter.SafeHtmlDelimiters.prototype.formatValue=function(value,typeOf){var classes=this.getValueCssName(typeOf);return goog.html.SafeHtml.create("span",{class:classes},value)};goog.format.JsonPrettyPrinter.SafeHtmlDelimiters.prototype.getValueCssName=function(typeOf){switch(typeOf){case"null":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-null");case"boolean":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-boolean");case"number":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-number");case"string":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-string");case"array":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-array");case"object":return goog.getCssName("goog-jsonprettyprinter-propertyvalue-object");default:return goog.getCssName("goog-jsonprettyprinter-propertyvalue-unknown");}};