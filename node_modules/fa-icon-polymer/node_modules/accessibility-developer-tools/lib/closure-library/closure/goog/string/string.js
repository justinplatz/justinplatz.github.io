goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.define("goog.string.DETECT_DOUBLE_ESCAPING",!1);goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",!1);goog.string.Unicode={NBSP:"\xA0"};goog.string.startsWith=function(str,prefix){return 0==str.lastIndexOf(prefix,0)};goog.string.endsWith=function(str,suffix){var l=str.length-suffix.length;return 0<=l&&str.indexOf(suffix,l)==l};goog.string.caseInsensitiveStartsWith=function(str,prefix){return 0==goog.string.caseInsensitiveCompare(prefix,str.substr(0,prefix.length))};goog.string.caseInsensitiveEndsWith=function(str,suffix){return 0==goog.string.caseInsensitiveCompare(suffix,str.substr(str.length-suffix.length,suffix.length))};goog.string.caseInsensitiveEquals=function(str1,str2){return str1.toLowerCase()==str2.toLowerCase()};goog.string.subs=function(str,var_args){var splitParts=str.split("%s"),returnString="",subsArguments=Array.prototype.slice.call(arguments,1);while(subsArguments.length&&1<splitParts.length){returnString+=splitParts.shift()+subsArguments.shift()}return returnString+splitParts.join("%s")};goog.string.collapseWhitespace=function(str){return str.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=function(str){return /^[\s\xa0]*$/.test(str)};goog.string.isEmptyString=function(str){return 0==str.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;goog.string.isEmptyOrWhitespaceSafe=function(str){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(str))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(str){return!/[^\t\n\r ]/.test(str)};goog.string.isAlpha=function(str){return!/[^a-zA-Z]/.test(str)};goog.string.isNumeric=function(str){return!/[^0-9]/.test(str)};goog.string.isAlphaNumeric=function(str){return!/[^a-zA-Z0-9]/.test(str)};goog.string.isSpace=function(ch){return" "==ch};goog.string.isUnicodeChar=function(ch){return 1==ch.length&&" "<=ch&&"~">=ch||"\x80"<=ch&&"\uFFFD">=ch};goog.string.stripNewlines=function(str){return str.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(str){return str.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(str){return str.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(str){return str.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(str){return str.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(str){return str.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(str){return str.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(str1,str2){var test1=(str1+"").toLowerCase(),test2=(str2+"").toLowerCase();if(test1<test2){return-1}else if(test1==test2){return 0}else{return 1}};goog.string.numberAwareCompare_=function(str1,str2,tokenizerRegExp){if(str1==str2){return 0}if(!str1){return-1}if(!str2){return 1}for(var tokens1=str1.toLowerCase().match(tokenizerRegExp),tokens2=str2.toLowerCase().match(tokenizerRegExp),count=Math.min(tokens1.length,tokens2.length),i=0;i<count;i++){var a=tokens1[i],b=tokens2[i];if(a!=b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2){return num1-num2}}return a<b?-1:1}}if(tokens1.length!=tokens2.length){return tokens1.length-tokens2.length}return str1<str2?-1:1};goog.string.intAwareCompare=function(str1,str2){return goog.string.numberAwareCompare_(str1,str2,/\d+|\D+/g)};goog.string.floatAwareCompare=function(str1,str2){return goog.string.numberAwareCompare_(str1,str2,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(str){return encodeURIComponent(str+"")};goog.string.urlDecode=function(str){return decodeURIComponent(str.replace(/\+/g," "))};goog.string.newLineToBr=function(str,opt_xml){return str.replace(/(\r\n|\r|\n)/g,opt_xml?"<br />":"<br>")};goog.string.htmlEscape=function(str,opt_isLikelyToContainHtmlChars){if(opt_isLikelyToContainHtmlChars){str=str.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;");if(goog.string.DETECT_DOUBLE_ESCAPING){str=str.replace(goog.string.E_RE_,"&#101;")}return str}else{if(!goog.string.ALL_RE_.test(str))return str;if(-1!=str.indexOf("&")){str=str.replace(goog.string.AMP_RE_,"&amp;")}if(-1!=str.indexOf("<")){str=str.replace(goog.string.LT_RE_,"&lt;")}if(-1!=str.indexOf(">")){str=str.replace(goog.string.GT_RE_,"&gt;")}if(-1!=str.indexOf("\"")){str=str.replace(goog.string.QUOT_RE_,"&quot;")}if(-1!=str.indexOf("'")){str=str.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")}if(-1!=str.indexOf("\0")){str=str.replace(goog.string.NULL_RE_,"&#0;")}if(goog.string.DETECT_DOUBLE_ESCAPING&&-1!=str.indexOf("e")){str=str.replace(goog.string.E_RE_,"&#101;")}return str}};goog.string.AMP_RE_=/&/g;goog.string.LT_RE_=/</g;goog.string.GT_RE_=/>/g;goog.string.QUOT_RE_=/"/g;goog.string.SINGLE_QUOTE_RE_=/'/g;goog.string.NULL_RE_=/\x00/g;goog.string.E_RE_=/e/g;goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/;goog.string.unescapeEntities=function(str){if(goog.string.contains(str,"&")){if(!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global){return goog.string.unescapeEntitiesUsingDom_(str)}else{return goog.string.unescapePureXmlEntities_(str)}}return str};goog.string.unescapeEntitiesWithDocument=function(str,document){if(goog.string.contains(str,"&")){return goog.string.unescapeEntitiesUsingDom_(str,document)}return str};goog.string.unescapeEntitiesUsingDom_=function(str,opt_document){var seen={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":"\""},div;if(opt_document){div=opt_document.createElement("div")}else{div=goog.global.document.createElement("div")}return str.replace(goog.string.HTML_ENTITY_PATTERN_,function(s,entity){var value=seen[s];if(value){return value}if("#"==entity.charAt(0)){var n=+("0"+entity.substr(1));if(!isNaN(n)){value=String.fromCharCode(n)}}if(!value){div.innerHTML=s+" ";value=div.firstChild.nodeValue.slice(0,-1)}return seen[s]=value})};goog.string.unescapePureXmlEntities_=function(str){return str.replace(/&([^;]+);/g,function(s,entity){switch(entity){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return"\"";default:if("#"==entity.charAt(0)){var n=+("0"+entity.substr(1));if(!isNaN(n)){return String.fromCharCode(n)}}return s;}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(str,opt_xml){return goog.string.newLineToBr(str.replace(/  /g," &#160;"),opt_xml)};goog.string.preserveSpaces=function(str){return str.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(str,quoteChars){for(var length=quoteChars.length,i=0,quoteChar;i<length;i++){quoteChar=1==length?quoteChars:quoteChars.charAt(i);if(str.charAt(0)==quoteChar&&str.charAt(str.length-1)==quoteChar){return str.substring(1,str.length-1)}}return str};goog.string.truncate=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters){str=goog.string.unescapeEntities(str)}if(str.length>chars){str=str.substring(0,chars-3)+"..."}if(opt_protectEscapedCharacters){str=goog.string.htmlEscape(str)}return str};goog.string.truncateMiddle=function(str,chars,opt_protectEscapedCharacters,opt_trailingChars){if(opt_protectEscapedCharacters){str=goog.string.unescapeEntities(str)}if(opt_trailingChars&&str.length>chars){if(opt_trailingChars>chars){opt_trailingChars=chars}var endPoint=str.length-opt_trailingChars,startPoint=chars-opt_trailingChars;str=str.substring(0,startPoint)+"..."+str.substring(endPoint)}else if(str.length>chars){var half=Math.floor(chars/2),endPos=str.length-half;half+=chars%2;str=str.substring(0,half)+"..."+str.substring(endPos)}if(opt_protectEscapedCharacters){str=goog.string.htmlEscape(str)}return str};goog.string.specialEscapeChars_={" ":"\\0","":"\\b","":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':"\\\"","\\":"\\\\","<":"<"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(s){s=s+"";for(var sb=["\""],i=0;i<s.length;i++){var ch=s.charAt(i),cc=ch.charCodeAt(0);sb[i+1]=goog.string.specialEscapeChars_[ch]||(31<cc&&127>cc?ch:goog.string.escapeChar(ch))}sb.push("\"");return sb.join("")};goog.string.escapeString=function(str){for(var sb=[],i=0;i<str.length;i++){sb[i]=goog.string.escapeChar(str.charAt(i))}return sb.join("")};goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_){return goog.string.jsEscapeCache_[c]}if(c in goog.string.specialEscapeChars_){return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c]}var rv=c,cc=c.charCodeAt(0);if(31<cc&&127>cc){rv=c}else{if(256>cc){rv="\\x";if(16>cc||256<cc){rv+="0"}}else{rv="\\u";if(4096>cc){rv+="0"}}rv+=cc.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=rv};goog.string.contains=function(str,subString){return-1!=str.indexOf(subString)};goog.string.caseInsensitiveContains=function(str,subString){return goog.string.contains(str.toLowerCase(),subString.toLowerCase())};goog.string.countOf=function(s,ss){return s&&ss?s.split(ss).length-1:0};goog.string.removeAt=function(s,index,stringLength){var resultStr=s;if(0<=index&&index<s.length&&0<stringLength){resultStr=s.substr(0,index)+s.substr(index+stringLength,s.length-index-stringLength)}return resultStr};goog.string.remove=function(str,substr){return str.replace(substr,"")};goog.string.removeAll=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"g");return s.replace(re,"")};goog.string.replaceAll=function(s,ss,replacement){var re=new RegExp(goog.string.regExpEscape(ss),"g");return s.replace(re,replacement.replace(/\$/g,"$$$$"))};goog.string.regExpEscape=function(s){return(s+"").replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=String.prototype.repeat?function(string,length){return string.repeat(length)}:function(string,length){return Array(length+1).join(string)};goog.string.padNumber=function(num,length,opt_precision){var s=goog.isDef(opt_precision)?num.toFixed(opt_precision):num+"",index=s.indexOf(".");if(-1==index){index=s.length}return goog.string.repeat("0",Math.max(0,length-index))+s};goog.string.makeSafe=function(obj){return null==obj?"":obj+""};goog.string.buildString=function(var_args){return Array.prototype.join.call(arguments,"")};goog.string.getRandomString=function(){var _Mathfloor=Math.floor,x=2147483648;return _Mathfloor(Math.random()*x).toString(36)+Math.abs(_Mathfloor(Math.random()*x)^goog.now()).toString(36)};goog.string.compareVersions=function(version1,version2){for(var order=0,v1Subs=goog.string.trim(version1+"").split("."),v2Subs=goog.string.trim(version2+"").split("."),subCount=Math.max(v1Subs.length,v2Subs.length),subIdx=0;0==order&&subIdx<subCount;subIdx++){var v1Sub=v1Subs[subIdx]||"",v2Sub=v2Subs[subIdx]||"";do{var v1Comp=/(\d*)(\D*)(.*)/.exec(v1Sub)||["","","",""],v2Comp=/(\d*)(\D*)(.*)/.exec(v2Sub)||["","","",""];if(0==v1Comp[0].length&&0==v2Comp[0].length){break}var v1CompNum=0==v1Comp[1].length?0:parseInt(v1Comp[1],10),v2CompNum=0==v2Comp[1].length?0:parseInt(v2Comp[1],10);order=goog.string.compareElements_(v1CompNum,v2CompNum)||goog.string.compareElements_(0==v1Comp[2].length,0==v2Comp[2].length)||goog.string.compareElements_(v1Comp[2],v2Comp[2]);v1Sub=v1Comp[3];v2Sub=v2Comp[3]}while(0==order)}return order};goog.string.compareElements_=function(left,right){if(left<right){return-1}else if(left>right){return 1}return 0};goog.string.hashCode=function(str){for(var result=0,i=0;i<str.length;++i){result=31*result+str.charCodeAt(i)>>>0}return result};goog.string.uniqueStringCounter_=0|2147483648*Math.random();goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(str){var num=+str;if(0==num&&goog.string.isEmptyOrWhitespace(str)){return NaN}return num};goog.string.isLowerCamelCase=function(str){return /^[a-z]+([A-Z][a-z]*)*$/.test(str)};goog.string.isUpperCamelCase=function(str){return /^([A-Z][a-z]*)+$/.test(str)};goog.string.toCamelCase=function(str){return(str+"").replace(/\-([a-z])/g,function(all,match){return match.toUpperCase()})};goog.string.toSelectorCase=function(str){return(str+"").replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(str,opt_delimiters){var delimiters=goog.isString(opt_delimiters)?goog.string.regExpEscape(opt_delimiters):"\\s";delimiters=delimiters?"|["+delimiters+"]+":"";var regexp=new RegExp("(^"+delimiters+")([a-z])","g");return str.replace(regexp,function(all,p1,p2){return p1+p2.toUpperCase()})};goog.string.capitalize=function(str){return(str.charAt(0)+"").toUpperCase()+(str.substr(1)+"").toLowerCase()};goog.string.parseInt=function(value){if(isFinite(value)){value=value+""}if(goog.isString(value)){return /^\s*-?0x/i.test(value)?parseInt(value,16):parseInt(value,10)}return NaN};goog.string.splitLimit=function(str,separator,limit){var parts=str.split(separator),returnVal=[];while(0<limit&&parts.length){returnVal.push(parts.shift());limit--}if(parts.length){returnVal.push(parts.join(separator))}return returnVal};goog.string.lastComponent=function(str,separators){if(!separators){return str}else if("string"==typeof separators){separators=[separators]}for(var lastSeparatorIndex=-1,i=0;i<separators.length;i++){if(""==separators[i]){continue}var currentSeparatorIndex=str.lastIndexOf(separators[i]);if(currentSeparatorIndex>lastSeparatorIndex){lastSeparatorIndex=currentSeparatorIndex}}if(-1==lastSeparatorIndex){return str}return str.slice(lastSeparatorIndex+1)};goog.string.editDistance=function(a,b){var v0=[],v1=[];if(a==b){return 0}if(!a.length||!b.length){return Math.max(a.length,b.length)}for(var i=0;i<b.length+1;i++){v0[i]=i}for(var i=0;i<a.length;i++){v1[0]=i+1;for(var j=0,cost;j<b.length;j++){cost=+(a[i]!=b[j]);v1[j+1]=Math.min(v1[j]+1,v0[j+1]+1,v0[j]+cost)}for(var j=0;j<v0.length;j++){v0[j]=v1[j]}}return v1[b.length]};