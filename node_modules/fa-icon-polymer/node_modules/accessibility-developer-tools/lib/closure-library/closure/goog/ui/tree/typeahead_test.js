goog.provide("goog.ui.tree.TypeAheadTest");goog.setTestOnly("goog.ui.tree.TypeAheadTest");goog.require("goog.dom");goog.require("goog.events.KeyCodes");goog.require("goog.testing.jsunit");goog.require("goog.ui.tree.TreeControl");goog.require("goog.ui.tree.TypeAhead");function makeATree(){var tree=new goog.ui.tree.TreeControl("root"),testData=["level1",[["level2",[["eve",[]],["eve2",[["eve4",[]]]]]],["level22",[["eve",[]],["eve3",[]],["eve5",[]]]]]];createTreeNodeFromTestData(tree,testData,3);tree.createDom();goog.dom.getElement("treeContainer").appendChild(tree.getElement());tree.enterDocument();return tree}function createTreeNodeFromTestData(node,data,maxLevels){node.setText(data[0]);if(0>maxLevels){return}for(var children=data[1],i=0;i<children.length;i++){var child=children[i],childNode=node.getTree().createNode("");node.add(childNode);createTreeNodeFromTestData(childNode,child,maxLevels-1)}}function testJumpToLabel(){var tree=makeATree(),typeAhead=tree.typeAhead_,handled=typeAhead.jumpToLabel_("level1"),selectedItem=tree.getSelectedItem();assertTrue(handled&&"level1"==selectedItem.getHtml());handled=typeAhead.jumpToLabel_("eve");selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve"==selectedItem.getHtml());var firstEveNode=selectedItem;handled=typeAhead.jumpToLabel_("eve3");selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve3"==selectedItem.getHtml());var leafNode=selectedItem;leafNode.getParent().removeChild(leafNode);handled=typeAhead.jumpToLabel_("eve3");selectedItem=tree.getSelectedItem();assertTrue(!handled);firstEveNode.getParent().removeChild(firstEveNode);handled=typeAhead.jumpToLabel_("eve");selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve"==selectedItem.getHtml());var secondEveNode=selectedItem;secondEveNode.getParent().removeChild(secondEveNode);handled=typeAhead.jumpToLabel_("eve");selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve2"==selectedItem.getHtml());var parentNode=selectedItem;parentNode.getParent().removeChild(parentNode);handled=typeAhead.jumpToLabel_("eve");selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve5"==selectedItem.getHtml())}function testJumpTo(){var tree=makeATree(),typeAhead=tree.typeAhead_,handled=typeAhead.jumpToLabel_("eve")&&typeAhead.jumpTo_(goog.ui.tree.TypeAhead.Offset.DOWN),selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve"==selectedItem.getHtml());var e={};e.keyCode=goog.events.KeyCodes.DOWN;e.preventDefault=function(){};handled=tree.handleKeyEvent(e);selectedItem=tree.getSelectedItem();assertTrue(handled&&"eve3"==selectedItem.getHtml())}function testHandleTypeAheadChar(){var tree=makeATree(),typeAhead=tree.typeAhead_,e={};e.keyCode=goog.events.KeyCodes.PERIOD;e.charCode=46;e.preventDefault=function(){};typeAhead.handleTypeAheadChar(e);assertEquals(".",typeAhead.buffer_);e.keyCode=goog.events.KeyCodes.A;e.charCode=void 0;typeAhead.buffer_="";typeAhead.handleTypeAheadChar(e);assertEquals("a",typeAhead.buffer_)}