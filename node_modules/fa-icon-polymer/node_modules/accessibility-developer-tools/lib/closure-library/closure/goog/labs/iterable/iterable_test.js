goog.module("goog.labs.iterableTest");goog.setTestOnly("goog.labs.iterableTest");goog.require("goog.testing.jsunit");var iterable=goog.require("goog.labs.iterable"),recordFunction=goog.require("goog.testing.recordFunction"),testSuite=goog.require("goog.testing.testSuite");function createRangeIterator(start,stop){var value=start,next=function(){if(value<stop){return{value:value++,done:!1}}return{value:void 0,done:!0}};return{next:next}}function createRangeIterable(start,stop){var obj={};obj[goog.global.Symbol.iterator]=function(){return createRangeIterator(start,stop)};return obj}function isSymbolDefined(){return!!goog.global.Symbol}testSuite({testCreateRangeIterable:function(){if(!isSymbolDefined()){return}for(var rangeIterator=createRangeIterator(0,3),i=0;3>i;i++){assertObjectEquals({value:i,done:!1},rangeIterator.next())}for(var i=0;3>i;i++){assertObjectEquals({value:void 0,done:!0},rangeIterator.next())}},testForEach:function(){if(!isSymbolDefined()){return}var range=createRangeIterable(0,3),callback=recordFunction();iterable.forEach(callback,range,self);callback.assertCallCount(3);for(var calls=callback.getCalls(),i=0,call;i<calls.length;i++){call=calls[i];assertArrayEquals([i],call.getArguments())}},testMap:function(){if(!isSymbolDefined()){return}var range=createRangeIterable(0,3);function addTwo(i){return i+2}var newIterable=iterable.map(addTwo,range),newIterator=iterable.getIterator(newIterable),nextObj=newIterator.next();assertEquals(2,nextObj.value);assertFalse(nextObj.done);nextObj=newIterator.next();assertEquals(3,nextObj.value);assertFalse(nextObj.done);nextObj=newIterator.next();assertEquals(4,nextObj.value);assertFalse(nextObj.done);for(var i=0;3>i;i++){nextObj=newIterator.next();assertUndefined(nextObj.value);assertTrue(nextObj.done)}}});