goog.provide("goog.crypt.Md5");goog.require("goog.crypt.Hash");goog.crypt.Md5=function(){goog.crypt.Md5.base(this,"constructor");this.blockSize=512/8;this.chain_=[,,,,];this.block_=Array(this.blockSize);this.blockLength_=0;this.totalLength_=0;this.reset()};goog.inherits(goog.crypt.Md5,goog.crypt.Hash);goog.crypt.Md5.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.blockLength_=0;this.totalLength_=0};goog.crypt.Md5.prototype.compress_=function(buf,opt_offset){if(!opt_offset){opt_offset=0}var X=Array(16);if(goog.isString(buf)){for(var i=0;16>i;++i){X[i]=buf.charCodeAt(opt_offset++)|buf.charCodeAt(opt_offset++)<<8|buf.charCodeAt(opt_offset++)<<16|buf.charCodeAt(opt_offset++)<<24}}else{for(var i=0;16>i;++i){X[i]=buf[opt_offset++]|buf[opt_offset++]<<8|buf[opt_offset++]<<16|buf[opt_offset++]<<24}}var A=this.chain_[0],B=this.chain_[1],C=this.chain_[2],D=this.chain_[3],sum=0;sum=4294967295&A+(D^B&(C^D))+X[0]+3614090360;A=B+(4294967295&sum<<7|sum>>>25);sum=4294967295&D+(C^A&(B^C))+X[1]+3905402710;D=A+(4294967295&sum<<12|sum>>>20);sum=4294967295&C+(B^D&(A^B))+X[2]+606105819;C=D+(4294967295&sum<<17|sum>>>15);sum=4294967295&B+(A^C&(D^A))+X[3]+3250441966;B=C+(4294967295&sum<<22|sum>>>10);sum=4294967295&A+(D^B&(C^D))+X[4]+4118548399;A=B+(4294967295&sum<<7|sum>>>25);sum=4294967295&D+(C^A&(B^C))+X[5]+1200080426;D=A+(4294967295&sum<<12|sum>>>20);sum=4294967295&C+(B^D&(A^B))+X[6]+2821735955;C=D+(4294967295&sum<<17|sum>>>15);sum=4294967295&B+(A^C&(D^A))+X[7]+4249261313;B=C+(4294967295&sum<<22|sum>>>10);sum=4294967295&A+(D^B&(C^D))+X[8]+1770035416;A=B+(4294967295&sum<<7|sum>>>25);sum=4294967295&D+(C^A&(B^C))+X[9]+2336552879;D=A+(4294967295&sum<<12|sum>>>20);sum=4294967295&C+(B^D&(A^B))+X[10]+4294925233;C=D+(4294967295&sum<<17|sum>>>15);sum=4294967295&B+(A^C&(D^A))+X[11]+2304563134;B=C+(4294967295&sum<<22|sum>>>10);sum=4294967295&A+(D^B&(C^D))+X[12]+1804603682;A=B+(4294967295&sum<<7|sum>>>25);sum=4294967295&D+(C^A&(B^C))+X[13]+4254626195;D=A+(4294967295&sum<<12|sum>>>20);sum=4294967295&C+(B^D&(A^B))+X[14]+2792965006;C=D+(4294967295&sum<<17|sum>>>15);sum=4294967295&B+(A^C&(D^A))+X[15]+1236535329;B=C+(4294967295&sum<<22|sum>>>10);sum=4294967295&A+(C^D&(B^C))+X[1]+4129170786;A=B+(4294967295&sum<<5|sum>>>27);sum=4294967295&D+(B^C&(A^B))+X[6]+3225465664;D=A+(4294967295&sum<<9|sum>>>23);sum=4294967295&C+(A^B&(D^A))+X[11]+643717713;C=D+(4294967295&sum<<14|sum>>>18);sum=4294967295&B+(D^A&(C^D))+X[0]+3921069994;B=C+(4294967295&sum<<20|sum>>>12);sum=4294967295&A+(C^D&(B^C))+X[5]+3593408605;A=B+(4294967295&sum<<5|sum>>>27);sum=4294967295&D+(B^C&(A^B))+X[10]+38016083;D=A+(4294967295&sum<<9|sum>>>23);sum=4294967295&C+(A^B&(D^A))+X[15]+3634488961;C=D+(4294967295&sum<<14|sum>>>18);sum=4294967295&B+(D^A&(C^D))+X[4]+3889429448;B=C+(4294967295&sum<<20|sum>>>12);sum=4294967295&A+(C^D&(B^C))+X[9]+568446438;A=B+(4294967295&sum<<5|sum>>>27);sum=4294967295&D+(B^C&(A^B))+X[14]+3275163606;D=A+(4294967295&sum<<9|sum>>>23);sum=4294967295&C+(A^B&(D^A))+X[3]+4107603335;C=D+(4294967295&sum<<14|sum>>>18);sum=4294967295&B+(D^A&(C^D))+X[8]+1163531501;B=C+(4294967295&sum<<20|sum>>>12);sum=4294967295&A+(C^D&(B^C))+X[13]+2850285829;A=B+(4294967295&sum<<5|sum>>>27);sum=4294967295&D+(B^C&(A^B))+X[2]+4243563512;D=A+(4294967295&sum<<9|sum>>>23);sum=4294967295&C+(A^B&(D^A))+X[7]+1735328473;C=D+(4294967295&sum<<14|sum>>>18);sum=4294967295&B+(D^A&(C^D))+X[12]+2368359562;B=C+(4294967295&sum<<20|sum>>>12);sum=4294967295&A+(B^C^D)+X[5]+4294588738;A=B+(4294967295&sum<<4|sum>>>28);sum=4294967295&D+(A^B^C)+X[8]+2272392833;D=A+(4294967295&sum<<11|sum>>>21);sum=4294967295&C+(D^A^B)+X[11]+1839030562;C=D+(4294967295&sum<<16|sum>>>16);sum=4294967295&B+(C^D^A)+X[14]+4259657740;B=C+(4294967295&sum<<23|sum>>>9);sum=4294967295&A+(B^C^D)+X[1]+2763975236;A=B+(4294967295&sum<<4|sum>>>28);sum=4294967295&D+(A^B^C)+X[4]+1272893353;D=A+(4294967295&sum<<11|sum>>>21);sum=4294967295&C+(D^A^B)+X[7]+4139469664;C=D+(4294967295&sum<<16|sum>>>16);sum=4294967295&B+(C^D^A)+X[10]+3200236656;B=C+(4294967295&sum<<23|sum>>>9);sum=4294967295&A+(B^C^D)+X[13]+681279174;A=B+(4294967295&sum<<4|sum>>>28);sum=4294967295&D+(A^B^C)+X[0]+3936430074;D=A+(4294967295&sum<<11|sum>>>21);sum=4294967295&C+(D^A^B)+X[3]+3572445317;C=D+(4294967295&sum<<16|sum>>>16);sum=4294967295&B+(C^D^A)+X[6]+76029189;B=C+(4294967295&sum<<23|sum>>>9);sum=4294967295&A+(B^C^D)+X[9]+3654602809;A=B+(4294967295&sum<<4|sum>>>28);sum=4294967295&D+(A^B^C)+X[12]+3873151461;D=A+(4294967295&sum<<11|sum>>>21);sum=4294967295&C+(D^A^B)+X[15]+530742520;C=D+(4294967295&sum<<16|sum>>>16);sum=4294967295&B+(C^D^A)+X[2]+3299628645;B=C+(4294967295&sum<<23|sum>>>9);sum=4294967295&A+(C^(B|~D))+X[0]+4096336452;A=B+(4294967295&sum<<6|sum>>>26);sum=4294967295&D+(B^(A|~C))+X[7]+1126891415;D=A+(4294967295&sum<<10|sum>>>22);sum=4294967295&C+(A^(D|~B))+X[14]+2878612391;C=D+(4294967295&sum<<15|sum>>>17);sum=4294967295&B+(D^(C|~A))+X[5]+4237533241;B=C+(4294967295&sum<<21|sum>>>11);sum=4294967295&A+(C^(B|~D))+X[12]+1700485571;A=B+(4294967295&sum<<6|sum>>>26);sum=4294967295&D+(B^(A|~C))+X[3]+2399980690;D=A+(4294967295&sum<<10|sum>>>22);sum=4294967295&C+(A^(D|~B))+X[10]+4293915773;C=D+(4294967295&sum<<15|sum>>>17);sum=4294967295&B+(D^(C|~A))+X[1]+2240044497;B=C+(4294967295&sum<<21|sum>>>11);sum=4294967295&A+(C^(B|~D))+X[8]+1873313359;A=B+(4294967295&sum<<6|sum>>>26);sum=4294967295&D+(B^(A|~C))+X[15]+4264355552;D=A+(4294967295&sum<<10|sum>>>22);sum=4294967295&C+(A^(D|~B))+X[6]+2734768916;C=D+(4294967295&sum<<15|sum>>>17);sum=4294967295&B+(D^(C|~A))+X[13]+1309151649;B=C+(4294967295&sum<<21|sum>>>11);sum=4294967295&A+(C^(B|~D))+X[4]+4149444226;A=B+(4294967295&sum<<6|sum>>>26);sum=4294967295&D+(B^(A|~C))+X[11]+3174756917;D=A+(4294967295&sum<<10|sum>>>22);sum=4294967295&C+(A^(D|~B))+X[2]+718787259;C=D+(4294967295&sum<<15|sum>>>17);sum=4294967295&B+(D^(C|~A))+X[9]+3951481745;B=C+(4294967295&sum<<21|sum>>>11);this.chain_[0]=4294967295&this.chain_[0]+A;this.chain_[1]=4294967295&this.chain_[1]+B;this.chain_[2]=4294967295&this.chain_[2]+C;this.chain_[3]=4294967295&this.chain_[3]+D};goog.crypt.Md5.prototype.update=function(bytes,opt_length){if(!goog.isDef(opt_length)){opt_length=bytes.length}var lengthMinusBlock=opt_length-this.blockSize,block=this.block_,blockLength=this.blockLength_,i=0;while(i<opt_length){if(0==blockLength){while(i<=lengthMinusBlock){this.compress_(bytes,i);i+=this.blockSize}}if(goog.isString(bytes)){while(i<opt_length){block[blockLength++]=bytes.charCodeAt(i++);if(blockLength==this.blockSize){this.compress_(block);blockLength=0;break}}}else{while(i<opt_length){block[blockLength++]=bytes[i++];if(blockLength==this.blockSize){this.compress_(block);blockLength=0;break}}}}this.blockLength_=blockLength;this.totalLength_+=opt_length};goog.crypt.Md5.prototype.digest=function(){var pad=Array((56>this.blockLength_?this.blockSize:2*this.blockSize)-this.blockLength_);pad[0]=128;for(var i=1;i<pad.length-8;++i){pad[i]=0}for(var totalBits=8*this.totalLength_,i=pad.length-8;i<pad.length;++i){pad[i]=255&totalBits;totalBits/=256}this.update(pad);for(var digest=Array(16),n=0,i=0;4>i;++i){for(var j=0;32>j;j+=8){digest[n++]=255&this.chain_[i]>>>j}}return digest};