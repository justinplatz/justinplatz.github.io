goog.provide("goog.graphics.SvgGraphicsTest");goog.setTestOnly("goog.graphics.SvgGraphicsTest");goog.require("goog.dom");goog.require("goog.graphics.SvgGraphics");goog.require("goog.testing.graphics");goog.require("goog.testing.jsunit");var graphics;function setUp(){if(!document.createElementNS){return}graphics=new goog.graphics.SvgGraphics("100px","100px");graphics.createDom();goog.dom.getElement("root").appendChild(graphics.getElement())}function testAddDef(){if(!graphics){return}var defElement1=document.createElement("div"),defElement2=document.createElement("div"),defKey1="def1",defKey2="def2",id=graphics.addDef(defKey1,defElement1);assertEquals("_svgdef_0",id);id=graphics.addDef(defKey1,defElement2);assertEquals("_svgdef_0",id);id=graphics.addDef(defKey2,defElement2);assertEquals("_svgdef_1",id)}function testGetDef(){if(!graphics){return}var defElement=document.createElement("div"),defKey="def",id=graphics.addDef(defKey,defElement);assertEquals(id,graphics.getDef(defKey));assertNull(graphics.getDef("randomKey"))}function testRemoveDef(){if(!graphics){return}var defElement=document.createElement("div"),defKey="def",addedId=graphics.addDef(defKey,defElement);graphics.removeDef("randomKey");assertEquals(addedId,graphics.getDef(defKey));graphics.removeDef(defKey);assertNull(graphics.getDef(defKey))}function testSetElementAffineTransform(){if(!graphics){return}var fill=new goog.graphics.SolidFill("blue"),stroke=null,rad=-3.1415926/6,costheta=0.8660254082502546,sintheta=-0.49999999226497965,dx=10,dy=-20,affine=new goog.graphics.AffineTransform(costheta,-sintheta+1,sintheta,costheta,dx,dy),rect=graphics.drawRect(10,20,30,40,stroke,fill);rect.setTransform(affine);graphics.render();function getTransformToElement(element,target){return target.getScreenCTM().inverse().multiply(element.getScreenCTM())}var svgMatrix=getTransformToElement(rect.getElement(),graphics.getElement());assertRoughlyEquals(svgMatrix.a,costheta,.001);assertRoughlyEquals(svgMatrix.b,-sintheta+1,.001);assertRoughlyEquals(svgMatrix.c,sintheta,.001);assertRoughlyEquals(svgMatrix.d,costheta,.001);assertRoughlyEquals(svgMatrix.e,dx,.001);assertRoughlyEquals(svgMatrix.f,dy,.001)}