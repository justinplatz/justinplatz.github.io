goog.provide("goog.async.FreeListTest");goog.setTestOnly("goog.async.FreeListTest");goog.require("goog.async.FreeList");goog.require("goog.testing.jsunit");var id=0,list=null;function setUp(){var id=0,data=1;list=new goog.async.FreeList(function(){data*=2;return{id:id++,data:data,next:null}},function(item){item.data=null},2)}function tearDown(){list=null}function testItemsCreatedAsNeeded(){assertEquals(0,list.occupants());var item1=list.get();assertNotNullNorUndefined(item1);var item2=list.get();assertNotNullNorUndefined(item2);assertNotEquals(item1,item2);assertEquals(0,list.occupants())}function testMaxOccupancy(){assertEquals(0,list.occupants());var item1=list.get(),item2=list.get(),item3=list.get();list.put(item1);list.put(item2);list.put(item3);assertEquals(2,list.occupants())}function testRecycling(){assertEquals(0,list.occupants());var item1=list.get();assertNotNull(item1.data);list.put(item1);var item2=list.get();assertEquals(item1,item2);assertNull(item2.data)}