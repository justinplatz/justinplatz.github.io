goog.provide("goog.testing.events.OnlineHandlerTest");goog.setTestOnly("goog.testing.events.OnlineHandlerTest");goog.require("goog.events");goog.require("goog.net.NetworkStatusMonitor");goog.require("goog.testing.events.EventObserver");goog.require("goog.testing.events.OnlineHandler");goog.require("goog.testing.jsunit");var handler,observer;function tearDown(){handler=null;observer=null}function testInitialValue(){createHandler(!0);assertEquals(!0,handler.isOnline());createHandler(!1);assertEquals(!1,handler.isOnline())}function testStateChange(){createHandler(!0);assertEventCounts(0,0);handler.setOnline(!0);assertEquals(!0,handler.isOnline());assertEventCounts(0,0);handler.setOnline(!1);assertEquals(!1,handler.isOnline());assertEventCounts(0,1);handler.setOnline(!1);assertEquals(!1,handler.isOnline());assertEventCounts(0,1);handler.setOnline(!0);assertEquals(!0,handler.isOnline());assertEventCounts(1,1)}function createHandler(initialValue){handler=new goog.testing.events.OnlineHandler(initialValue);observer=new goog.testing.events.EventObserver;goog.events.listen(handler,[goog.net.NetworkStatusMonitor.EventType.ONLINE,goog.net.NetworkStatusMonitor.EventType.OFFLINE],observer)}function assertEventCounts(expectedOnlineEvents,expectedOfflineEvents){assertEquals(expectedOnlineEvents,observer.getEvents(goog.net.NetworkStatusMonitor.EventType.ONLINE).length);assertEquals(expectedOfflineEvents,observer.getEvents(goog.net.NetworkStatusMonitor.EventType.OFFLINE).length)}