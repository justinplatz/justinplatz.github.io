goog.provide("goog.ui.emoji.EmojiPickerTest");goog.setTestOnly("goog.ui.emoji.EmojiPickerTest");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.events.EventHandler");goog.require("goog.style");goog.require("goog.testing.events");goog.require("goog.testing.jsunit");goog.require("goog.ui.Component");goog.require("goog.ui.emoji.Emoji");goog.require("goog.ui.emoji.EmojiPicker");goog.require("goog.ui.emoji.SpriteInfo");var handler;function setUp(){handler=new goog.events.EventHandler}function tearDown(){handler.removeAll()}var emojiGroup1=["Emoji 1",[["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"]]],emojiGroup2=["Emoji 2",[["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"]]],emojiGroup3=["Emoji 3",[["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"]]],sprite="../../demos/emoji/sprite.png",sprite2="../../demos/emoji/sprite2.png";function si(cssClass,opt_url,opt_width,opt_height,opt_xOffset,opt_yOffset,opt_animated){return new goog.ui.emoji.SpriteInfo(cssClass,opt_url,opt_width,opt_height,opt_xOffset,opt_yOffset,opt_animated)}var spritedEmoji1=["Emoji 1",[["../../demos/emoji/200.gif","std.200",si("SPRITE_200")],["../../demos/emoji/201.gif","std.201",si("SPRITE_201")],["../../demos/emoji/202.gif","std.202",si("SPRITE_202")],["../../demos/emoji/203.gif","std.203",si("SPRITE_203")],["../../demos/emoji/204.gif","std.204",si("SPRITE_204")],["../../demos/emoji/200.gif","std.200",si("SPRITE_200")],["../../demos/emoji/201.gif","std.201",si("SPRITE_201")],["../../demos/emoji/202.gif","std.202",si("SPRITE_202")],["../../demos/emoji/203.gif","std.203",si("SPRITE_203")],["../../demos/emoji/2BE.gif","std.2BE",si(null,sprite,18,18,36,54)],["../../demos/emoji/2BF.gif","std.2BF",si(null,sprite,18,18,0,126)],["../../demos/emoji/2C0.gif","std.2C0",si(null,sprite,18,18,18,305)],["../../demos/emoji/2C1.gif","std.2C1",si(null,sprite,18,18,0,287)],["../../demos/emoji/2C2.gif","std.2C2",si(null,sprite,18,18,18,126)],["../../demos/emoji/2C3.gif","std.2C3",si(null,sprite,18,18,36,234)],["../../demos/emoji/2C4.gif","std.2C4",si(null,sprite,18,18,36,72)],["../../demos/emoji/2C5.gif","std.2C5",si(null,sprite,18,18,54,54)],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"],["../../demos/emoji/204.gif","std.204"],["../../demos/emoji/200.gif","std.200"],["../../demos/emoji/201.gif","std.201"],["../../demos/emoji/202.gif","std.202"],["../../demos/emoji/203.gif","std.203"]]],spritedEmoji2=["Emoji 1",[["../../demos/emoji/200.gif","std.200",si("SPRITE_200")],["../../demos/emoji/201.gif","std.201",si("SPRITE_201")],["../../demos/emoji/202.gif","std.202",si("SPRITE_202")],["../../demos/emoji/203.gif","std.203",si("SPRITE_203")],["../../demos/emoji/204.gif","std.204",si("SPRITE_204")],["../../demos/emoji/200.gif","std.200",si("SPRITE_200")],["../../demos/emoji/201.gif","std.201",si("SPRITE_201")],["../../demos/emoji/202.gif","std.202",si("SPRITE_202")],["../../demos/emoji/203.gif","std.203",si("SPRITE_203")],["../../demos/emoji/2BE.gif","std.2BE",si(null,sprite,18,18,36,54)],["../../demos/emoji/2BF.gif","std.2BF",si(null,sprite,18,18,0,126)],["../../demos/emoji/2C0.gif","std.2C0",si(null,sprite,18,18,18,305)],["../../demos/emoji/2C1.gif","std.2C1",si(null,sprite,18,18,0,287)],["../../demos/emoji/2C2.gif","std.2C2",si(null,sprite,18,18,18,126)],["../../demos/emoji/2C3.gif","std.2C3",si(null,sprite,18,18,36,234)],["../../demos/emoji/2C4.gif","std.2C4",si(null,sprite,18,18,36,72)],["../../demos/emoji/2C5.gif","std.2C5",si(null,sprite,18,18,54,54)],["../../demos/emoji/2C6.gif","std.2C6"],["../../demos/emoji/2C7.gif","std.2C7"],["../../demos/emoji/2C8.gif","std.2C8"],["../../demos/emoji/2C9.gif","std.2C9"],["../../demos/emoji/2CA.gif","std.2CA",si(null,sprite2,18,20,36,72,1)],["../../demos/emoji/2E3.gif","std.2E3",si(null,sprite2,18,18,0,0,1)],["../../demos/emoji/2EF.gif","std.2EF",si(null,sprite2,18,20,0,300,1)],["../../demos/emoji/2F1.gif","std.2F1",si(null,sprite2,18,18,0,320,1)]]],emojiGroups=[emojiGroup1,emojiGroup2,emojiGroup3];function testConstructAndRenderOnePageEmojiPicker(){var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif");picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();picker.dispose()}function testConstructAndRenderMultiPageEmojiPicker(){var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif");picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.addEmojiGroup(emojiGroup2[0],emojiGroup2[1]);picker.addEmojiGroup(emojiGroup3[0],emojiGroup3[1]);picker.render();picker.dispose()}function testExitDocumentCleansUpProperlyForSinglePageEmojiPicker(){var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif");picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();picker.enterDocument();picker.exitDocument();picker.dispose()}function testExitDocumentCleansUpProperlyForMultiPageEmojiPicker(){var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif");picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.addEmojiGroup(emojiGroup2[0],emojiGroup2[1]);picker.render();picker.enterDocument();picker.exitDocument();picker.dispose()}function testNumGroups(){for(var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif"),i=0;i<emojiGroups.length;i++){picker.addEmojiGroup(emojiGroups[i][0],emojiGroups[i][1])}assertTrue(picker.getNumEmojiGroups()==emojiGroups.length)}function testAdjustNumRowsIfNecessaryIsCorrect(){var picker=new goog.ui.emoji.EmojiPicker("../../demos/emoji/none.gif");picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.setAutoSizeByColumnCount(!0);picker.setNumColumns(5);assertEquals(5,picker.getNumColumns());assertEquals(goog.ui.emoji.EmojiPicker.DEFAULT_NUM_ROWS,picker.getNumRows());picker.adjustNumRowsIfNecessary_();assertEquals(6,picker.getNumRows());picker.setNumColumns(10);picker.adjustNumRowsIfNecessary_();assertEquals(3,picker.getNumRows());picker.addEmojiGroup(emojiGroup2[0],emojiGroup2[1]);picker.setNumColumns(10);picker.setNumRows(2);picker.adjustNumRowsIfNecessary_();assertEquals(3,picker.getNumRows())}function checkPathsEndWithSameFile(path1,path2){var pieces1=path1.split("/"),file1=pieces1[pieces1.length-1],pieces2=path2.split("/"),file2=pieces2[pieces2.length-1];return file1==file2}function getImageUrl(element){element=element.firstChild;if(element.tagName==goog.dom.TagName.IMG){return element.src}else{var url=goog.style.getStyle(element,"background-image");url=url.replace(/url\(/,"");url=url.replace(/\)/,"");return url}}function checkContentIsDefaultImg(page,defaultImgUrl){for(var content=page.getContent(),i=0,url;i<content.length;i++){url=getImageUrl(content[i]);assertTrue("img src should be "+defaultImgUrl+" but is "+url,checkPathsEndWithSameFile(url,defaultImgUrl))}}function checkContentIsEmojiImages(page,emojiList,defaultImg){for(var content=page.getContent(),i=0,url;i<content.length;i++){url=getImageUrl(content[i]);if(i<emojiList.length){assertTrue("Paths should end with the same file: "+url+", "+emojiList[i][0],checkPathsEndWithSameFile(url,emojiList[i][0]))}else{assertTrue("Paths should end with the same file: "+url+", "+defaultImg,checkPathsEndWithSameFile(url,defaultImg))}}}function testNonDelayedLoadPaletteCreationForSinglePagePicker(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();var page=picker.getPage(0);assertTrue("Page should be in the document but is not",page.isInDocument());checkContentIsEmojiImages(page,emojiGroup1[1],defaultImg);picker.dispose()}function testNonDelayedLoadPaletteCreationForMultiPagePicker(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);for(var i=0;i<emojiGroups.length;i++){picker.addEmojiGroup(emojiGroups[i][0],emojiGroups[i][1])}picker.render();for(var i=0,page;i<emojiGroups.length;i++){page=picker.getPage(i);assertTrue("Page "+i+" should be in the document but is not",page.isInDocument());checkContentIsEmojiImages(page,emojiGroups[i][1],defaultImg)}picker.dispose()}function testDelayedLoadPaletteCreationForSinglePagePicker(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!0);picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();checkContentIsDefaultImg(picker.getPage(0),defaultImg);picker.loadImages();var page=picker.getPage(0);assertTrue("Page should be in the document but is not",page.isInDocument());checkContentIsEmojiImages(page,emojiGroup1[1],defaultImg);picker.dispose()}function testGetSelectedEmoji(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();var palette=picker.getPage(0);assertUndefined(palette.getSelectedEmoji());palette.setSelectedIndex(0);var emoji=palette.getSelectedEmoji();assertEquals(emoji.getId(),"std.200");assertEquals(emoji.getUrl(),"../../demos/emoji/200.gif");picker.dispose()}function testGetSelectedEmoji_click(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();var palette=picker.getPage(0);palette.setSelectedIndex(2);var element=palette.getSelectedItem();palette.setSelectedIndex(0);var eventSent;handler.listen(picker,goog.ui.Component.EventType.ACTION,function(e){eventSent=e});goog.testing.events.fireClickSequence(element,void 0,void 0,{shiftKey:!1});var emoji=picker.getSelectedEmoji();assertEquals(emoji.getId(),"std.202");assertEquals(emoji.getUrl(),"../../demos/emoji/202.gif");assertFalse(eventSent.shiftKey);picker.dispose()}function testGetSelectedEmoji_shiftClick(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.addEmojiGroup(emojiGroup1[0],emojiGroup1[1]);picker.render();var palette=picker.getPage(0);palette.setSelectedIndex(3);var element=palette.getSelectedItem();palette.setSelectedIndex(0);var eventSent;handler.listen(picker,goog.ui.Component.EventType.ACTION,function(e){eventSent=e});goog.testing.events.fireClickSequence(element,void 0,void 0,{shiftKey:!0});var emoji=picker.getSelectedEmoji();assertEquals(emoji.getId(),"std.203");assertEquals(emoji.getUrl(),"../../demos/emoji/203.gif");assertTrue(eventSent.shiftKey);picker.dispose()}function checkStructureForNonProgressivePicker(palette,emoji){for(var i=0;i<emoji[1].length;i++){palette.setSelectedIndex(i);var emojiInfo=emoji[1][i],cell=palette.getSelectedItem(),inner=cell.firstChild;assertEquals("The palette item should be a div wrapped around something",cell.tagName,"DIV");assertNotNull("The outer div is not wrapped around another element",inner);assertEquals("The palette item should have the goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.ATTRIBUTE),emojiInfo[1]);assertEquals("The palette item should have the data-goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE),emojiInfo[1]);var spriteInfo=emojiInfo[2];if(spriteInfo){assertEquals(inner.tagName,"DIV");var cssClass=spriteInfo.getCssClass();if(cssClass){assertTrue("Sprite should have its CSS class set",goog.dom.classlist.contains(inner,cssClass))}else{checkPathsEndWithSameFile(goog.style.getStyle(inner,"background-image"),spriteInfo.getUrl());assertEquals(spriteInfo.getWidthCssValue(),goog.style.getStyle(inner,"width"));assertEquals(spriteInfo.getHeightCssValue(),goog.style.getStyle(inner,"height"));assertEquals((spriteInfo.getXOffsetCssValue()+" "+spriteInfo.getYOffsetCssValue()).replace(/px/g,"").replace(/pt/g,""),goog.style.getStyle(inner,"background-position").replace(/px/g,"").replace(/pt/g,""))}}else{assertEquals(inner.tagName,"IMG");checkPathsEndWithSameFile(inner.src,emojiInfo[0])}}}function checkStructureForProgressivePicker(palette,emoji){for(var i=0;i<emoji[1].length;i++){palette.setSelectedIndex(i);var emojiInfo=emoji[1][i],cell=palette.getSelectedItem(),inner=cell.firstChild;assertEquals("The palette item should be a div wrapped around something",cell.tagName,"DIV");assertNotNull("The outer div is not wrapped around another element",inner);assertEquals("The palette item should have the goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.ATTRIBUTE),emojiInfo[1]);assertEquals("The palette item should have the data-goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE),emojiInfo[1]);var spriteInfo=emojiInfo[2];if(spriteInfo){var cssClass=spriteInfo.getCssClass();if(cssClass){assertEquals("DIV",inner.tagName);assertTrue("Sprite should have its CSS class set",goog.dom.classlist.contains(inner,cssClass))}else{assertEquals("DIV",inner.tagName);var img=inner.firstChild;assertNotNull("Div should be wrapping something",img);assertEquals("IMG",img.tagName);checkPathsEndWithSameFile(img.src,spriteInfo.getUrl());assertEquals(spriteInfo.getWidthCssValue(),goog.style.getStyle(inner,"width"));assertEquals(spriteInfo.getHeightCssValue(),goog.style.getStyle(inner,"height"));assertEquals(spriteInfo.getXOffsetCssValue().replace(/px/,"").replace(/pt/,""),goog.style.getStyle(img,"left").replace(/px/,"").replace(/pt/,""));assertEquals(spriteInfo.getYOffsetCssValue().replace(/px/,"").replace(/pt/,""),goog.style.getStyle(img,"top").replace(/px/,"").replace(/pt/,""))}}else{assertEquals(inner.tagName,"IMG");checkPathsEndWithSameFile(inner.src,emojiInfo[0])}}}function checkPostLoadStructureForFastLoadNonProgressivePicker(palette,emoji){for(var i=0;i<emoji[1].length;i++){palette.setSelectedIndex(i);var emojiInfo=emoji[1][i],cell=palette.getSelectedItem(),inner=cell.firstChild;assertEquals("The palette item should be a div wrapped around something",cell.tagName,"DIV");assertNotNull("The outer div is not wrapped around another element",inner);assertEquals("The palette item should have the goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.ATTRIBUTE),emojiInfo[1]);assertEquals("The palette item should have the data-goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE),emojiInfo[1]);var url=emojiInfo[0],spriteInfo=emojiInfo[2];if(spriteInfo){assertEquals(inner.tagName,"DIV");if(spriteInfo.isAnimated()){var img=new Image;img.src=url;checkPathsEndWithSameFile(goog.style.getStyle(inner,"background-image"),url);assertEquals(img.width+"",goog.style.getStyle(inner,"width").replace(/px/g,"").replace(/pt/g,""));assertEquals(img.height+"",goog.style.getStyle(inner,"height").replace(/px/g,"").replace(/pt/g,""));assertEquals("0 0",goog.style.getStyle(inner,"background-position").replace(/px/g,"").replace(/pt/g,""))}else{var cssClass=spriteInfo.getCssClass();if(cssClass){assertTrue("Sprite should have its CSS class set",goog.dom.classlist.contains(inner,cssClass))}else{checkPathsEndWithSameFile(goog.style.getStyle(inner,"background-image"),spriteInfo.getUrl());assertEquals(spriteInfo.getWidthCssValue(),goog.style.getStyle(inner,"width"));assertEquals(spriteInfo.getHeightCssValue(),goog.style.getStyle(inner,"height"));assertEquals((spriteInfo.getXOffsetCssValue()+" "+spriteInfo.getYOffsetCssValue()).replace(/px/g,"").replace(/pt/g,""),goog.style.getStyle(inner,"background-position").replace(/px/g,"").replace(/pt/g,""))}}}else{assertEquals(inner.tagName,"IMG");checkPathsEndWithSameFile(inner.src,emojiInfo[0])}}}function checkPostLoadStructureForFastLoadProgressivePicker(palette,emoji){for(var i=0;i<emoji[1].length;i++){palette.setSelectedIndex(i);var emojiInfo=emoji[1][i],cell=palette.getSelectedItem(),inner=cell.firstChild;assertEquals("The palette item should be a div wrapped around something",cell.tagName,"DIV");assertNotNull("The outer div is not wrapped around another element",inner);assertEquals("The palette item should have the goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.ATTRIBUTE),emojiInfo[1]);assertEquals("The palette item should have the data-goomoji attribute",cell.getAttribute(goog.ui.emoji.Emoji.DATA_ATTRIBUTE),emojiInfo[1]);var url=emojiInfo[0],spriteInfo=emojiInfo[2];if(spriteInfo){if(spriteInfo.isAnimated()){var testImg=new Image;testImg.src=url;var img=inner.firstChild;checkPathsEndWithSameFile(img.src,url);assertEquals(testImg.width,img.width);assertEquals(testImg.height,img.height);assertEquals("0",goog.style.getStyle(img,"left").replace(/px/g,"").replace(/pt/g,""));assertEquals("0",goog.style.getStyle(img,"top").replace(/px/g,"").replace(/pt/g,""))}else{var cssClass=spriteInfo.getCssClass();if(cssClass){assertEquals("DIV",inner.tagName);assertTrue("Sprite should have its CSS class set",goog.dom.classlist.contains(inner,cssClass))}else{assertEquals("DIV",inner.tagName);var img=inner.firstChild;assertNotNull("Div should be wrapping something",img);assertEquals("IMG",img.tagName);checkPathsEndWithSameFile(img.src,spriteInfo.getUrl());assertEquals(spriteInfo.getWidthCssValue(),goog.style.getStyle(inner,"width"));assertEquals(spriteInfo.getHeightCssValue(),goog.style.getStyle(inner,"height"));assertEquals(spriteInfo.getXOffsetCssValue().replace(/px/,"").replace(/pt/,""),goog.style.getStyle(img,"left").replace(/px/,"").replace(/pt/,""));assertEquals(spriteInfo.getYOffsetCssValue().replace(/px/,"").replace(/pt/,""),goog.style.getStyle(img,"top").replace(/px/,"").replace(/pt/,""))}}}else{assertEquals(inner.tagName,"IMG");checkPathsEndWithSameFile(inner.src,emojiInfo[0])}}}function testPreLoadCellConstructionForFastLoadingNonProgressive(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.setManualLoadOfAnimatedEmoji(!0);picker.setProgressiveRender(!1);picker.addEmojiGroup(spritedEmoji2[0],spritedEmoji2[1]);picker.render();var palette=picker.getPage(0);checkStructureForNonProgressivePicker(palette,spritedEmoji2);picker.dispose()}function testPreLoadCellConstructionForFastLoadingProgressive(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.setManualLoadOfAnimatedEmoji(!0);picker.setProgressiveRender(!0);picker.addEmojiGroup(spritedEmoji2[0],spritedEmoji2[1]);picker.render();var palette=picker.getPage(0);checkStructureForProgressivePicker(palette,spritedEmoji2);picker.dispose()}function testCellConstructionForNonProgressiveRenderingSpriting(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.addEmojiGroup(spritedEmoji1[0],spritedEmoji1[1]);picker.render();var palette=picker.getPage(0);checkStructureForNonProgressivePicker(palette,spritedEmoji1);picker.dispose()}function testCellConstructionForProgressiveRenderingSpriting(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!1);picker.setProgressiveRender(!0);picker.addEmojiGroup(spritedEmoji1[0],spritedEmoji1[1]);picker.render();var palette=picker.getPage(0);checkStructureForProgressivePicker(palette,spritedEmoji1);picker.dispose()}function testDelayedLoadPaletteCreationForMultiPagePicker(){var defaultImg="../../demos/emoji/none.gif",picker=new goog.ui.emoji.EmojiPicker(defaultImg);picker.setDelayedLoad(!0);for(var i=0;i<emojiGroups.length;i++){picker.addEmojiGroup(emojiGroups[i][0],emojiGroups[i][1])}picker.render();for(var i=0;i<emojiGroups.length;i++){checkContentIsDefaultImg(picker.getPage(i),defaultImg)}picker.loadImages();var page=picker.getPage(0);assertTrue("Page "+i+" should be in the document but is not",page.isInDocument());checkContentIsEmojiImages(page,emojiGroups[0][1],defaultImg);for(var i=1;3>i;i++){checkContentIsDefaultImg(picker.getPage(i),defaultImg)}for(var tabPane=picker.getTabPane(),i=1;3>i;i++){tabPane.setSelectedIndex(i);page=picker.getPage(i);assertTrue(page.isInDocument());checkContentIsEmojiImages(page,emojiGroups[i][1],defaultImg)}picker.dispose()}