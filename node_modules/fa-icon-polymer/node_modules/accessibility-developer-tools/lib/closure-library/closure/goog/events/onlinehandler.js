goog.provide("goog.events.OnlineHandler");goog.provide("goog.events.OnlineHandler.EventType");goog.require("goog.Timer");goog.require("goog.events.BrowserFeature");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.net.NetworkStatusMonitor");goog.events.OnlineHandler=function(){goog.events.OnlineHandler.base(this,"constructor");this.eventHandler_=new goog.events.EventHandler(this);if(!goog.events.BrowserFeature.HAS_NAVIGATOR_ONLINE_PROPERTY){return}if(goog.events.BrowserFeature.HAS_HTML5_NETWORK_EVENT_SUPPORT){var target=goog.events.BrowserFeature.HTML5_NETWORK_EVENTS_FIRE_ON_BODY?document.body:window;this.eventHandler_.listen(target,[goog.events.EventType.ONLINE,goog.events.EventType.OFFLINE],this.handleChange_)}else{this.online_=this.isOnline();this.timer_=new goog.Timer(goog.events.OnlineHandler.POLL_INTERVAL_);this.eventHandler_.listen(this.timer_,goog.Timer.TICK,this.handleTick_);this.timer_.start()}};goog.inherits(goog.events.OnlineHandler,goog.events.EventTarget);goog.events.OnlineHandler.EventType=goog.net.NetworkStatusMonitor.EventType;goog.events.OnlineHandler.POLL_INTERVAL_=250;goog.events.OnlineHandler.prototype.online_;goog.events.OnlineHandler.prototype.timer_;goog.events.OnlineHandler.prototype.isOnline=function(){return goog.events.BrowserFeature.HAS_NAVIGATOR_ONLINE_PROPERTY?navigator.onLine:!0};goog.events.OnlineHandler.prototype.handleTick_=function(){var online=this.isOnline();if(online!=this.online_){this.online_=online;this.handleChange_()}};goog.events.OnlineHandler.prototype.handleChange_=function(){var type=this.isOnline()?goog.net.NetworkStatusMonitor.EventType.ONLINE:goog.net.NetworkStatusMonitor.EventType.OFFLINE;this.dispatchEvent(type)};goog.events.OnlineHandler.prototype.disposeInternal=function(){goog.events.OnlineHandler.base(this,"disposeInternal");this.eventHandler_.dispose();this.eventHandler_=null;if(this.timer_){this.timer_.dispose();this.timer_=null}};