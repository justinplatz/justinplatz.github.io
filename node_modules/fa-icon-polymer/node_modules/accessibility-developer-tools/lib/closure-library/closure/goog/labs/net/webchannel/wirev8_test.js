goog.provide("goog.labs.net.webChannel.WireV8Test");goog.require("goog.labs.net.webChannel.WireV8");goog.require("goog.testing.jsunit");goog.setTestOnly("goog.labs.net.webChannel.WireV8Test");var wireCodec;function setUp(){wireCodec=new goog.labs.net.webChannel.WireV8}function tearDown(){}function testEncodeSimpleMessage(){var message={a:"a",b:"b"},buff=[];wireCodec.encodeMessage(message,buff,"prefix_");assertEquals(2,buff.length);assertEquals("prefix_a=a",buff[0]);assertEquals("prefix_b=b",buff[1])}function testEncodeComplexMessage(){var message={a:"a",b:{x:1,y:2}},buff=[];wireCodec.encodeMessage(message,buff,"prefix_");assertEquals(2,buff.length);assertEquals("prefix_a=a",buff[0]);assertEquals("prefix_b={\"x\":1,\"y\":2}",decodeURIComponent(buff[1]))}function testEncodeMessageQueue(){var message1={a:"a"},queuedMessage1={map:message1,mapId:3},message2={b:"b"},queuedMessage2={map:message2,mapId:4},queue=[queuedMessage1,queuedMessage2],result=wireCodec.encodeMessageQueue(queue,2,null);assertEquals("count=2&ofs=3&req0_a=a&req1_b=b",result)}function testDecodeMessage(){var message=wireCodec.decodeMessage("[{\"a\":\"a\", \"x\":1}, {\"b\":\"b\"}]");assertTrue(goog.isArray(message));assertEquals(2,message.length);assertEquals("a",message[0].a);assertEquals(1,message[0].x);assertEquals("b",message[1].b)}