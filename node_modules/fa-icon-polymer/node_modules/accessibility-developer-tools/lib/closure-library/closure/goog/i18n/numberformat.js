goog.provide("goog.i18n.NumberFormat");goog.provide("goog.i18n.NumberFormat.CurrencyStyle");goog.provide("goog.i18n.NumberFormat.Format");goog.require("goog.asserts");goog.require("goog.i18n.CompactNumberFormatSymbols");goog.require("goog.i18n.NumberFormatSymbols");goog.require("goog.i18n.currency");goog.require("goog.math");goog.i18n.NumberFormat=function(pattern,opt_currency,opt_currencyStyle){this.intlCurrencyCode_=opt_currency||goog.i18n.NumberFormatSymbols.DEF_CURRENCY_CODE;this.currencyStyle_=opt_currencyStyle||goog.i18n.NumberFormat.CurrencyStyle.LOCAL;this.maximumIntegerDigits_=40;this.minimumIntegerDigits_=1;this.significantDigits_=0;this.maximumFractionDigits_=3;this.minimumFractionDigits_=0;this.minExponentDigits_=0;this.useSignForPositiveExponent_=!1;this.showTrailingZeros_=!1;this.positivePrefix_="";this.positiveSuffix_="";this.negativePrefix_="-";this.negativeSuffix_="";this.multiplier_=1;this.negativePercentSignExpected_=!1;this.groupingArray_=[];this.decimalSeparatorAlwaysShown_=!1;this.useExponentialNotation_=!1;this.compactStyle_=goog.i18n.NumberFormat.CompactStyle.NONE;this.baseFormattingNumber_=null;this.pattern_;if("number"==typeof pattern){this.applyStandardPattern_(pattern)}else{this.applyPattern_(pattern)}};goog.i18n.NumberFormat.Format={DECIMAL:1,SCIENTIFIC:2,PERCENT:3,CURRENCY:4,COMPACT_SHORT:5,COMPACT_LONG:6};goog.i18n.NumberFormat.CurrencyStyle={LOCAL:0,PORTABLE:1,GLOBAL:2};goog.i18n.NumberFormat.CompactStyle={NONE:0,SHORT:1,LONG:2};goog.i18n.NumberFormat.enforceAsciiDigits_=!1;goog.i18n.NumberFormat.setEnforceAsciiDigits=function(doEnforce){goog.i18n.NumberFormat.enforceAsciiDigits_=doEnforce};goog.i18n.NumberFormat.isEnforceAsciiDigits=function(){return goog.i18n.NumberFormat.enforceAsciiDigits_};goog.i18n.NumberFormat.prototype.setMinimumFractionDigits=function(min){if(0<this.significantDigits_&&0<min){throw Error("Can't combine significant digits and minimum fraction digits")}this.minimumFractionDigits_=min;return this};goog.i18n.NumberFormat.prototype.setMaximumFractionDigits=function(max){this.maximumFractionDigits_=max;return this};goog.i18n.NumberFormat.prototype.setSignificantDigits=function(number){if(0<this.minimumFractionDigits_&&0<=number){throw Error("Can't combine significant digits and minimum fraction digits")}this.significantDigits_=number;return this};goog.i18n.NumberFormat.prototype.getSignificantDigits=function(){return this.significantDigits_};goog.i18n.NumberFormat.prototype.setShowTrailingZeros=function(showTrailingZeros){this.showTrailingZeros_=showTrailingZeros;return this};goog.i18n.NumberFormat.prototype.setBaseFormatting=function(baseFormattingNumber){goog.asserts.assert(goog.isNull(baseFormattingNumber)||isFinite(baseFormattingNumber));this.baseFormattingNumber_=baseFormattingNumber;return this};goog.i18n.NumberFormat.prototype.getBaseFormatting=function(){return this.baseFormattingNumber_};goog.i18n.NumberFormat.prototype.applyPattern_=function(pattern){this.pattern_=pattern.replace(/ /g,"\xA0");var pos=[0];this.positivePrefix_=this.parseAffix_(pattern,pos);var trunkStart=pos[0];this.parseTrunk_(pattern,pos);var trunkLen=pos[0]-trunkStart;this.positiveSuffix_=this.parseAffix_(pattern,pos);if(pos[0]<pattern.length&&pattern.charAt(pos[0])==goog.i18n.NumberFormat.PATTERN_SEPARATOR_){pos[0]++;if(1!=this.multiplier_)this.negativePercentSignExpected_=!0;this.negativePrefix_=this.parseAffix_(pattern,pos);pos[0]+=trunkLen;this.negativeSuffix_=this.parseAffix_(pattern,pos)}else{this.negativePrefix_=this.positivePrefix_+this.negativePrefix_;this.negativeSuffix_+=this.positiveSuffix_}};goog.i18n.NumberFormat.prototype.applyStandardPattern_=function(patternType){switch(patternType){case goog.i18n.NumberFormat.Format.DECIMAL:this.applyPattern_(goog.i18n.NumberFormatSymbols.DECIMAL_PATTERN);break;case goog.i18n.NumberFormat.Format.SCIENTIFIC:this.applyPattern_(goog.i18n.NumberFormatSymbols.SCIENTIFIC_PATTERN);break;case goog.i18n.NumberFormat.Format.PERCENT:this.applyPattern_(goog.i18n.NumberFormatSymbols.PERCENT_PATTERN);break;case goog.i18n.NumberFormat.Format.CURRENCY:this.applyPattern_(goog.i18n.currency.adjustPrecision(goog.i18n.NumberFormatSymbols.CURRENCY_PATTERN,this.intlCurrencyCode_));break;case goog.i18n.NumberFormat.Format.COMPACT_SHORT:this.applyCompactStyle_(goog.i18n.NumberFormat.CompactStyle.SHORT);break;case goog.i18n.NumberFormat.Format.COMPACT_LONG:this.applyCompactStyle_(goog.i18n.NumberFormat.CompactStyle.LONG);break;default:throw Error("Unsupported pattern type.");}};goog.i18n.NumberFormat.prototype.applyCompactStyle_=function(style){this.compactStyle_=style;this.applyPattern_(goog.i18n.NumberFormatSymbols.DECIMAL_PATTERN);this.setMinimumFractionDigits(0);this.setMaximumFractionDigits(2);this.setSignificantDigits(2)};goog.i18n.NumberFormat.prototype.parse=function(text,opt_pos){var pos=opt_pos||[0];if(this.compactStyle_!=goog.i18n.NumberFormat.CompactStyle.NONE){throw Error("Parsing of compact numbers is unimplemented")}var ret=NaN;text=text.replace(/ /g,"\xA0");var gotPositive=text.indexOf(this.positivePrefix_,pos[0])==pos[0],gotNegative=text.indexOf(this.negativePrefix_,pos[0])==pos[0];if(gotPositive&&gotNegative){if(this.positivePrefix_.length>this.negativePrefix_.length){gotNegative=!1}else if(this.positivePrefix_.length<this.negativePrefix_.length){gotPositive=!1}}if(gotPositive){pos[0]+=this.positivePrefix_.length}else if(gotNegative){pos[0]+=this.negativePrefix_.length}if(text.indexOf(goog.i18n.NumberFormatSymbols.INFINITY,pos[0])==pos[0]){pos[0]+=goog.i18n.NumberFormatSymbols.INFINITY.length;ret=1/0}else{ret=this.parseNumber_(text,pos)}if(gotPositive){if(!(text.indexOf(this.positiveSuffix_,pos[0])==pos[0])){return NaN}pos[0]+=this.positiveSuffix_.length}else if(gotNegative){if(!(text.indexOf(this.negativeSuffix_,pos[0])==pos[0])){return NaN}pos[0]+=this.negativeSuffix_.length}return gotNegative?-ret:ret};goog.i18n.NumberFormat.prototype.parseNumber_=function(text,pos){var sawDecimal=!1,sawExponent=!1,sawDigit=!1,scale=1,decimal=goog.i18n.NumberFormatSymbols.DECIMAL_SEP,grouping=goog.i18n.NumberFormatSymbols.GROUP_SEP,exponentChar=goog.i18n.NumberFormatSymbols.EXP_SYMBOL;if(this.compactStyle_!=goog.i18n.NumberFormat.CompactStyle.NONE){throw Error("Parsing of compact style numbers is not implemented")}var normalizedText="";for(;pos[0]<text.length;pos[0]++){var ch=text.charAt(pos[0]),digit=this.getDigit_(ch);if(0<=digit&&9>=digit){normalizedText+=digit;sawDigit=!0}else if(ch==decimal.charAt(0)){if(sawDecimal||sawExponent){break}normalizedText+=".";sawDecimal=!0}else if(ch==grouping.charAt(0)&&("\xA0"!=grouping.charAt(0)||pos[0]+1<text.length&&0<=this.getDigit_(text.charAt(pos[0]+1)))){if(sawDecimal||sawExponent){break}continue}else if(ch==exponentChar.charAt(0)){if(sawExponent){break}normalizedText+="E";sawExponent=!0}else if("+"==ch||"-"==ch){normalizedText+=ch}else if(1==this.multiplier_&&ch==goog.i18n.NumberFormatSymbols.PERCENT.charAt(0)){if(1!=scale){break}scale=100;if(sawDigit){pos[0]++;break}}else if(1==this.multiplier_&&ch==goog.i18n.NumberFormatSymbols.PERMILL.charAt(0)){if(1!=scale){break}scale=1e3;if(sawDigit){pos[0]++;break}}else{break}}if(1!=this.multiplier_){scale=this.multiplier_}return parseFloat(normalizedText)/scale};goog.i18n.NumberFormat.prototype.format=function(number){if(isNaN(number)){return goog.i18n.NumberFormatSymbols.NAN}var parts=[],baseFormattingNumber=goog.isNull(this.baseFormattingNumber_)?number:this.baseFormattingNumber_,unit=this.getUnitAfterRounding_(baseFormattingNumber,number);number/=Math.pow(10,unit.divisorBase);parts.push(unit.prefix);var isNegative=0>number||0==number&&0>1/number;parts.push(isNegative?this.negativePrefix_:this.positivePrefix_);if(!isFinite(number)){parts.push(goog.i18n.NumberFormatSymbols.INFINITY)}else{number*=isNegative?-1:1;number*=this.multiplier_;this.useExponentialNotation_?this.subformatExponential_(number,parts):this.subformatFixed_(number,this.minimumIntegerDigits_,parts)}parts.push(isNegative?this.negativeSuffix_:this.positiveSuffix_);parts.push(unit.suffix);return parts.join("")};goog.i18n.NumberFormat.prototype.roundNumber_=function(number){var _Mathfloor=Math.floor,_Mathround=Math.round,power=Math.pow(10,this.maximumFractionDigits_),shiftedNumber=0>=this.significantDigits_?_Mathround(number*power):_Mathround(this.roundToSignificantDigits_(number*power,this.significantDigits_,this.maximumFractionDigits_)),intValue,fracValue;if(isFinite(shiftedNumber)){intValue=_Mathfloor(shiftedNumber/power);fracValue=_Mathfloor(shiftedNumber-intValue*power)}else{intValue=number;fracValue=0}return{intValue:intValue,fracValue:fracValue}};goog.i18n.NumberFormat.formatNumberGroupingRepeatingDigitsParts_=function(parts,zeroCode,intPart,groupingArray,repeatedDigitLen){for(var nonRepeatedGroupCompleteCount=0,currentGroupSizeIndex=0,currentGroupSize=0,grouping=goog.i18n.NumberFormatSymbols.GROUP_SEP,digitLen=intPart.length,i=0;i<digitLen;i++){parts.push(String.fromCharCode(zeroCode+1*+intPart.charAt(i)));if(1<digitLen-i){currentGroupSize=groupingArray[currentGroupSizeIndex];if(i<repeatedDigitLen){var repeatedDigitIndex=repeatedDigitLen-i;if(1===currentGroupSize||0<currentGroupSize&&1===repeatedDigitIndex%currentGroupSize){parts.push(grouping)}}else if(currentGroupSizeIndex<groupingArray.length){if(i===repeatedDigitLen){currentGroupSizeIndex+=1}else if(currentGroupSize===i-repeatedDigitLen-nonRepeatedGroupCompleteCount+1){parts.push(grouping);nonRepeatedGroupCompleteCount+=currentGroupSize;currentGroupSizeIndex+=1}}}}return parts};goog.i18n.NumberFormat.formatNumberGroupingNonRepeatingDigitsParts_=function(parts,zeroCode,intPart,groupingArray){var grouping=goog.i18n.NumberFormatSymbols.GROUP_SEP,currentGroupSizeIndex,currentGroupSize=0,digitLenLeft=intPart.length,rightToLeftParts=[];for(currentGroupSizeIndex=groupingArray.length-1;0<=currentGroupSizeIndex&&0<digitLenLeft;currentGroupSizeIndex--){currentGroupSize=groupingArray[currentGroupSizeIndex];for(var rightDigitIndex=0;rightDigitIndex<currentGroupSize&&0<=digitLenLeft-rightDigitIndex-1;rightDigitIndex++){rightToLeftParts.push(String.fromCharCode(zeroCode+1*+intPart.charAt(digitLenLeft-rightDigitIndex-1)))}digitLenLeft-=currentGroupSize;if(0<digitLenLeft){rightToLeftParts.push(grouping)}}parts.push.apply(parts,rightToLeftParts.reverse());return parts};goog.i18n.NumberFormat.prototype.subformatFixed_=function(number,minIntDigits,parts){var _StringfromCharCode=String.fromCharCode;if(this.minimumFractionDigits_>this.maximumFractionDigits_){throw Error("Min value must be less than max value")}if(!parts){parts=[]}var rounded=this.roundNumber_(number),power=Math.pow(10,this.maximumFractionDigits_),intValue=rounded.intValue,fracValue=rounded.fracValue,numIntDigits=0==intValue?0:this.intLog10_(intValue)+1,fractionPresent=0<this.minimumFractionDigits_||0<fracValue||this.showTrailingZeros_&&numIntDigits<this.significantDigits_,minimumFractionDigits=this.minimumFractionDigits_;if(fractionPresent){if(this.showTrailingZeros_&&0<this.significantDigits_){minimumFractionDigits=this.significantDigits_-numIntDigits}else{minimumFractionDigits=this.minimumFractionDigits_}}var intPart="",translatableInt=intValue;while(1E20<translatableInt){intPart="0"+intPart;translatableInt=Math.round(translatableInt/10)}intPart=translatableInt+intPart;var decimal=goog.i18n.NumberFormatSymbols.DECIMAL_SEP,zeroCode=goog.i18n.NumberFormat.enforceAsciiDigits_?48:goog.i18n.NumberFormatSymbols.ZERO_DIGIT.charCodeAt(0),digitLen=intPart.length,nonRepeatedGroupCount=0;if(0<intValue||0<minIntDigits){for(var i=digitLen;i<minIntDigits;i++){parts.push(_StringfromCharCode(zeroCode))}if(2<=this.groupingArray_.length){for(var j=1;j<this.groupingArray_.length;j++){nonRepeatedGroupCount+=this.groupingArray_[j]}}var repeatedDigitLen=digitLen-nonRepeatedGroupCount;if(0<repeatedDigitLen){parts=goog.i18n.NumberFormat.formatNumberGroupingRepeatingDigitsParts_(parts,zeroCode,intPart,this.groupingArray_,repeatedDigitLen)}else{parts=goog.i18n.NumberFormat.formatNumberGroupingNonRepeatingDigitsParts_(parts,zeroCode,intPart,this.groupingArray_)}}else if(!fractionPresent){parts.push(_StringfromCharCode(zeroCode))}if(this.decimalSeparatorAlwaysShown_||fractionPresent){parts.push(decimal)}var fracPart=""+(fracValue+power),fracLen=fracPart.length;while("0"==fracPart.charAt(fracLen-1)&&fracLen>minimumFractionDigits+1){fracLen--}for(var i=1;i<fracLen;i++){parts.push(_StringfromCharCode(zeroCode+1*+fracPart.charAt(i)))}};goog.i18n.NumberFormat.prototype.addExponentPart_=function(exponent,parts){parts.push(goog.i18n.NumberFormatSymbols.EXP_SYMBOL);if(0>exponent){exponent=-exponent;parts.push(goog.i18n.NumberFormatSymbols.MINUS_SIGN)}else if(this.useSignForPositiveExponent_){parts.push(goog.i18n.NumberFormatSymbols.PLUS_SIGN)}for(var exponentDigits=""+exponent,zeroChar=goog.i18n.NumberFormat.enforceAsciiDigits_?"0":goog.i18n.NumberFormatSymbols.ZERO_DIGIT,i=exponentDigits.length;i<this.minExponentDigits_;i++){parts.push(zeroChar)}parts.push(exponentDigits)};goog.i18n.NumberFormat.prototype.getMantissa_=function(value,exponent){var _Mathpow=Math.pow,divisor=_Mathpow(10,exponent);if(isFinite(divisor)&&0!==divisor){return value/divisor}else{divisor=_Mathpow(10,Math.floor(exponent/2));var result=value/divisor/divisor;if(1==exponent%2){if(0<exponent){result/=10}else{result*=10}}return result}};goog.i18n.NumberFormat.prototype.subformatExponential_=function(number,parts){if(0==number){this.subformatFixed_(number,this.minimumIntegerDigits_,parts);this.addExponentPart_(0,parts);return}var exponent=goog.math.safeFloor(Math.log(number)/2.302585092994046);number=this.getMantissa_(number,exponent);var minIntDigits=this.minimumIntegerDigits_;if(1<this.maximumIntegerDigits_&&this.maximumIntegerDigits_>this.minimumIntegerDigits_){while(0!=exponent%this.maximumIntegerDigits_){number*=10;exponent--}minIntDigits=1}else{if(1>this.minimumIntegerDigits_){exponent++;number/=10}else{exponent-=this.minimumIntegerDigits_-1;number*=Math.pow(10,this.minimumIntegerDigits_-1)}}this.subformatFixed_(number,minIntDigits,parts);this.addExponentPart_(exponent,parts)};goog.i18n.NumberFormat.prototype.getDigit_=function(ch){var code=ch.charCodeAt(0);if(48<=code&&58>code){return code-48}else{var zeroCode=goog.i18n.NumberFormatSymbols.ZERO_DIGIT.charCodeAt(0);return zeroCode<=code&&code<zeroCode+10?code-zeroCode:-1}};goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_="0";goog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_=",";goog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_=".";goog.i18n.NumberFormat.PATTERN_PER_MILLE_="\u2030";goog.i18n.NumberFormat.PATTERN_PERCENT_="%";goog.i18n.NumberFormat.PATTERN_DIGIT_="#";goog.i18n.NumberFormat.PATTERN_SEPARATOR_=";";goog.i18n.NumberFormat.PATTERN_EXPONENT_="E";goog.i18n.NumberFormat.PATTERN_PLUS_="+";goog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_="\xA4";goog.i18n.NumberFormat.QUOTE_="'";goog.i18n.NumberFormat.prototype.parseAffix_=function(pattern,pos){var affix="",inQuote=!1,len=pattern.length;for(;pos[0]<len;pos[0]++){var ch=pattern.charAt(pos[0]);if(ch==goog.i18n.NumberFormat.QUOTE_){if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==goog.i18n.NumberFormat.QUOTE_){pos[0]++;affix+="'"}else{inQuote=!inQuote}continue}if(inQuote){affix+=ch}else{switch(ch){case goog.i18n.NumberFormat.PATTERN_DIGIT_:case goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:case goog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:case goog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:case goog.i18n.NumberFormat.PATTERN_SEPARATOR_:return affix;case goog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_:if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==goog.i18n.NumberFormat.PATTERN_CURRENCY_SIGN_){pos[0]++;affix+=this.intlCurrencyCode_}else{switch(this.currencyStyle_){case goog.i18n.NumberFormat.CurrencyStyle.LOCAL:affix+=goog.i18n.currency.getLocalCurrencySign(this.intlCurrencyCode_);break;case goog.i18n.NumberFormat.CurrencyStyle.GLOBAL:affix+=goog.i18n.currency.getGlobalCurrencySign(this.intlCurrencyCode_);break;case goog.i18n.NumberFormat.CurrencyStyle.PORTABLE:affix+=goog.i18n.currency.getPortableCurrencySign(this.intlCurrencyCode_);break;default:break;}}break;case goog.i18n.NumberFormat.PATTERN_PERCENT_:if(!this.negativePercentSignExpected_&&1!=this.multiplier_){throw Error("Too many percent/permill")}else if(this.negativePercentSignExpected_&&100!=this.multiplier_){throw Error("Inconsistent use of percent/permill characters")}this.multiplier_=100;this.negativePercentSignExpected_=!1;affix+=goog.i18n.NumberFormatSymbols.PERCENT;break;case goog.i18n.NumberFormat.PATTERN_PER_MILLE_:if(!this.negativePercentSignExpected_&&1!=this.multiplier_){throw Error("Too many percent/permill")}else if(this.negativePercentSignExpected_&&1e3!=this.multiplier_){throw Error("Inconsistent use of percent/permill characters")}this.multiplier_=1e3;this.negativePercentSignExpected_=!1;affix+=goog.i18n.NumberFormatSymbols.PERMILL;break;default:affix+=ch;}}}return affix};goog.i18n.NumberFormat.prototype.parseTrunk_=function(pattern,pos){for(var decimalPos=-1,digitLeftCount=0,zeroDigitCount=0,digitRightCount=0,groupingCount=-1,len=pattern.length,loop=!0,ch;pos[0]<len&&loop;pos[0]++){ch=pattern.charAt(pos[0]);switch(ch){case goog.i18n.NumberFormat.PATTERN_DIGIT_:if(0<zeroDigitCount){digitRightCount++}else{digitLeftCount++}if(0<=groupingCount&&0>decimalPos){groupingCount++}break;case goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_:if(0<digitRightCount){throw Error("Unexpected \"0\" in pattern \""+pattern+"\"")}zeroDigitCount++;if(0<=groupingCount&&0>decimalPos){groupingCount++}break;case goog.i18n.NumberFormat.PATTERN_GROUPING_SEPARATOR_:if(0<groupingCount){this.groupingArray_.push(groupingCount)}groupingCount=0;break;case goog.i18n.NumberFormat.PATTERN_DECIMAL_SEPARATOR_:if(0<=decimalPos){throw Error("Multiple decimal separators in pattern \""+pattern+"\"")}decimalPos=digitLeftCount+zeroDigitCount+digitRightCount;break;case goog.i18n.NumberFormat.PATTERN_EXPONENT_:if(this.useExponentialNotation_){throw Error("Multiple exponential symbols in pattern \""+pattern+"\"")}this.useExponentialNotation_=!0;this.minExponentDigits_=0;if(pos[0]+1<len&&pattern.charAt(pos[0]+1)==goog.i18n.NumberFormat.PATTERN_PLUS_){pos[0]++;this.useSignForPositiveExponent_=!0}while(pos[0]+1<len&&pattern.charAt(pos[0]+1)==goog.i18n.NumberFormat.PATTERN_ZERO_DIGIT_){pos[0]++;this.minExponentDigits_++}if(1>digitLeftCount+zeroDigitCount||1>this.minExponentDigits_){throw Error("Malformed exponential pattern \""+pattern+"\"")}loop=!1;break;default:pos[0]--;loop=!1;break;}}if(0==zeroDigitCount&&0<digitLeftCount&&0<=decimalPos){var n=decimalPos;if(0==n){n++}digitRightCount=digitLeftCount-n;digitLeftCount=n-1;zeroDigitCount=1}if(0>decimalPos&&0<digitRightCount||0<=decimalPos&&(decimalPos<digitLeftCount||decimalPos>digitLeftCount+zeroDigitCount)||0==groupingCount){throw Error("Malformed pattern \""+pattern+"\"")}var totalDigits=digitLeftCount+zeroDigitCount+digitRightCount;this.maximumFractionDigits_=0<=decimalPos?totalDigits-decimalPos:0;if(0<=decimalPos){this.minimumFractionDigits_=digitLeftCount+zeroDigitCount-decimalPos;if(0>this.minimumFractionDigits_){this.minimumFractionDigits_=0}}var effectiveDecimalPos=0<=decimalPos?decimalPos:totalDigits;this.minimumIntegerDigits_=effectiveDecimalPos-digitLeftCount;if(this.useExponentialNotation_){this.maximumIntegerDigits_=digitLeftCount+this.minimumIntegerDigits_;if(0==this.maximumFractionDigits_&&0==this.minimumIntegerDigits_){this.minimumIntegerDigits_=1}}this.groupingArray_.push(Math.max(0,groupingCount));this.decimalSeparatorAlwaysShown_=0==decimalPos||decimalPos==totalDigits};goog.i18n.NumberFormat.CompactNumberUnit;goog.i18n.NumberFormat.NULL_UNIT_={prefix:"",suffix:"",divisorBase:0};goog.i18n.NumberFormat.prototype.getUnitFor_=function(base,plurality){var _Mathpow2=Math.pow,table=this.compactStyle_==goog.i18n.NumberFormat.CompactStyle.SHORT?goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_SHORT_PATTERN:goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_LONG_PATTERN;if(!goog.isDefAndNotNull(table)){table=goog.i18n.CompactNumberFormatSymbols.COMPACT_DECIMAL_SHORT_PATTERN}if(3>base){return goog.i18n.NumberFormat.NULL_UNIT_}else{base=Math.min(14,base);var patterns=table[_Mathpow2(10,base)],previousNonNullBase=base-1;while(!patterns&&3<=previousNonNullBase){patterns=table[_Mathpow2(10,previousNonNullBase)];previousNonNullBase--}if(!patterns){return goog.i18n.NumberFormat.NULL_UNIT_}var pattern=patterns[plurality];if(!pattern||"0"==pattern){return goog.i18n.NumberFormat.NULL_UNIT_}var parts=/([^0]*)(0+)(.*)/.exec(pattern);if(!parts){return goog.i18n.NumberFormat.NULL_UNIT_}return{prefix:parts[1],suffix:parts[3],divisorBase:previousNonNullBase+1-(parts[2].length-1)}}};goog.i18n.NumberFormat.prototype.getUnitAfterRounding_=function(formattingNumber,pluralityNumber){var _Mathabs=Math.abs,_Mathpow3=Math.pow;if(this.compactStyle_==goog.i18n.NumberFormat.CompactStyle.NONE){return goog.i18n.NumberFormat.NULL_UNIT_}formattingNumber=_Mathabs(formattingNumber);pluralityNumber=_Mathabs(pluralityNumber);var initialPlurality=this.pluralForm_(formattingNumber),base=1>=formattingNumber?0:this.intLog10_(formattingNumber),initialDivisor=this.getUnitFor_(base,initialPlurality).divisorBase,pluralityAttempt=pluralityNumber/_Mathpow3(10,initialDivisor),pluralityRounded=this.roundNumber_(pluralityAttempt),formattingAttempt=formattingNumber/_Mathpow3(10,initialDivisor),formattingRounded=this.roundNumber_(formattingAttempt),finalPlurality=this.pluralForm_(pluralityRounded.intValue+pluralityRounded.fracValue);return this.getUnitFor_(initialDivisor+this.intLog10_(formattingRounded.intValue),finalPlurality)};goog.i18n.NumberFormat.prototype.intLog10_=function(number){var i=0;while(1<=(number/=10))i++;return i};goog.i18n.NumberFormat.prototype.roundToSignificantDigits_=function(number,significantDigits,scale){var _Mathround2=Math.round,_Mathpow4=Math.pow;if(!number)return number;var digits=this.intLog10_(number),magnitude=significantDigits-digits-1;if(magnitude<-scale){var point=_Mathpow4(10,scale);return _Mathround2(number/point)*point}var power=_Mathpow4(10,magnitude),shifted=_Mathround2(number*power);return shifted/power};goog.i18n.NumberFormat.prototype.pluralForm_=function(quantity){return"other"};goog.i18n.NumberFormat.prototype.isCurrencyCodeBeforeValue=function(){var posCurrSymbol=this.pattern_.indexOf("\xA4"),posPound=this.pattern_.indexOf("#"),posZero=this.pattern_.indexOf("0"),posCurrValue=Number.MAX_VALUE;if(0<=posPound&&posPound<posCurrValue){posCurrValue=posPound}if(0<=posZero&&posZero<posCurrValue){posCurrValue=posZero}return posCurrSymbol<posCurrValue};