goog.provide("goog.net.streams.Base64StreamDecoderTest");goog.setTestOnly("goog.net.streams.Base64StreamDecoderTest");goog.require("goog.net.streams.Base64StreamDecoder");goog.require("goog.testing.asserts");goog.require("goog.testing.jsunit");var tests=["","","f","Zg==","fo","Zm8=","foo","Zm9v","foob","Zm9vYg==","fooba","Zm9vYmE=","foobar","Zm9vYmFy","foobar","  Zm  9v \t Ym \n Fy  ","\xFB\xFF\xBFM","+/+/TQ==","\xFB\xFF\xBFM","-_-_TQ..","\xE4\xB8\x80\xE4\xBA\x8C\xE4\xB8\x89\xE5\x9B\x9B\xE4\xBA\x94\xE5"+"\x85\xAD\xE4\xB8\x83\xE5\x85\xAB\xE4\xB9\x9D\xE5\x8D\x81","5LiA5LqM5LiJ5Zub5LqU5YWt5LiD5YWr5Lmd5Y2B"];function stringCodes(s){codes=[];for(var i=0;i<s.length;i++){codes.push(s.charCodeAt(i))}return codes}function testSingleMessage(){for(var decoder=new goog.net.streams.Base64StreamDecoder,i=0,decoded;i<tests.length;i+=2){decoded=decoder.decode(tests[i+1]);if(tests[i]){assertElementsEquals(stringCodes(tests[i]),decoded)}else{assertNull(decoded)}}}function testBadMessage(){var decoder=new goog.net.streams.Base64StreamDecoder;assertThrows(function(){decoder.decode("badchar!")});assertFalse(decoder.isInputValid());assertThrows(function(){decoder.decode("abc")});assertFalse(decoder.isInputValid())}function testMessagesInChunks(){var decoder=new goog.net.streams.Base64StreamDecoder;assertNull(decoder.decode("Zm"));assertNull(decoder.decode("9"));assertElementsEquals(stringCodes("foobar"),decoder.decode("vYmFyZm"));assertElementsEquals(stringCodes("foo"),decoder.decode("9v"));assertElementsEquals(stringCodes("barfoo"),decoder.decode("YmFyZm9v"));assertTrue(decoder.isInputValid())}