goog.provide("goog.ui.SelectionModelTest");goog.setTestOnly("goog.ui.SelectionModelTest");goog.require("goog.array");goog.require("goog.testing.jsunit");goog.require("goog.testing.recordFunction");goog.require("goog.ui.SelectionModel");var selectionModel,items,addedItem,addedItems;function setUp(){items=[1,2,3,4];addedItem=5;addedItems=[6,7,8];selectionModel=new goog.ui.SelectionModel(items)}function tearDown(){goog.dispose(selectionModel)}function testGetItemCount(){assertEquals(items.length,selectionModel.getItemCount())}function testGetFirst(){assertEquals(items[0],selectionModel.getFirst())}function testGetLast(){assertEquals(items[items.length-1],selectionModel.getLast())}function testGetItemAt(){goog.array.forEach(items,function(item,i){assertEquals(item,selectionModel.getItemAt(i))})}function testAddItem(){assertEquals(items.length,selectionModel.getItemCount());selectionModel.addItem(addedItem);assertEquals(items.length+1,selectionModel.getItemCount());assertEquals(addedItem,selectionModel.getLast())}function testAddItemAt(){assertEquals(items.length,selectionModel.getItemCount());var insertIndex=2;assertEquals(items[insertIndex],selectionModel.getItemAt(insertIndex));selectionModel.addItemAt(addedItem,insertIndex);var resultArray=goog.array.clone(items);goog.array.insertAt(resultArray,addedItem,insertIndex);assertEquals(items.length+1,selectionModel.getItemCount());assertEquals(addedItem,selectionModel.getItemAt(insertIndex));assertArrayEquals(resultArray,selectionModel.getItems())}function testAddItems(){assertEquals(items.length,selectionModel.getItemCount());selectionModel.addItems(addedItems);assertEquals(items.length+addedItems.length,selectionModel.getItemCount());var resultArray=goog.array.concat(items,addedItems);assertArrayEquals(resultArray,selectionModel.getItems())}function testClear(){assertArrayEquals(items,selectionModel.getItems());selectionModel.clear();assertArrayEquals([],selectionModel.getItems())}function testGetItems(){assertArrayEquals(items,selectionModel.getItems())}function testIndexOfItem(){goog.array.forEach(items,function(item,i){assertEquals(i,selectionModel.indexOfItem(item))})}function testRemoveItem(){assertEquals(items.length,selectionModel.getItemCount());var resultArray=goog.array.clone(items);goog.array.removeAt(resultArray,2);selectionModel.removeItem(items[2]);assertEquals(items.length-1,selectionModel.getItemCount());assertArrayEquals(resultArray,selectionModel.getItems())}function testRemoveItemAt(){assertEquals(items.length,selectionModel.getItemCount());var resultArray=goog.array.clone(items),removeIndex=2;goog.array.removeAt(resultArray,removeIndex);selectionModel.removeItemAt(removeIndex);assertEquals(items.length-1,selectionModel.getItemCount());assertNotEquals(items[removeIndex],selectionModel.getItemAt(removeIndex));assertArrayEquals(resultArray,selectionModel.getItems())}function testSelectedIndex(){assertEquals(-1,selectionModel.getSelectedIndex());selectionModel.setSelectedIndex(2);assertEquals(2,selectionModel.getSelectedIndex());assertEquals(items[2],selectionModel.getSelectedItem())}function testSelectedItem(){assertNull(selectionModel.getSelectedItem());selectionModel.setSelectedItem(items[1]);assertNotNull(selectionModel.getSelectedItem());assertEquals(items[1],selectionModel.getSelectedItem());assertEquals(1,selectionModel.getSelectedIndex())}function testSelectionHandler(){var myRecordFunction=new goog.testing.recordFunction;selectionModel.setSelectionHandler(myRecordFunction);selectionModel.setSelectedIndex(2);selectionModel.setSelectedIndex(3);var recordCalls=myRecordFunction.getCalls();assertEquals(3,recordCalls.length);assertArrayEquals([items[2],!0],recordCalls[0].getArguments());assertArrayEquals([items[2],!1],recordCalls[1].getArguments());assertArrayEquals([items[3],!0],recordCalls[2].getArguments())}