goog.provide("goog.math.ExponentialBackoff");goog.require("goog.asserts");goog.math.ExponentialBackoff=function(initialValue,maxValue,opt_randomFactor,opt_backoffFactor,opt_decayFactor){goog.asserts.assert(0<initialValue,"Initial value must be greater than zero.");goog.asserts.assert(maxValue>=initialValue,"Max value should be at least as large as initial value.");if(goog.isDef(opt_randomFactor)){goog.asserts.assert(0<=opt_randomFactor&&1>=opt_randomFactor,"Randomness factor should be between 0 and 1.")}if(goog.isDef(opt_backoffFactor)){goog.asserts.assert(1<opt_backoffFactor,"Backoff factor should be greater than 1")}if(goog.isDef(opt_decayFactor)){goog.asserts.assert(1<=opt_decayFactor,"Decay factor should be greater than 1")}this.initialValue_=initialValue;this.maxValue_=maxValue;this.currValue_=initialValue;this.currBaseValue_=initialValue;this.randomFactor_=opt_randomFactor||0;this.backoffFactor_=opt_backoffFactor||2;this.decayFactor_=opt_decayFactor||2};goog.math.ExponentialBackoff.prototype.currBackoffCount_=0;goog.math.ExponentialBackoff.prototype.currDecayCount_=0;goog.math.ExponentialBackoff.prototype.reset=function(){this.currValue_=this.initialValue_;this.currBaseValue_=this.initialValue_;this.currBackoffCount_=0;this.currDecayCount_=0};goog.math.ExponentialBackoff.prototype.getValue=function(){return this.currValue_};goog.math.ExponentialBackoff.prototype.getBackoffCount=function(){return this.currBackoffCount_};goog.math.ExponentialBackoff.prototype.getDecayCount=function(){return this.currDecayCount_};goog.math.ExponentialBackoff.prototype.backoff=function(){var _Mathmin=Math.min;this.currBaseValue_=_Mathmin(this.maxValue_,this.currBaseValue_*this.backoffFactor_);var randomWait=this.randomFactor_?Math.round(2*(this.randomFactor_*(Math.random()-.5))*this.currBaseValue_):0;this.currValue_=_Mathmin(this.maxValue_,this.currBaseValue_+randomWait);this.currBackoffCount_++};goog.math.ExponentialBackoff.prototype.decay=function(){var _Mathmax=Math.max;this.currBaseValue_=_Mathmax(this.initialValue_,this.currBaseValue_/this.decayFactor_);var randomWait=this.randomFactor_?Math.round(2*(this.randomFactor_*(Math.random()-.5))*this.currBaseValue_):0;this.currValue_=_Mathmax(this.initialValue_,this.currBaseValue_+randomWait);this.currDecayCount_++};