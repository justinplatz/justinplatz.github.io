goog.provide("goog.debug.DevCssTest");goog.setTestOnly("goog.debug.DevCssTest");goog.require("goog.debug.DevCss");goog.require("goog.style");goog.require("goog.testing.jsunit");var el;function setUpPage(){el=document.getElementById("devcss-test-2")}function spaceless(foo){return foo.replace(/\s/g,"")}function testGetIe6CombinedSelectorText(){var devcssInstance=new goog.debug.DevCss;devcssInstance.ie6CombinedMatches_=[];var css=".class2 { -goog-ie6-selector:\".class1_class2\"; prop: val; }",newCss=devcssInstance.getIe6CombinedSelectorText_(css);assertEquals(".class1_class2",newCss);assertArrayEquals(["class1","class2"],devcssInstance.ie6CombinedMatches_[0].classNames);assertEquals("class1_class2",devcssInstance.ie6CombinedMatches_[0].combinedClassName);devcssInstance=new goog.debug.DevCss;devcssInstance.ie6CombinedMatches_=[];css=".class3 { prop: val; -goog-ie6-selector:\".class1_class2_class3\";"+"prop: val; }";newCss=devcssInstance.getIe6CombinedSelectorText_(css);assertEquals(".class1_class2_class3",newCss);assertArrayEquals(["class1","class2","class3"],devcssInstance.ie6CombinedMatches_[0].classNames);assertEquals("class1_class2_class3",devcssInstance.ie6CombinedMatches_[0].combinedClassName);devcssInstance=new goog.debug.DevCss;devcssInstance.ie6CombinedMatches_=[];css=".class3, .class5 {"+"-goog-ie6-selector:\".class1_class2_class3, .class4_class5\";"+"prop: val; }";newCss=devcssInstance.getIe6CombinedSelectorText_(css);assertEquals(".class1_class2_class3, .class4_class5",newCss);assertArrayEquals(["class1","class2","class3"],devcssInstance.ie6CombinedMatches_[0].classNames);assertEquals("class1_class2_class3",devcssInstance.ie6CombinedMatches_[0].combinedClassName);assertArrayEquals(["class4","class5"],devcssInstance.ie6CombinedMatches_[1].classNames);assertEquals("class4_class5",devcssInstance.ie6CombinedMatches_[1].combinedClassName)}function testAddIe6CombinedClassNames(){var el_combined1=document.getElementById("devcss-test-combined1"),el_combined2=document.getElementById("devcss-test-combined2"),el_notcombined1=document.getElementById("devcss-test-notcombined1"),el_notcombined2=document.getElementById("devcss-test-notcombined2"),el_notcombined3=document.getElementById("devcss-test-notcombined3"),devcssInstance=new goog.debug.DevCss;devcssInstance.ie6CombinedMatches_=[{classNames:["ie6-2","ie6-1"],combinedClassName:"ie6-1_ie6-2",els:[]},{classNames:["ie6-2","ie6-3","ie6-1"],combinedClassName:"ie6-1_ie6-2_ie6-3",els:[]}];devcssInstance.addIe6CombinedClassNames_();assertEquals(-1,el_notcombined1.className.indexOf("ie6-1_ie6-2"));assertEquals(-1,el_notcombined2.className.indexOf("ie6-1_ie6-2"));assertEquals(-1,el_notcombined3.className.indexOf("ie6-1_ie6-2_ie6-3"));assertTrue(-1!=el_combined1.className.indexOf("ie6-1_ie6-2"));assertTrue(-1!=el_combined2.className.indexOf("ie6-1_ie6-2_ie6-3"))}function testActivateBrowserSpecificCssALL(){var devcssInstance=new goog.debug.DevCss("GECKO");devcssInstance.activateBrowserSpecificCssRules(!1);var backgroundColor=goog.style.getBackgroundColor(el);assertEquals("rgb(255,192,203)",spaceless(backgroundColor));var elGeckoOne=document.getElementById("devcss-gecko-1");backgroundColor=goog.style.getBackgroundColor(elGeckoOne);assertEquals("rgb(255,192,203)",spaceless(backgroundColor));var elGeckoTwo=document.getElementById("devcss-gecko-2");backgroundColor=goog.style.getBackgroundColor(elGeckoTwo);assertEquals("rgb(255,192,203)",spaceless(backgroundColor))}function testActivateBrowserSpecificCssWithVersion(){var devcssInstance=new goog.debug.DevCss("IE","6");devcssInstance.activateBrowserSpecificCssRules(!1);var elIe6=document.getElementById("devcss-test-ie6"),backgroundColor=goog.style.getBackgroundColor(elIe6);assertEquals("rgb(255,192,203)",spaceless(backgroundColor));var devCssInstanceTwo=new goog.debug.DevCss("IE","8");devCssInstanceTwo.activateBrowserSpecificCssRules(!1);var elIe8One=document.getElementById("devcss-ie8-1");backgroundColor=goog.style.getBackgroundColor(elIe8One);assertEquals("rgb(255,192,203)",spaceless(backgroundColor));var elIe8Two=document.getElementById("devcss-ie8-2");backgroundColor=goog.style.getBackgroundColor(elIe8Two);assertEquals("rgb(255,192,203)",spaceless(backgroundColor))}function testActivateBrowserSpecificCssGteInvalid(){var marginBox=goog.style.getMarginBox(el);assertEquals(1,marginBox.top);var devcssInstance=new goog.debug.DevCss("WEBKIT",254);devcssInstance.activateBrowserSpecificCssRules(!1);var marginBox=goog.style.getMarginBox(el);assertEquals(1,marginBox.top)}function testActivateBrowserSpecificCssGteValid(){var devcssInstance=new goog.debug.DevCss("WEBKIT",255);devcssInstance.activateBrowserSpecificCssRules(!1);var marginBox=goog.style.getMarginBox(el);assertEquals(20,marginBox.top)}function testActivateBrowserSpecificCssLteInvalid(){var marginBox=goog.style.getMarginBox(el);assertEquals(1,marginBox.left);var devcssInstance=new goog.debug.DevCss("WEBKIT",202);devcssInstance.activateBrowserSpecificCssRules(!1);var marginBox=goog.style.getMarginBox(el);assertEquals(1,marginBox.left)}function testActivateBrowserSpecificCssLteValid(){var devcssInstance=new goog.debug.DevCss("WEBKIT",199);devcssInstance.activateBrowserSpecificCssRules(!1);var marginBox=goog.style.getMarginBox(el);assertEquals(15,marginBox.left)}function testReplaceIe6Selectors(){var devcssInstance=new goog.debug.DevCss("IE",6);devcssInstance.activateBrowserSpecificCssRules(!1);var compound2El=document.getElementById("devcss-test-compound2"),backgroundColor=spaceless(goog.style.getBackgroundColor(compound2El));assertTrue("Unexpected background color: "+backgroundColor,"transparent"==backgroundColor||"rgba(0,0,0,0)"==backgroundColor);backgroundColor=goog.style.getBackgroundColor(document.getElementById("devcss-test-compound1-2"));assertEquals("rgb(255,192,203)",spaceless(backgroundColor))}