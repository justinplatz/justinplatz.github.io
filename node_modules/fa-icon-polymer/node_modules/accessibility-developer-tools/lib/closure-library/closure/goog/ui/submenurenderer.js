goog.provide("goog.ui.SubMenuRenderer");goog.require("goog.a11y.aria");goog.require("goog.a11y.aria.State");goog.require("goog.asserts");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.dom.classlist");goog.require("goog.style");goog.require("goog.ui.Menu");goog.require("goog.ui.MenuItemRenderer");goog.ui.SubMenuRenderer=function(){goog.ui.MenuItemRenderer.call(this)};goog.inherits(goog.ui.SubMenuRenderer,goog.ui.MenuItemRenderer);goog.addSingletonGetter(goog.ui.SubMenuRenderer);goog.ui.SubMenuRenderer.CSS_CLASS=goog.getCssName("goog-submenu");goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_=goog.getCssName("goog-submenu-arrow");goog.ui.SubMenuRenderer.prototype.createDom=function(control){var subMenu=control,element=goog.ui.SubMenuRenderer.superClass_.createDom.call(this,subMenu);goog.asserts.assert(element);goog.dom.classlist.add(element,goog.ui.SubMenuRenderer.CSS_CLASS);this.addArrow_(subMenu,element);return element};goog.ui.SubMenuRenderer.prototype.decorate=function(control,element){var subMenu=control;element=goog.ui.SubMenuRenderer.superClass_.decorate.call(this,subMenu,element);goog.asserts.assert(element);goog.dom.classlist.add(element,goog.ui.SubMenuRenderer.CSS_CLASS);this.addArrow_(subMenu,element);var childMenuEls=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.DIV,goog.getCssName("goog-menu"),element);if(childMenuEls.length){var childMenu=new goog.ui.Menu(subMenu.getDomHelper()),childMenuEl=childMenuEls[0];goog.style.setElementShown(childMenuEl,!1);subMenu.getDomHelper().getDocument().body.appendChild(childMenuEl);childMenu.decorate(childMenuEl);subMenu.setMenu(childMenu,!0)}return element};goog.ui.SubMenuRenderer.prototype.setContent=function(element,content){var contentElement=this.getContentElement(element),arrowElement=contentElement&&contentElement.lastChild;goog.ui.SubMenuRenderer.superClass_.setContent.call(this,element,content);if(arrowElement&&contentElement.lastChild!=arrowElement&&goog.dom.classlist.contains(arrowElement,goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_)){contentElement.appendChild(arrowElement)}};goog.ui.SubMenuRenderer.prototype.initializeDom=function(control){var subMenu=control;goog.ui.SubMenuRenderer.superClass_.initializeDom.call(this,subMenu);var element=subMenu.getContentElement(),arrow=subMenu.getDomHelper().getElementsByTagNameAndClass(goog.dom.TagName.SPAN,goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_,element)[0];goog.ui.SubMenuRenderer.setArrowTextContent_(subMenu,arrow);if(arrow!=element.lastChild){element.appendChild(arrow)}var subMenuElement=subMenu.getElement();goog.asserts.assert(subMenuElement,"The sub menu DOM element cannot be null.");goog.a11y.aria.setState(subMenuElement,goog.a11y.aria.State.HASPOPUP,"true")};goog.ui.SubMenuRenderer.prototype.addArrow_=function(subMenu,element){var arrow=subMenu.getDomHelper().createDom(goog.dom.TagName.SPAN);arrow.className=goog.ui.SubMenuRenderer.CSS_CLASS_SUBMENU_;goog.ui.SubMenuRenderer.setArrowTextContent_(subMenu,arrow);this.getContentElement(element).appendChild(arrow)};goog.ui.SubMenuRenderer.LEFT_ARROW_="\u25C4";goog.ui.SubMenuRenderer.RIGHT_ARROW_="\u25BA";goog.ui.SubMenuRenderer.setArrowTextContent_=function(subMenu,arrow){var leftArrow=goog.ui.SubMenuRenderer.LEFT_ARROW_,rightArrow=goog.ui.SubMenuRenderer.RIGHT_ARROW_;goog.asserts.assert(arrow);if(subMenu.isRightToLeft()){goog.dom.classlist.add(arrow,goog.getCssName("goog-submenu-arrow-rtl"));goog.dom.setTextContent(arrow,subMenu.isAlignedToEnd()?leftArrow:rightArrow)}else{goog.dom.classlist.remove(arrow,goog.getCssName("goog-submenu-arrow-rtl"));goog.dom.setTextContent(arrow,subMenu.isAlignedToEnd()?rightArrow:leftArrow)}};