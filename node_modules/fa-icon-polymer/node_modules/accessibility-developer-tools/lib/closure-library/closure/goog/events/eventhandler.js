goog.provide("goog.events.EventHandler");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.object");goog.forwardDeclare("goog.events.EventWrapper");goog.events.EventHandler=function(opt_scope){goog.Disposable.call(this);this.handler_=opt_scope;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(src,type,opt_fn,opt_capture){return this.listen_(src,type,opt_fn,opt_capture)};goog.events.EventHandler.prototype.listenWithScope=function(src,type,fn,capture,scope){return this.listen_(src,type,fn,capture,scope)};goog.events.EventHandler.prototype.listen_=function(src,type,opt_fn,opt_capture,opt_scope){if(!goog.isArray(type)){if(type){goog.events.EventHandler.typeArray_[0]=type.toString()}type=goog.events.EventHandler.typeArray_}for(var i=0,listenerObj;i<type.length;i++){listenerObj=goog.events.listen(src,type[i],opt_fn||this.handleEvent,opt_capture||!1,opt_scope||this.handler_||this);if(!listenerObj){return this}var key=listenerObj.key;this.keys_[key]=listenerObj}return this};goog.events.EventHandler.prototype.listenOnce=function(src,type,opt_fn,opt_capture){return this.listenOnce_(src,type,opt_fn,opt_capture)};goog.events.EventHandler.prototype.listenOnceWithScope=function(src,type,fn,capture,scope){return this.listenOnce_(src,type,fn,capture,scope)};goog.events.EventHandler.prototype.listenOnce_=function(src,type,opt_fn,opt_capture,opt_scope){if(goog.isArray(type)){for(var i=0;i<type.length;i++){this.listenOnce_(src,type[i],opt_fn,opt_capture,opt_scope)}}else{var listenerObj=goog.events.listenOnce(src,type,opt_fn||this.handleEvent,opt_capture,opt_scope||this.handler_||this);if(!listenerObj){return this}var key=listenerObj.key;this.keys_[key]=listenerObj}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(src,wrapper,listener,opt_capt){return this.listenWithWrapper_(src,wrapper,listener,opt_capt)};goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(src,wrapper,listener,capture,scope){return this.listenWithWrapper_(src,wrapper,listener,capture,scope)};goog.events.EventHandler.prototype.listenWithWrapper_=function(src,wrapper,listener,opt_capt,opt_scope){wrapper.listen(src,listener,opt_capt,opt_scope||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var count=0;for(var key in this.keys_){if(Object.prototype.hasOwnProperty.call(this.keys_,key)){count++}}return count};goog.events.EventHandler.prototype.unlisten=function(src,type,opt_fn,opt_capture,opt_scope){if(goog.isArray(type)){for(var i=0;i<type.length;i++){this.unlisten(src,type[i],opt_fn,opt_capture,opt_scope)}}else{var listener=goog.events.getListener(src,type,opt_fn||this.handleEvent,opt_capture,opt_scope||this.handler_||this);if(listener){goog.events.unlistenByKey(listener);delete this.keys_[listener.key]}}return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_scope){wrapper.unlisten(src,listener,opt_capt,opt_scope||this.handler_||this,this);return this};goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(listenerObj,key){if(this.keys_.hasOwnProperty(key)){goog.events.unlistenByKey(listenerObj)}},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented")};