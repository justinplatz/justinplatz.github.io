goog.provide("goog.html.SafeStyle");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.string");goog.require("goog.string.Const");goog.require("goog.string.TypedString");goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="";this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_};goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0;goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={};goog.html.SafeStyle.fromConstant=function(style){var styleString=goog.string.Const.unwrap(style);if(0===styleString.length){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(styleString);goog.asserts.assert(goog.string.endsWith(styleString,";"),"Last character of style string is not ';': "+styleString);goog.asserts.assert(goog.string.contains(styleString,":"),"Style string must contain at least one ':', to "+"specify a \"name: value\" pair: "+styleString);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(styleString)};goog.html.SafeStyle.checkStyle_=function(style){goog.asserts.assert(!/[<>]/.test(style),"Forbidden characters in style string: "+style)};goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_};if(goog.DEBUG){goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}}goog.html.SafeStyle.unwrap=function(safeStyle){if(safeStyle instanceof goog.html.SafeStyle&&safeStyle.constructor===goog.html.SafeStyle&&safeStyle.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_){return safeStyle.privateDoNotAccessOrElseSafeStyleWrappedValue_}else{goog.asserts.fail("expected object of type SafeStyle, got '"+safeStyle+"' of type "+goog.typeOf(safeStyle));return"type_error:SafeStyle"}};goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(style){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(style)};goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(style){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=style;return this};goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez";goog.html.SafeStyle.PropertyMap;goog.html.SafeStyle.create=function(map){var style="";for(var name in map){if(!/^[-_a-zA-Z0-9]+$/.test(name)){throw Error("Name allows only [-_a-zA-Z0-9], got: "+name)}var value=map[name];if(null==value){continue}if(value instanceof goog.string.Const){value=goog.string.Const.unwrap(value);goog.asserts.assert(!/[{;}]/.test(value),"Value does not allow [{;}].")}else if(!goog.html.SafeStyle.VALUE_RE_.test(value)){goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], rgb() and "+"rgba(), got: "+value);value=goog.html.SafeStyle.INNOCUOUS_STRING}else if(!goog.html.SafeStyle.hasBalancedQuotes_(value)){goog.asserts.fail("String value requires balanced quotes, got: "+value);value=goog.html.SafeStyle.INNOCUOUS_STRING}style+=name+":"+value+";"}if(!style){return goog.html.SafeStyle.EMPTY}goog.html.SafeStyle.checkStyle_(style);return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(style)};goog.html.SafeStyle.hasBalancedQuotes_=function(value){for(var outsideSingle=!0,outsideDouble=!0,i=0,c;i<value.length;i++){c=value.charAt(i);if("'"==c&&outsideDouble){outsideSingle=!outsideSingle}else if("\""==c&&outsideSingle){outsideDouble=!outsideDouble}}return outsideSingle&&outsideDouble};goog.html.SafeStyle.VALUE_RE_=/^([-,."'%_!# a-zA-Z0-9]+|(?:rgb|hsl)a?\([0-9.%, ]+\))$/;goog.html.SafeStyle.concat=function(var_args){var style="",addArgument=function(argument){if(goog.isArray(argument)){goog.array.forEach(argument,addArgument)}else{style+=goog.html.SafeStyle.unwrap(argument)}};goog.array.forEach(arguments,addArgument);if(!style){return goog.html.SafeStyle.EMPTY}return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(style)};