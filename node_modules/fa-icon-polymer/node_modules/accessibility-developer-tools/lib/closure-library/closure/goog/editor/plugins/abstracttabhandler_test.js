goog.provide("goog.editor.plugins.AbstractTabHandlerTest");goog.setTestOnly("goog.editor.plugins.AbstractTabHandlerTest");goog.require("goog.editor.Field");goog.require("goog.editor.plugins.AbstractTabHandler");goog.require("goog.events.BrowserEvent");goog.require("goog.events.KeyCodes");goog.require("goog.testing.StrictMock");goog.require("goog.testing.editor.FieldMock");goog.require("goog.testing.jsunit");goog.require("goog.userAgent");var tabHandler,editableField,handleTabKeyCalled=!1;function setUp(){editableField=new goog.testing.editor.FieldMock;editableField.inModalMode=goog.editor.Field.prototype.inModalMode;editableField.setModalMode=goog.editor.Field.prototype.setModalMode;tabHandler=new goog.editor.plugins.AbstractTabHandler;tabHandler.registerFieldObject(editableField);tabHandler.handleTabKey=function(e){handleTabKeyCalled=!0;return!0}}function tearDown(){tabHandler.dispose()}function testHandleKey(){var event=new goog.testing.StrictMock(goog.events.BrowserEvent);event.keyCode=goog.events.KeyCodes.TAB;event.ctrlKey=!1;event.metaKey=!1;assertTrue("Event must be handled when no modifier keys are pressed.",tabHandler.handleKeyboardShortcut(event,"",!1));assertTrue(handleTabKeyCalled);handleTabKeyCalled=!1;editableField.setModalMode(!0);if(goog.userAgent.GECKO){assertFalse("Event must not be handled when in modal mode",tabHandler.handleKeyboardShortcut(event,"",!1));assertFalse(handleTabKeyCalled)}else{assertTrue("Event must be handled when in modal mode",tabHandler.handleKeyboardShortcut(event,"",!1));assertTrue(handleTabKeyCalled);handleTabKeyCalled=!1}event.ctrlKey=!0;assertFalse("Plugin must never handle tab key press when ctrlKey is pressed.",tabHandler.handleKeyboardShortcut(event,"",!1));assertFalse(handleTabKeyCalled);event.ctrlKey=!1;event.metaKey=!0;assertFalse("Plugin must never handle tab key press when metaKey is pressed.",tabHandler.handleKeyboardShortcut(event,"",!1));assertFalse(handleTabKeyCalled)}