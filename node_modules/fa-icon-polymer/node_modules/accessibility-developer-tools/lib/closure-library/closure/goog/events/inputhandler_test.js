goog.provide("goog.events.InputHandlerTest");goog.setTestOnly("goog.events.InputHandlerTest");goog.require("goog.dom");goog.require("goog.events.EventHandler");goog.require("goog.events.EventType");goog.require("goog.events.InputHandler");goog.require("goog.events.KeyCodes");goog.require("goog.testing.events");goog.require("goog.testing.events.Event");goog.require("goog.testing.jsunit");goog.require("goog.testing.recordFunction");goog.require("goog.userAgent");var inputHandler,eventHandler;function setUp(){eventHandler=new goog.events.EventHandler}function tearDown(){goog.dispose(inputHandler);goog.dispose(eventHandler)}function testInputWithPlaceholder(){var input=goog.dom.getElement("input-w-placeholder");inputHandler=new goog.events.InputHandler(input);var callback=listenToInput(inputHandler);fireFakeInputEvent(input);assertEquals(0,callback.getCallCount())}function testInputWithPlaceholder_withValue(){var input=goog.dom.getElement("input-w-placeholder");inputHandler=new goog.events.InputHandler(input);var callback=listenToInput(inputHandler);input.value="foo";fireFakeInputEvent(input);assertEquals(0,callback.getCallCount())}function testInputWithPlaceholder_someKeys(){var input=goog.dom.getElement("input-w-placeholder");inputHandler=new goog.events.InputHandler(input);var callback=listenToInput(inputHandler);input.focus();input.value="foo";fireInputEvent(input,goog.events.KeyCodes.M);assertEquals(1,callback.getCallCount())}function listenToInput(inputHandler){var callback=goog.testing.recordFunction();eventHandler.listen(inputHandler,goog.events.InputHandler.EventType.INPUT,callback);return callback}function fireFakeInputEvent(input){input.focus();if(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(10)){fireInputEvent(input,0)}}function fireInputEvent(input,keyCode){var inputEvent=new goog.testing.events.Event(goog.events.EventType.INPUT,input);inputEvent.keyCode=keyCode;inputEvent.charCode=keyCode;goog.testing.events.fireBrowserEvent(inputEvent)}