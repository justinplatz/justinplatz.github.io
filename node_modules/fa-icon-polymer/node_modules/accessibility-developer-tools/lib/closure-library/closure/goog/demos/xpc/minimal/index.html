<html><head><script type="text/javascript" src="../../../base.js"></script><script type="text/javascript">goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.events");goog.require("goog.net.xpc.CrossPageChannel");</script><script type="text/javascript">var channel,logEl;function log(msg){logEl||(logEl=goog.dom.getElement("log"));var msgEl=goog.dom.createDom(goog.dom.TagName.DIV);msgEl.innerHTML=msg;logEl.insertBefore(msgEl,logEl.firstChild)}goog.events.listen(window,"load",function(){var cfg={},ownUri=new goog.Uri(window.location.href),peerDomain=ownUri.getParameterValue("peerdomain")||ownUri.getDomain(),peerUri=ownUri.clone().setDomain(peerDomain),localRelayUri=ownUri.resolve(new goog.Uri("relay.html")),peerRelayUri=peerUri.resolve(new goog.Uri("relay.html")),localPollUri=ownUri.resolve(new goog.Uri("blank.html")),peerPollUri=peerUri.resolve(new goog.Uri("blank.html"));cfg[goog.net.xpc.CfgFields.LOCAL_RELAY_URI]=localRelayUri.toString();cfg[goog.net.xpc.CfgFields.PEER_RELAY_URI]=peerRelayUri.toString();cfg[goog.net.xpc.CfgFields.LOCAL_POLL_URI]=localPollUri.toString();cfg[goog.net.xpc.CfgFields.PEER_POLL_URI]=peerPollUri.toString();var peerUri=ownUri.resolve(new goog.Uri("inner.html")).setDomain(peerDomain);cfg[goog.net.xpc.CfgFields.PEER_URI]=peerUri;channel=new goog.net.xpc.CrossPageChannel(cfg);channel.createPeerIframe(goog.dom.getElement("iframeContainer"));channel.registerService("log",log);channel.connect(function(){log("Channel connected.")})});</script><style type="text/css">body, td{background-color:#eeeeff;font-family:arial,verdana;font-size:12px;}</style></head><body><table border="0" width="100%" height="100%"><tbody><tr><td width="50%" valign="top"><h3><script type="text/javascript">document.write(location.href.replace(/\?.*/,"?..."));</script></h3><p><input type="text" id="msgInput" value="Hello from the container page." style="width:250px"> <input type="button" value="Send" onclick="channel.send('log', goog.dom.getElement('msgInput').value)"></p><div id="log" style="border: 1px #000 solid;"></div></td><td width="50%" valign="top" id="iframeContainer"></td></tr></tbody></table></body></html>