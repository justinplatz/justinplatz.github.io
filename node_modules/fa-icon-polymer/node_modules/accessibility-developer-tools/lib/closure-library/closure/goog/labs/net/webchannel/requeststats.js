goog.provide("goog.labs.net.webChannel.requestStats");goog.provide("goog.labs.net.webChannel.requestStats.Event");goog.provide("goog.labs.net.webChannel.requestStats.ServerReachability");goog.provide("goog.labs.net.webChannel.requestStats.ServerReachabilityEvent");goog.provide("goog.labs.net.webChannel.requestStats.Stat");goog.provide("goog.labs.net.webChannel.requestStats.StatEvent");goog.provide("goog.labs.net.webChannel.requestStats.TimingEvent");goog.require("goog.events.Event");goog.require("goog.events.EventTarget");goog.scope(function(){var requestStats=goog.labs.net.webChannel.requestStats;requestStats.Event={};requestStats.statEventTarget_=new goog.events.EventTarget;requestStats.Event.SERVER_REACHABILITY_EVENT="serverreachability";requestStats.ServerReachability={REQUEST_MADE:1,REQUEST_SUCCEEDED:2,REQUEST_FAILED:3,BACK_CHANNEL_ACTIVITY:4};requestStats.ServerReachabilityEvent=function(target,reachabilityType){goog.events.Event.call(this,requestStats.Event.SERVER_REACHABILITY_EVENT,target);this.reachabilityType=reachabilityType};goog.inherits(requestStats.ServerReachabilityEvent,goog.events.Event);requestStats.notifyServerReachabilityEvent=function(reachabilityType){var target=requestStats.statEventTarget_;target.dispatchEvent(new requestStats.ServerReachabilityEvent(target,reachabilityType))};requestStats.Event.STAT_EVENT="statevent";requestStats.Stat={CONNECT_ATTEMPT:0,ERROR_NETWORK:1,ERROR_OTHER:2,TEST_STAGE_ONE_START:3,TEST_STAGE_TWO_START:4,TEST_STAGE_TWO_DATA_ONE:5,TEST_STAGE_TWO_DATA_TWO:6,TEST_STAGE_TWO_DATA_BOTH:7,TEST_STAGE_ONE_FAILED:8,TEST_STAGE_TWO_FAILED:9,PROXY:10,NOPROXY:11,REQUEST_UNKNOWN_SESSION_ID:12,REQUEST_BAD_STATUS:13,REQUEST_INCOMPLETE_DATA:14,REQUEST_BAD_DATA:15,REQUEST_NO_DATA:16,REQUEST_TIMEOUT:17,BACKCHANNEL_MISSING:18,BACKCHANNEL_DEAD:19,BROWSER_OFFLINE:20};requestStats.StatEvent=function(eventTarget,stat){goog.events.Event.call(this,requestStats.Event.STAT_EVENT,eventTarget);this.stat=stat};goog.inherits(requestStats.StatEvent,goog.events.Event);requestStats.getStatEventTarget=function(){return requestStats.statEventTarget_};requestStats.notifyStatEvent=function(stat){var target=requestStats.statEventTarget_;target.dispatchEvent(new requestStats.StatEvent(target,stat))};requestStats.Event.TIMING_EVENT="timingevent";requestStats.TimingEvent=function(target,size,rtt,retries){goog.events.Event.call(this,requestStats.Event.TIMING_EVENT,target);this.size=size;this.rtt=rtt;this.retries=retries};goog.inherits(requestStats.TimingEvent,goog.events.Event);requestStats.notifyTimingEvent=function(size,rtt,retries){var target=requestStats.statEventTarget_;target.dispatchEvent(new requestStats.TimingEvent(target,size,rtt,retries))};requestStats.setStartThreadExecutionHook=function(startHook){requestStats.startExecutionHook_=startHook};requestStats.setEndThreadExecutionHook=function(endHook){requestStats.endExecutionHook_=endHook};requestStats.startExecutionHook_=function(){};requestStats.endExecutionHook_=function(){};requestStats.onStartExecution=function(){requestStats.startExecutionHook_()};requestStats.onEndExecution=function(){requestStats.endExecutionHook_()};requestStats.setTimeout=function(fn,ms){if(!goog.isFunction(fn)){throw Error("Fn must not be null and must be a function")}return goog.global.setTimeout(function(){requestStats.onStartExecution();try{fn()}finally{requestStats.onEndExecution()}},ms)}});