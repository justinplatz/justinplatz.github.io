goog.provide("goog.storage.mechanism.ErrorHandlingMechanismTest");goog.setTestOnly("goog.storage.mechanism.ErrorHandlingMechanismTest");goog.require("goog.storage.mechanism.ErrorHandlingMechanism");goog.require("goog.testing.jsunit");goog.require("goog.testing.recordFunction");var error=new Error,submechanism={get:function(){throw error},set:function(){throw error},remove:function(){throw error}},handler=goog.testing.recordFunction(goog.nullFunction),mechanism;function setUp(){mechanism=new goog.storage.mechanism.ErrorHandlingMechanism(submechanism,handler)}function tearDown(){handler.reset()}function testSet(){mechanism.set("foo","bar");assertEquals(1,handler.getCallCount());assertArrayEquals([error,goog.storage.mechanism.ErrorHandlingMechanism.Operation.SET,"foo","bar"],handler.getLastCall().getArguments())}function testGet(){mechanism.get("foo");assertEquals(1,handler.getCallCount());assertArrayEquals([error,goog.storage.mechanism.ErrorHandlingMechanism.Operation.GET,"foo"],handler.getLastCall().getArguments())}function testRemove(){mechanism.remove("foo");assertEquals(1,handler.getCallCount());assertArrayEquals([error,goog.storage.mechanism.ErrorHandlingMechanism.Operation.REMOVE,"foo"],handler.getLastCall().getArguments())}