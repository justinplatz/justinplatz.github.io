<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Closure Performance Tests - goog.ui.Button</title><link rel="stylesheet" type="text/css" href="../testing/performancetable.css"><script src="../base.js"></script><script>goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.EventHandler");goog.require("goog.events.EventType");goog.require("goog.testing.PerformanceTable");goog.require("goog.testing.jsunit");goog.require("goog.ui.Button");goog.require("goog.dom.TagName");</script></head><body><h1>goog.ui.Button Performance Tests</h1><p><b>User-agent:</b><script>document.write(navigator.userAgent);</script></p><div id="perfTable"></div><hr><div id="renderSandbox"></div><div id="decorateSandbox"></div><script>var renderSandbox=goog.dom.getElement("renderSandbox"),decorateSandbox=goog.dom.getElement("decorateSandbox"),renderedButtons,decoratedButtons,renderIndex,decorateIndex,elementToDecorate,SAMPLES_PER_RUN=200,table;function setUpPage(){table=new goog.testing.PerformanceTable(goog.dom.getElement("perfTable"))}function setUpRenderTest(){renderedButtons=[];renderIndex=0}function cleanUpAfterRenderTest(){for(var i=0,count=renderedButtons.length;i<count;i++){renderedButtons[i].dispose()}renderedButtons=null;goog.dom.removeChildren(renderSandbox)}function setUpDecorateTest(opt_count){for(var count=opt_count||1e3,i=0;i<count;i++){decorateSandbox.appendChild(goog.dom.createDom(goog.dom.TagName.BUTTON,"goog-button","W00t!"))}elementToDecorate=decorateSandbox.firstChild;decoratedButtons=[];decorateIndex=0}function cleanUpAfterDecorateTest(){for(var i=0,count=decoratedButtons.length;i<count;i++){decoratedButtons[i].dispose()}decoratedButtons=null;goog.dom.removeChildren(decorateSandbox)}function renderButtons(count,autoDetectBiDi){for(var i=0,button;i<count;i++){button=new goog.ui.Button("W00t!");if(!autoDetectBiDi){button.setRightToLeft(!1)}button.render(renderSandbox);renderedButtons[renderIndex++]=button}}function decorateButtons(count,autoDetectBiDi){for(var i=0;i<count;i++){var next=elementToDecorate.nextSibling,button=new goog.ui.Button;if(!autoDetectBiDi){button.setRightToLeft(!1)}button.decorate(elementToDecorate);decoratedButtons[decorateIndex++]=button;elementToDecorate=next}}function testRender(){setUpRenderTest();table.run(goog.partial(renderButtons,SAMPLES_PER_RUN,!0),"Render "+SAMPLES_PER_RUN+" buttons (default)");cleanUpAfterRenderTest();assertEquals("The expected number of buttons must have been rendered",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),renderIndex)}function testDecorate(){setUpDecorateTest(SAMPLES_PER_RUN*table.getTimer().getNumSamples());table.run(goog.partial(decorateButtons,SAMPLES_PER_RUN,!0),"Decorate "+SAMPLES_PER_RUN+" buttons (default)");cleanUpAfterDecorateTest();assertEquals("The expected number of buttons must have been decorated",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),decorateIndex);assertNull("All buttons must have been decorated",elementToDecorate)}function testRenderNoBiDiAutoDetect(){setUpRenderTest();table.run(goog.partial(renderButtons,SAMPLES_PER_RUN,!1),"Render "+SAMPLES_PER_RUN+" buttons (no BiDi auto-detect)");cleanUpAfterRenderTest();assertEquals("The expected number of buttons must have been rendered",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),renderIndex)}function testDecorateNoBiDiAutoDetect(){setUpDecorateTest(SAMPLES_PER_RUN*table.getTimer().getNumSamples());table.run(goog.partial(decorateButtons,SAMPLES_PER_RUN,!1),"Decorate "+SAMPLES_PER_RUN+" buttons (no BiDi auto-detect)");cleanUpAfterDecorateTest();assertEquals("The expected number of buttons must have been decorated",SAMPLES_PER_RUN*table.getTimer().getNumSamples(),decorateIndex);assertNull("All buttons must have been decorated",elementToDecorate)}</script></body></html>