goog.provide("goog.storage.RichStorage");goog.provide("goog.storage.RichStorage.Wrapper");goog.require("goog.storage.ErrorCode");goog.require("goog.storage.Storage");goog.storage.RichStorage=function(mechanism){goog.storage.RichStorage.base(this,"constructor",mechanism)};goog.inherits(goog.storage.RichStorage,goog.storage.Storage);goog.storage.RichStorage.DATA_KEY="data";goog.storage.RichStorage.Wrapper=function(value){this[goog.storage.RichStorage.DATA_KEY]=value};goog.storage.RichStorage.Wrapper.wrapIfNecessary=function(value){if(!goog.isDef(value)||value instanceof goog.storage.RichStorage.Wrapper){return value}return new goog.storage.RichStorage.Wrapper(value)};goog.storage.RichStorage.Wrapper.unwrap=function(wrapper){var value=wrapper[goog.storage.RichStorage.DATA_KEY];if(!goog.isDef(value)){throw goog.storage.ErrorCode.INVALID_VALUE}return value};goog.storage.RichStorage.Wrapper.unwrapIfPossible=function(wrapper){if(!wrapper){return}return goog.storage.RichStorage.Wrapper.unwrap(wrapper)};goog.storage.RichStorage.prototype.set=function(key,value){goog.storage.RichStorage.base(this,"set",key,goog.storage.RichStorage.Wrapper.wrapIfNecessary(value))};goog.storage.RichStorage.prototype.getWrapper=function(key){var wrapper=goog.storage.RichStorage.superClass_.get.call(this,key);if(!goog.isDef(wrapper)||wrapper instanceof Object){return wrapper}throw goog.storage.ErrorCode.INVALID_VALUE};goog.storage.RichStorage.prototype.get=function(key){return goog.storage.RichStorage.Wrapper.unwrapIfPossible(this.getWrapper(key))};