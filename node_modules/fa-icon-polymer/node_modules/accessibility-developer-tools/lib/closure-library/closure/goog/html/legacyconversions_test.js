goog.provide("goog.html.legacyconversionsTest");goog.require("goog.html.SafeHtml");goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl");goog.require("goog.html.TrustedResourceUrl");goog.require("goog.html.legacyconversions");goog.require("goog.testing.jsunit");goog.setTestOnly("goog.html.legacyconversionsTest");function testSafeHtmlFromString(){var html="<div>irrelevant</div>",safeHtml=goog.html.legacyconversions.safeHtmlFromString(html);assertEquals(html,goog.html.SafeHtml.unwrap(safeHtml));assertFunctionReports(goog.html.legacyconversions.safeHtmlFromString)}function testSafeStyleFromString(){var style="color: red; width: 1em;",safeStyle=goog.html.legacyconversions.safeStyleFromString(style);assertEquals(style,goog.html.SafeStyle.unwrap(safeStyle));assertFunctionReports(goog.html.legacyconversions.safeStyleFromString)}function testSafeStyleSheetFromString(){var styleSheet="P.special { color: red; background: url(http://test); }",safeStyleSheet=goog.html.legacyconversions.safeStyleSheetFromString(styleSheet);assertEquals(styleSheet,goog.html.SafeStyleSheet.unwrap(safeStyleSheet));assertFunctionReports(goog.html.legacyconversions.safeStyleSheetFromString)}function testSafeUrlFromString(){var url="https://www.google.com",safeUrl=goog.html.legacyconversions.safeUrlFromString(url);assertEquals(url,goog.html.SafeUrl.unwrap(safeUrl));assertFunctionReports(goog.html.legacyconversions.safeUrlFromString)}function testTrustedResourceUrlFromString(){var url="https://www.google.com/script.js",trustedResourceUrl=goog.html.legacyconversions.trustedResourceUrlFromString(url);assertEquals(url,goog.html.TrustedResourceUrl.unwrap(trustedResourceUrl));assertFunctionReports(goog.html.legacyconversions.trustedResourceUrlFromString)}function assertFunctionReports(conversionFunction){var reported=!1;try{goog.html.legacyconversions.setReportCallback(function(){reported=!0});conversionFunction("irrelevant");assertTrue("Expected legacy conversion to be reported.",reported)}finally{goog.html.legacyconversions.setReportCallback(goog.nullFunction)}}