goog.provide("goog.ui.ToolbarTest");goog.setTestOnly("goog.ui.ToolbarTest");goog.require("goog.a11y.aria");goog.require("goog.dom");goog.require("goog.events.EventType");goog.require("goog.testing.events");goog.require("goog.testing.events.Event");goog.require("goog.testing.jsunit");goog.require("goog.ui.Toolbar");goog.require("goog.ui.ToolbarMenuButton");var toolbar,toolbarWrapper,buttons;function setUp(){toolbar=new goog.ui.Toolbar;toolbarWrapper=goog.dom.getElement("toolbar-wrapper");toolbar.render(toolbarWrapper);var toolbarElem=toolbar.getElement(),button1=new goog.ui.ToolbarMenuButton("button 1"),button2=new goog.ui.ToolbarMenuButton("button 2"),button3=new goog.ui.ToolbarMenuButton("button 3");button1.render(toolbarElem);button2.render(toolbarElem);button3.render(toolbarElem);toolbar.addChild(button1);toolbar.addChild(button2);toolbar.addChild(button3);buttons=[button1,button2,button3]}function tearDown(){toolbar.dispose()}function testHighlightFirstOnFocus(){var firstButton=buttons[0];goog.testing.events.fireFocusEvent(toolbar.getElement());assertEquals(0,toolbar.getHighlightedIndex());assertTrue(firstButton.isHighlighted());assertEquals(firstButton.getElement(),goog.a11y.aria.getActiveDescendant(toolbar.getElement()));goog.testing.events.fireBlurEvent(toolbar.getElement());assertEquals(-1,toolbar.getHighlightedIndex());assertNull(goog.a11y.aria.getActiveDescendant(toolbar.getElement()));assertFalse(firstButton.isHighlighted())}function testHighlightSelectedOnClick(){var firstButton=buttons[0],secondButton=buttons[1],mouseover=new goog.testing.events.Event(goog.events.EventType.MOUSEOVER,secondButton.getElement());goog.testing.events.fireBrowserEvent(mouseover);var mousedown=new goog.testing.events.Event(goog.events.EventType.MOUSEDOWN,toolbar.getElement());goog.testing.events.fireBrowserEvent(mousedown);assertEquals(1,toolbar.getHighlightedIndex());assertTrue(secondButton.isHighlighted());assertFalse(firstButton.isHighlighted());assertEquals(secondButton.getElement(),goog.a11y.aria.getActiveDescendant(toolbar.getElement()))}