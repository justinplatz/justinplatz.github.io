goog.provide("goog.i18n.mime");goog.provide("goog.i18n.mime.encode");goog.require("goog.array");goog.i18n.mime.NONASCII_=/[^!-<>@-^`-~]/g;goog.i18n.mime.NONASCII_NOQUOTE_=/[^!#-<>@-^`-~]/g;goog.i18n.mime.encode=function(str,opt_noquote){var nonascii=opt_noquote?goog.i18n.mime.NONASCII_NOQUOTE_:goog.i18n.mime.NONASCII_;if(0<=str.search(nonascii)){str="=?UTF-8?Q?"+str.replace(nonascii,function(c){var i=c.charCodeAt(0);if(32==i){return"_"}var a=goog.array.concat("",goog.i18n.mime.getHexCharArray(c));return a.join("=")})+"?="}return str};goog.i18n.mime.getHexCharArray=function(c){var i=c.charCodeAt(0),a=[];if(128>i){a.push(i)}else if(2047>=i){a.push(192+(63&i>>6),128+(63&i))}else if(65535>=i){a.push(224+(63&i>>12),128+(63&i>>6),128+(63&i))}else{a.push(240+(63&i>>18),128+(63&i>>12),128+(63&i>>6),128+(63&i))}for(i=a.length-1;0<=i;--i){a[i]=a[i].toString(16)}return a};