goog.provide("goog.array");goog.require("goog.asserts");goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE);goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",!1);goog.array.peek=function(array){return array[array.length-1]};goog.array.last=goog.array.peek;goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(null!=arr.length);return Array.prototype.indexOf.call(arr,obj,opt_fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=null==opt_fromIndex?0:0>opt_fromIndex?Math.max(0,arr.length+opt_fromIndex):opt_fromIndex;if(goog.isString(arr)){if(!goog.isString(obj)||1!=obj.length){return-1}return arr.indexOf(obj,fromIndex)}for(var i=fromIndex;i<arr.length;i++){if(i in arr&&arr[i]===obj)return i}return-1};goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(arr,obj,opt_fromIndex){goog.asserts.assert(null!=arr.length);var fromIndex=null==opt_fromIndex?arr.length-1:opt_fromIndex;return Array.prototype.lastIndexOf.call(arr,obj,fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=null==opt_fromIndex?arr.length-1:opt_fromIndex;if(0>fromIndex){fromIndex=Math.max(0,arr.length+fromIndex)}if(goog.isString(arr)){if(!goog.isString(obj)||1!=obj.length){return-1}return arr.lastIndexOf(obj,fromIndex)}for(var i=fromIndex;0<=i;i--){if(i in arr&&arr[i]===obj)return i}return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(arr,f,opt_obj){goog.asserts.assert(null!=arr.length);Array.prototype.forEach.call(arr,f,opt_obj)}:function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2){f.call(opt_obj,arr2[i],i,arr)}}};goog.array.forEachRight=function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=l-1;0<=i;--i){if(i in arr2){f.call(opt_obj,arr2[i],i,arr)}}};goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(arr,f,opt_obj){goog.asserts.assert(null!=arr.length);return Array.prototype.filter.call(arr,f,opt_obj)}:function(arr,f,opt_obj){for(var l=arr.length,res=[],resLength=0,arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2){var val=arr2[i];if(f.call(opt_obj,val,i,arr)){res[resLength++]=val}}}return res};goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(arr,f,opt_obj){goog.asserts.assert(null!=arr.length);return Array.prototype.map.call(arr,f,opt_obj)}:function(arr,f,opt_obj){for(var l=arr.length,res=Array(l),arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2){res[i]=f.call(opt_obj,arr2[i],i,arr)}}return res};goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(arr,f,val,opt_obj){goog.asserts.assert(null!=arr.length);if(opt_obj){f=goog.bind(f,opt_obj)}return Array.prototype.reduce.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEach(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(arr,f,val,opt_obj){goog.asserts.assert(null!=arr.length);goog.asserts.assert(null!=f);if(opt_obj){f=goog.bind(f,opt_obj)}return Array.prototype.reduceRight.call(arr,f,val)}:function(arr,f,val,opt_obj){var rval=val;goog.array.forEachRight(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(arr,f,opt_obj){goog.asserts.assert(null!=arr.length);return Array.prototype.some.call(arr,f,opt_obj)}:function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return!0}}return!1};goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(arr,f,opt_obj){goog.asserts.assert(null!=arr.length);return Array.prototype.every.call(arr,f,opt_obj)}:function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2&&!f.call(opt_obj,arr2[i],i,arr)){return!1}}return!0};goog.array.count=function(arr,f,opt_obj){var count=0;goog.array.forEach(arr,function(element,index,arr){if(f.call(opt_obj,element,index,arr)){++count}},opt_obj);return count};goog.array.find=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);return 0>i?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndex=function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=0;i<l;i++){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return i}}return-1};goog.array.findRight=function(arr,f,opt_obj){var i=goog.array.findIndexRight(arr,f,opt_obj);return 0>i?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndexRight=function(arr,f,opt_obj){for(var l=arr.length,arr2=goog.isString(arr)?arr.split(""):arr,i=l-1;0<=i;i--){if(i in arr2&&f.call(opt_obj,arr2[i],i,arr)){return i}}return-1};goog.array.contains=function(arr,obj){return 0<=goog.array.indexOf(arr,obj)};goog.array.isEmpty=function(arr){return 0==arr.length};goog.array.clear=function(arr){if(!goog.isArray(arr)){for(var i=arr.length-1;0<=i;i--){delete arr[i]}}arr.length=0};goog.array.insert=function(arr,obj){if(!goog.array.contains(arr,obj)){arr.push(obj)}};goog.array.insertAt=function(arr,obj,opt_i){goog.array.splice(arr,opt_i,0,obj)};goog.array.insertArrayAt=function(arr,elementsToAdd,opt_i){goog.partial(goog.array.splice,arr,opt_i,0).apply(null,elementsToAdd)};goog.array.insertBefore=function(arr,obj,opt_obj2){var i;if(2==arguments.length||0>(i=goog.array.indexOf(arr,opt_obj2))){arr.push(obj)}else{goog.array.insertAt(arr,obj,i)}};goog.array.remove=function(arr,obj){var i=goog.array.indexOf(arr,obj),rv;if(rv=0<=i){goog.array.removeAt(arr,i)}return rv};goog.array.removeLast=function(arr,obj){var i=goog.array.lastIndexOf(arr,obj);if(0<=i){goog.array.removeAt(arr,i);return!0}return!1};goog.array.removeAt=function(arr,i){goog.asserts.assert(null!=arr.length);return 1==Array.prototype.splice.call(arr,i,1).length};goog.array.removeIf=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);if(0<=i){goog.array.removeAt(arr,i);return!0}return!1};goog.array.removeAllIf=function(arr,f,opt_obj){var removedCount=0;goog.array.forEachRight(arr,function(val,index){if(f.call(opt_obj,val,index,arr)){if(goog.array.removeAt(arr,index)){removedCount++}}});return removedCount};goog.array.concat=function(var_args){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.join=function(var_args){return Array.prototype.concat.apply(Array.prototype,arguments)};goog.array.toArray=function(object){var length=object.length;if(0<length){for(var rv=Array(length),i=0;i<length;i++){rv[i]=object[i]}return rv}return[]};goog.array.clone=goog.array.toArray;goog.array.extend=function(arr1,var_args){for(var i=1,arr2;i<arguments.length;i++){arr2=arguments[i];if(goog.isArrayLike(arr2)){var len1=arr1.length||0,len2=arr2.length||0;arr1.length=len1+len2;for(var j=0;j<len2;j++){arr1[len1+j]=arr2[j]}}else{arr1.push(arr2)}}};goog.array.splice=function(arr,index,howMany,var_args){goog.asserts.assert(null!=arr.length);return Array.prototype.splice.apply(arr,goog.array.slice(arguments,1))};goog.array.slice=function(arr,start,opt_end){goog.asserts.assert(null!=arr.length);if(2>=arguments.length){return Array.prototype.slice.call(arr,start)}else{return Array.prototype.slice.call(arr,start,opt_end)}};goog.array.removeDuplicates=function(arr,opt_rv,opt_hashFn){var returnArray=opt_rv||arr,defaultHashFn=function(item){return goog.isObject(item)?"o"+goog.getUid(item):(typeof item).charAt(0)+item},hashFn=opt_hashFn||defaultHashFn,seen={},cursorInsert=0,cursorRead=0;while(cursorRead<arr.length){var current=arr[cursorRead++],key=hashFn(current);if(!Object.prototype.hasOwnProperty.call(seen,key)){seen[key]=!0;returnArray[cursorInsert++]=current}}returnArray.length=cursorInsert};goog.array.binarySearch=function(arr,target,opt_compareFn){return goog.array.binarySearch_(arr,opt_compareFn||goog.array.defaultCompare,!1,target)};goog.array.binarySelect=function(arr,evaluator,opt_obj){return goog.array.binarySearch_(arr,evaluator,!0,void 0,opt_obj)};goog.array.binarySearch_=function(arr,compareFn,isEvaluator,opt_target,opt_selfObj){var left=0,right=arr.length,found;while(left<right){var middle=left+right>>1,compareResult;if(isEvaluator){compareResult=compareFn.call(opt_selfObj,arr[middle],middle,arr)}else{compareResult=compareFn(opt_target,arr[middle])}if(0<compareResult){left=middle+1}else{right=middle;found=!compareResult}}return found?left:~left};goog.array.sort=function(arr,opt_compareFn){arr.sort(opt_compareFn||goog.array.defaultCompare)};goog.array.stableSort=function(arr,opt_compareFn){for(var compArr=Array(arr.length),i=0;i<arr.length;i++){compArr[i]={index:i,value:arr[i]}}var valueCompareFn=opt_compareFn||goog.array.defaultCompare;function stableCompareFn(obj1,obj2){return valueCompareFn(obj1.value,obj2.value)||obj1.index-obj2.index}goog.array.sort(compArr,stableCompareFn);for(var i=0;i<arr.length;i++){arr[i]=compArr[i].value}};goog.array.sortByKey=function(arr,keyFn,opt_compareFn){var keyCompareFn=opt_compareFn||goog.array.defaultCompare;goog.array.sort(arr,function(a,b){return keyCompareFn(keyFn(a),keyFn(b))})};goog.array.sortObjectsByKey=function(arr,key,opt_compareFn){goog.array.sortByKey(arr,function(obj){return obj[key]},opt_compareFn)};goog.array.isSorted=function(arr,opt_compareFn,opt_strict){for(var compare=opt_compareFn||goog.array.defaultCompare,i=1,compareResult;i<arr.length;i++){compareResult=compare(arr[i-1],arr[i]);if(0<compareResult||0==compareResult&&opt_strict){return!1}}return!0};goog.array.equals=function(arr1,arr2,opt_equalsFn){if(!goog.isArrayLike(arr1)||!goog.isArrayLike(arr2)||arr1.length!=arr2.length){return!1}for(var l=arr1.length,equalsFn=opt_equalsFn||goog.array.defaultCompareEquality,i=0;i<l;i++){if(!equalsFn(arr1[i],arr2[i])){return!1}}return!0};goog.array.compare3=function(arr1,arr2,opt_compareFn){for(var compare=opt_compareFn||goog.array.defaultCompare,l=Math.min(arr1.length,arr2.length),i=0,result;i<l;i++){result=compare(arr1[i],arr2[i]);if(0!=result){return result}}return goog.array.defaultCompare(arr1.length,arr2.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.inverseDefaultCompare=function(a,b){return-goog.array.defaultCompare(a,b)};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);if(0>index){goog.array.insertAt(array,value,-(index+1));return!0}return!1};goog.array.binaryRemove=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);return 0<=index?goog.array.removeAt(array,index):!1};goog.array.bucket=function(array,sorter,opt_obj){for(var buckets={},i=0;i<array.length;i++){var value=array[i],key=sorter.call(opt_obj,value,i,array);if(goog.isDef(key)){var bucket=buckets[key]||(buckets[key]=[]);bucket.push(value)}}return buckets};goog.array.toObject=function(arr,keyFunc,opt_obj){var ret={};goog.array.forEach(arr,function(element,index){ret[keyFunc.call(opt_obj,element,index,arr)]=element});return ret};goog.array.range=function(startOrEnd,opt_end,opt_step){var array=[],start=0,end=startOrEnd,step=opt_step||1;if(opt_end!==void 0){start=startOrEnd;end=opt_end}if(0>step*(end-start)){return[]}if(0<step){for(var i=start;i<end;i+=step){array.push(i)}}else{for(var i=start;i>end;i+=step){array.push(i)}}return array};goog.array.repeat=function(value,n){for(var array=[],i=0;i<n;i++){array[i]=value}return array};goog.array.flatten=function(var_args){for(var CHUNK_SIZE=8192,result=[],i=0,element;i<arguments.length;i++){element=arguments[i];if(goog.isArray(element)){for(var c=0;c<element.length;c+=CHUNK_SIZE){for(var chunk=goog.array.slice(element,c,c+CHUNK_SIZE),recurseResult=goog.array.flatten.apply(null,chunk),r=0;r<recurseResult.length;r++){result.push(recurseResult[r])}}}else{result.push(element)}}return result};goog.array.rotate=function(array,n){goog.asserts.assert(null!=array.length);if(array.length){n%=array.length;if(0<n){Array.prototype.unshift.apply(array,array.splice(-n,n))}else if(0>n){Array.prototype.push.apply(array,array.splice(0,-n))}}return array};goog.array.moveItem=function(arr,fromIndex,toIndex){goog.asserts.assert(0<=fromIndex&&fromIndex<arr.length);goog.asserts.assert(0<=toIndex&&toIndex<arr.length);var removedItems=Array.prototype.splice.call(arr,fromIndex,1);Array.prototype.splice.call(arr,toIndex,0,removedItems[0])};goog.array.zip=function(var_args){if(!arguments.length){return[]}for(var result=[],minLen=arguments[0].length,i=1;i<arguments.length;i++){if(arguments[i].length<minLen){minLen=arguments[i].length}}for(var i=0,value;i<minLen;i++){value=[];for(var j=0;j<arguments.length;j++){value.push(arguments[j][i])}result.push(value)}return result};goog.array.shuffle=function(arr,opt_randFn){for(var randFn=opt_randFn||Math.random,i=arr.length-1;0<i;i--){var j=Math.floor(randFn()*(i+1)),tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}};goog.array.copyByIndex=function(arr,index_arr){var result=[];goog.array.forEach(index_arr,function(index){result.push(arr[index])});return result};goog.array.concatMap=function(arr,f,opt_obj){return goog.array.concat.apply([],goog.array.map(arr,f,opt_obj))};