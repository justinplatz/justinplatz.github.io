goog.provide("goog.dom.ViewportSizeMonitor");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Size");goog.dom.ViewportSizeMonitor=function(opt_window){goog.dom.ViewportSizeMonitor.base(this,"constructor");this.window_=opt_window||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_)};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(opt_window){var currentWindow=opt_window||window,uid=goog.getUid(currentWindow);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]||new goog.dom.ViewportSizeMonitor(currentWindow)};goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(opt_window){var uid=goog.getUid(opt_window||window);goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]);delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[uid]};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);if(this.listenerKey_){goog.events.unlistenByKey(this.listenerKey_);this.listenerKey_=null}this.window_=null;this.size_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(event){var size=goog.dom.getViewportSize(this.window_);if(!goog.math.Size.equals(size,this.size_)){this.size_=size;this.dispatchEvent(goog.events.EventType.RESIZE)}};