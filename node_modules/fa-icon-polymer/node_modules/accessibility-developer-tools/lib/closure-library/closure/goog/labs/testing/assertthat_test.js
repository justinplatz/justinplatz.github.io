goog.provide("goog.labs.testing.assertThatTest");goog.setTestOnly("goog.labs.testing.assertThatTest");goog.require("goog.labs.testing.MatcherError");goog.require("goog.labs.testing.assertThat");goog.require("goog.testing.jsunit");goog.require("goog.testing.recordFunction");var successMatchesFn,failureMatchesFn,describeFn,successTestMatcher,failureTestMatcher;function setUp(){successMatchesFn=new goog.testing.recordFunction(function(){return!0});failureMatchesFn=new goog.testing.recordFunction(function(){return!1});describeFn=new goog.testing.recordFunction;successTestMatcher=function(){return{matches:successMatchesFn,describe:describeFn}};failureTestMatcher=function(){return{matches:failureMatchesFn,describe:describeFn}}}function testAssertthatAlwaysCallsMatches(){var value=7;goog.labs.testing.assertThat(value,successTestMatcher(),"matches is called on success");assertEquals(1,successMatchesFn.getCallCount());var matchesCall=successMatchesFn.popLastCall();assertEquals(value,matchesCall.getArgument(0));var e=assertThrows(goog.bind(goog.labs.testing.assertThat,null,value,failureTestMatcher(),"matches is called on failure"));assertTrue(e instanceof goog.labs.testing.MatcherError);assertEquals(1,failureMatchesFn.getCallCount())}function testAssertthatCallsDescribeOnFailure(){var value=7,e=assertThrows(goog.bind(goog.labs.testing.assertThat,null,value,failureTestMatcher(),"describe is called on failure"));assertTrue(e instanceof goog.labs.testing.MatcherError);assertEquals(1,failureMatchesFn.getCallCount());assertEquals(1,describeFn.getCallCount());var matchesCall=describeFn.popLastCall();assertEquals(value,matchesCall.getArgument(0))}