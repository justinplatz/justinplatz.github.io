goog.provide("goog.ui.media.Mp3Test");goog.setTestOnly("goog.ui.media.Mp3Test");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.html.testing");goog.require("goog.testing.jsunit");goog.require("goog.ui.media.FlashObject");goog.require("goog.ui.media.Media");goog.require("goog.ui.media.MediaModel");goog.require("goog.ui.media.Mp3");var mp3,control,MP3_URL="http://www.shellworld.net/~davidsky/surf-oxy.mp3",parent=goog.dom.createElement(goog.dom.TagName.DIV);function setUp(){mp3=goog.ui.media.Mp3.getInstance();var flashUrl=goog.ui.media.Mp3.buildFlashUrl(MP3_URL),model=new goog.ui.media.MediaModel(MP3_URL,"mp3 caption","");model.setPlayer(new goog.ui.media.MediaModel.Player(goog.html.testing.newTrustedResourceUrlForTest(flashUrl)));control=new goog.ui.media.Media(model,mp3);control.setSelected(!0)}function tearDown(){control.dispose()}function testBasicRendering(){control.render(parent);var el=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.DIV,goog.ui.media.Mp3.CSS_CLASS,parent);assertEquals(1,el.length)}function testParsingUrl(){assertTrue(goog.ui.media.Mp3.MATCHER.test(MP3_URL));assertFalse(goog.ui.media.Mp3.MATCHER.test("http://invalidUrl/filename.doc"))}function testCreatingDomOnInitialState(){control.render(parent);var caption=goog.dom.getElementsByTagNameAndClass(goog.dom.TagName.DIV,goog.ui.media.Mp3.CSS_CLASS+"-caption",parent);assertEquals(1,caption.length);var flash=goog.dom.getElementsByTagNameAndClass(void 0,goog.ui.media.FlashObject.CSS_CLASS,parent);assertEquals(1,flash.length)}