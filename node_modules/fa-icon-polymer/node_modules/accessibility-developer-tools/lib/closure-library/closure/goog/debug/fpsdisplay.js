goog.provide("goog.debug.FpsDisplay");goog.require("goog.asserts");goog.require("goog.async.AnimationDelay");goog.require("goog.dom");goog.require("goog.dom.TagName");goog.require("goog.ui.Component");goog.debug.FpsDisplay=function(opt_domHelper){goog.debug.FpsDisplay.base(this,"constructor",opt_domHelper)};goog.inherits(goog.debug.FpsDisplay,goog.ui.Component);goog.debug.FpsDisplay.CSS=goog.getCssName("goog-fps-display");goog.debug.FpsDisplay.SAMPLES=10;goog.debug.FpsDisplay.prototype.animation_=null;goog.debug.FpsDisplay.prototype.createDom=function(){this.setElementInternal(this.getDomHelper().createDom(goog.dom.TagName.DIV,goog.debug.FpsDisplay.CSS))};goog.debug.FpsDisplay.prototype.enterDocument=function(){goog.debug.FpsDisplay.base(this,"enterDocument");this.animation_=new goog.debug.FpsDisplay.FpsAnimation_(this.getElement());this.delay_=new goog.async.AnimationDelay(this.handleDelay_,this.getDomHelper().getWindow(),this);this.delay_.start()};goog.debug.FpsDisplay.prototype.handleDelay_=function(now){if(this.isInDocument()){this.animation_.onAnimationFrame(now);this.delay_.start()}};goog.debug.FpsDisplay.prototype.exitDocument=function(){goog.debug.FpsDisplay.base(this,"exitDocument");this.animation_=null;goog.dispose(this.delay_)};goog.debug.FpsDisplay.prototype.getFps=function(){goog.asserts.assert(this.isInDocument(),"Render the FPS display before querying FPS");return this.animation_.lastFps_};goog.debug.FpsDisplay.FpsAnimation_=function(elem){this.element_=elem;this.frameNumber_=0};goog.debug.FpsDisplay.FpsAnimation_.prototype.lastTime_=0;goog.debug.FpsDisplay.FpsAnimation_.prototype.lastFps_=-1;goog.debug.FpsDisplay.FpsAnimation_.prototype.onAnimationFrame=function(now){var SAMPLES=goog.debug.FpsDisplay.SAMPLES;if(0==this.frameNumber_%SAMPLES){this.lastFps_=Math.round(1e3*SAMPLES/(now-this.lastTime_));goog.dom.setTextContent(this.element_,this.lastFps_);this.lastTime_=now}this.frameNumber_++};