goog.provide("goog.i18n.NumberFormatTest");goog.setTestOnly("goog.i18n.NumberFormatTest");goog.require("goog.i18n.CompactNumberFormatSymbols");goog.require("goog.i18n.CompactNumberFormatSymbols_de");goog.require("goog.i18n.CompactNumberFormatSymbols_en");goog.require("goog.i18n.CompactNumberFormatSymbols_fr");goog.require("goog.i18n.NumberFormat");goog.require("goog.i18n.NumberFormatSymbols");goog.require("goog.i18n.NumberFormatSymbols_de");goog.require("goog.i18n.NumberFormatSymbols_en");goog.require("goog.i18n.NumberFormatSymbols_fr");goog.require("goog.i18n.NumberFormatSymbols_pl");goog.require("goog.i18n.NumberFormatSymbols_ro");goog.require("goog.testing.ExpectedFailures");goog.require("goog.testing.PropertyReplacer");goog.require("goog.testing.jsunit");goog.require("goog.userAgent");goog.require("goog.userAgent.product");goog.require("goog.userAgent.product.isVersion");var expectedFailures,stubs=new goog.testing.PropertyReplacer;function setUpPage(){expectedFailures=new goog.testing.ExpectedFailures}function setUp(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_en;goog.i18n.CompactNumberFormatSymbols=goog.i18n.CompactNumberFormatSymbols_en}function tearDown(){expectedFailures.handleTearDown();stubs.reset()}function veryBigNumberCompare(str1,str2){return str1.length==str2.length&&str1.substring(0,8)==str2.substring(0,8)}function testVeryBigNumber(){var str,fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);str=fmt.format(17856e26);assertTrue(veryBigNumberCompare("$1,785,599,999,999,999,400,000,000,000,000.00",str));str=fmt.format(17856e26);assertTrue(veryBigNumberCompare("$1,785,599,999,999,999,400,000,000,000,000.00",str));str=fmt.format(13456e16);assertTrue(veryBigNumberCompare("$134,560,000,000,000,000,000.00",str));fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);str=fmt.format(13456e16);assertTrue(veryBigNumberCompare("134,559,999,999,999,980,000",str));fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.PERCENT);str=fmt.format(13456e16);assertTrue(veryBigNumberCompare("13,456,000,000,000,000,000,000%",str));fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.SCIENTIFIC);str=fmt.format(13456e16);assertEquals("1E20",str);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);str=fmt.format(-1234567890123456e291);assertEquals(1+1+306+306/3,str.length);assertEquals("-1,234,567,890,123,45",str.substr(0,21));str=fmt.format(1/0);assertEquals("\u221E",str);str=fmt.format(-Infinity);assertEquals("-\u221E",str)}function testStandardFormat(){var str,fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);str=fmt.format(1234.579);assertEquals("$1,234.58",str);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);str=fmt.format(1234.579);assertEquals("1,234.579",str);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.PERCENT);str=fmt.format(1234.579);assertEquals("123,458%",str);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.SCIENTIFIC);str=fmt.format(1234.579);assertEquals("1E3",str);str=fmt.format(1e6);assertEquals("1E6",str)}function testNegativePercentage(){var str,fmt=new goog.i18n.NumberFormat("#,##0.00%");str=fmt.format(-1234.56);assertEquals("-123,456.00%",str);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.PERCENT);str=fmt.format(-1234.579);assertEquals("-123,458%",str)}function testNegativePercentagePattern(){var str,fmt=new goog.i18n.NumberFormat("#,##0.00%;(#,##0.00%)");str=fmt.format(1234.56);assertEquals("123,456.00%",str);str=fmt.format(-1234.56);assertEquals("(123,456.00%)",str)}function testCustomPercentage(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.PERCENT);fmt.setMaximumFractionDigits(1);fmt.setMinimumFractionDigits(1);var str=fmt.format(.1291);assertEquals("12.9%",str);fmt.setMaximumFractionDigits(2);fmt.setMinimumFractionDigits(1);str=fmt.format(.129);assertEquals("12.9%",str);fmt.setMaximumFractionDigits(2);fmt.setMinimumFractionDigits(1);str=fmt.format(.12);assertEquals("12.0%",str);fmt.setMaximumFractionDigits(2);fmt.setMinimumFractionDigits(1);str=fmt.format(.12911);assertEquals("12.91%",str)}function testBasicParse(){var value,fmt=new goog.i18n.NumberFormat("0.0000");value=fmt.parse("123.4579");assertEquals(123.4579,value);value=fmt.parse("+123.4579");assertEquals(123.4579,value);value=fmt.parse("-123.4579");assertEquals(-123.4579,value)}function testPrefixParse(){var value,fmt=new goog.i18n.NumberFormat("0.0;(0.0)");value=fmt.parse("123.4579");assertEquals(123.4579,value);value=fmt.parse("(123.4579)");assertEquals(-123.4579,value)}function testPrecentParse(){var value,fmt=new goog.i18n.NumberFormat("0.0;(0.0)");value=fmt.parse("123.4579%");assertEquals(123.4579/100,value);value=fmt.parse("(%123.4579)");assertEquals(-123.4579/100,value);value=fmt.parse("123.4579\u2030");assertEquals(123.4579/1e3,value);value=fmt.parse("(\u2030123.4579)");assertEquals(-123.4579/1e3,value)}function testPercentAndPerMillAdvance(){var value,pos=[0],fmt=new goog.i18n.NumberFormat("0");value=fmt.parse("120%",pos);assertEquals(1.2,value);assertEquals(4,pos[0]);pos[0]=0;value=fmt.parse("120\u2030",pos);assertEquals(.12,value);assertEquals(4,pos[0])}function testPercentAndPerMillParsing(){var implicitFmt=new goog.i18n.NumberFormat("0;(0)");assertEquals(123/100,implicitFmt.parse("123%"));assertEquals(-123/100,implicitFmt.parse("(123%)"));assertEquals(123/1e3,implicitFmt.parse("123\u2030"));assertEquals(-123/1e3,implicitFmt.parse("(123\u2030)"));var explicitFmtPercent=new goog.i18n.NumberFormat("0%;(0%)");assertEquals(123/100,explicitFmtPercent.parse("123%"));assertEquals(-123/100,explicitFmtPercent.parse("(123%)"));var explicitFmtPermill=new goog.i18n.NumberFormat("0\u2030;(0\u2030)");assertEquals(123/1e3,explicitFmtPermill.parse("123\u2030"));assertEquals(-123/1e3,explicitFmtPermill.parse("(123\u2030)"))}function testInfinityParse(){var value,fmt=new goog.i18n.NumberFormat("0.0;(0.0)");value=fmt.parse("\u221E");assertEquals(Number.POSITIVE_INFINITY,value);value=fmt.parse("(\u221E)");assertEquals(Number.NEGATIVE_INFINITY,value)}function testExponentParse(){var value,fmt;fmt=new goog.i18n.NumberFormat("#E0");value=fmt.parse("1.234E3");assertEquals(1234,value);fmt=new goog.i18n.NumberFormat("0.###E0");value=fmt.parse("1.234E3");assertEquals(1234,value);fmt=new goog.i18n.NumberFormat("#E0");value=fmt.parse("1.2345E4");assertEquals(12345,value);value=fmt.parse("1.2345E4");assertEquals(12345,value);value=fmt.parse("1.2345E+4");assertEquals(12345,value)}function testGroupingParse(){var value,fmt=new goog.i18n.NumberFormat("#,###");value=fmt.parse("1,234,567,890");assertEquals(1234567890,value);value=fmt.parse("12,3456,7890");assertEquals(1234567890,value);fmt=new goog.i18n.NumberFormat("#");value=fmt.parse("1234567890");assertEquals(1234567890,value)}function testBasicFormat(){var fmt=new goog.i18n.NumberFormat("0.0000"),str=fmt.format(123.45789179565757);assertEquals("123.4579",str)}function testGrouping(){var str,fmt=new goog.i18n.NumberFormat("#,###");str=fmt.format(1234567890);assertEquals("1,234,567,890",str);fmt=new goog.i18n.NumberFormat("#,####");str=fmt.format(1234567890);assertEquals("12,3456,7890",str);fmt=new goog.i18n.NumberFormat("#");str=fmt.format(1234567890);assertEquals("1234567890",str)}function testIndiaNumberGrouping(){var fmt=new goog.i18n.NumberFormat("#,##,###"),str=fmt.format(1);assertEquals("1",str);str=fmt.format(12);assertEquals("12",str);str=fmt.format(123);assertEquals("123",str);str=fmt.format(1234);assertEquals("1,234",str);str=fmt.format(12345);assertEquals("12,345",str);str=fmt.format(123456);assertEquals("1,23,456",str);str=fmt.format(1234567);assertEquals("12,34,567",str);str=fmt.format(12345678);assertEquals("1,23,45,678",str);str=fmt.format(123456789);assertEquals("12,34,56,789",str);str=fmt.format(1234567890);assertEquals("1,23,45,67,890",str);str=fmt.format(0);assertEquals("0",str);str=fmt.format(-1);assertEquals("-1",str);str=fmt.format(-12);assertEquals("-12",str);str=fmt.format(-123);assertEquals("-123",str);str=fmt.format(-1234);assertEquals("-1,234",str);str=fmt.format(-12345);assertEquals("-12,345",str);str=fmt.format(-123456);assertEquals("-1,23,456",str);str=fmt.format(-1234567);assertEquals("-12,34,567",str);str=fmt.format(-12345678);assertEquals("-1,23,45,678",str);str=fmt.format(-123456789);assertEquals("-12,34,56,789",str);str=fmt.format(-1234567890);assertEquals("-1,23,45,67,890",str)}function testUnknownNumberGroupings(){var fmt=new goog.i18n.NumberFormat("#,####,##,###"),str=fmt.format(1);assertEquals("1",str);str=fmt.format(12);assertEquals("12",str);str=fmt.format(123);assertEquals("123",str);str=fmt.format(1234);assertEquals("1,234",str);str=fmt.format(12345);assertEquals("12,345",str);str=fmt.format(123456);assertEquals("1,23,456",str);str=fmt.format(1234567);assertEquals("12,34,567",str);str=fmt.format(12345678);assertEquals("123,45,678",str);str=fmt.format(123456789);assertEquals("1234,56,789",str);str=fmt.format(1234567890);assertEquals("1,2345,67,890",str);str=fmt.format(11234567890);assertEquals("11,2345,67,890",str);str=fmt.format(111234567890);assertEquals("111,2345,67,890",str);str=fmt.format(1111234567890);assertEquals("1111,2345,67,890",str);str=fmt.format(11111234567890);assertEquals("1,1111,2345,67,890",str);str=fmt.format(0);assertEquals("0",str);str=fmt.format(-1);assertEquals("-1",str);str=fmt.format(-12);assertEquals("-12",str);str=fmt.format(-123);assertEquals("-123",str);str=fmt.format(-1234);assertEquals("-1,234",str);str=fmt.format(-12345);assertEquals("-12,345",str);str=fmt.format(-123456);assertEquals("-1,23,456",str);str=fmt.format(-1234567);assertEquals("-12,34,567",str);str=fmt.format(-12345678);assertEquals("-123,45,678",str);str=fmt.format(-123456789);assertEquals("-1234,56,789",str);str=fmt.format(-1234567890);assertEquals("-1,2345,67,890",str);str=fmt.format(-11234567890);assertEquals("-11,2345,67,890",str);str=fmt.format(-111234567890);assertEquals("-111,2345,67,890",str);str=fmt.format(-1111234567890);assertEquals("-1111,2345,67,890",str);str=fmt.format(-11111234567890);assertEquals("-1,1111,2345,67,890",str);fmt=new goog.i18n.NumberFormat("#,#,##,###,#");str=fmt.format(1);assertEquals("1",str);str=fmt.format(12);assertEquals("1,2",str);str=fmt.format(123);assertEquals("12,3",str);str=fmt.format(1234);assertEquals("123,4",str);str=fmt.format(12345);assertEquals("1,234,5",str);str=fmt.format(123456);assertEquals("12,345,6",str);str=fmt.format(1234567);assertEquals("1,23,456,7",str);str=fmt.format(12345678);assertEquals("1,2,34,567,8",str);str=fmt.format(123456789);assertEquals("1,2,3,45,678,9",str);str=fmt.format(1234567890);assertEquals("1,2,3,4,56,789,0",str);str=fmt.format(0);assertEquals("0",str);str=fmt.format(-1);assertEquals("-1",str);str=fmt.format(-12);assertEquals("-1,2",str);str=fmt.format(-123);assertEquals("-12,3",str);str=fmt.format(-1234);assertEquals("-123,4",str);str=fmt.format(-12345);assertEquals("-1,234,5",str);str=fmt.format(-123456);assertEquals("-12,345,6",str);str=fmt.format(-1234567);assertEquals("-1,23,456,7",str);str=fmt.format(-12345678);assertEquals("-1,2,34,567,8",str);str=fmt.format(-123456789);assertEquals("-1,2,3,45,678,9",str);str=fmt.format(-1234567890);assertEquals("-1,2,3,4,56,789,0",str)}function testPerMill(){var str,fmt=new goog.i18n.NumberFormat("###.###\u2030");str=fmt.format(.4857);assertEquals("485.7\u2030",str)}function testCurrency(){var str,fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00");str=fmt.format(1234.56);assertEquals("$1,234.56",str);str=fmt.format(-1234.56);assertEquals("-$1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","USD",goog.i18n.NumberFormat.CurrencyStyle.LOCAL);str=fmt.format(1234.56);assertEquals("$1,234.56",str);str=fmt.format(-1234.56);assertEquals("-$1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","USD",goog.i18n.NumberFormat.CurrencyStyle.PORTABLE);str=fmt.format(1234.56);assertEquals("US$1,234.56",str);str=fmt.format(-1234.56);assertEquals("-US$1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","USD",goog.i18n.NumberFormat.CurrencyStyle.GLOBAL);str=fmt.format(1234.56);assertEquals("USD $1,234.56",str);str=fmt.format(-1234.56);assertEquals("-USD $1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4\xA4 #,##0.00;-\xA4\xA4 #,##0.00");str=fmt.format(1234.56);assertEquals("USD 1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4\xA4 #,##0.00;\xA4\xA4 -#,##0.00");str=fmt.format(-1234.56);assertEquals("USD -1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","BRL");str=fmt.format(1234.56);assertEquals("R$1,234.56",str);str=fmt.format(-1234.56);assertEquals("-R$1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4\xA4 #,##0.00;(\xA4\xA4 #,##0.00)","BRL");str=fmt.format(1234.56);assertEquals("BRL 1,234.56",str);str=fmt.format(-1234.56);assertEquals("(BRL 1,234.56)",str)}function testQuotes(){var str,fmt=new goog.i18n.NumberFormat("a'fo''o'b#");str=fmt.format(123);assertEquals("afo'ob123",str);fmt=new goog.i18n.NumberFormat("a''b#");str=fmt.format(123);assertEquals("a'b123",str);fmt=new goog.i18n.NumberFormat("a'fo''o'b#");str=fmt.format(-123);assertEquals("afo'ob-123",str);fmt=new goog.i18n.NumberFormat("a''b#");str=fmt.format(-123);assertEquals("a'b-123",str)}function testZeros(){var str,fmt;fmt=new goog.i18n.NumberFormat("#.#");str=fmt.format(0);assertEquals("0",str);fmt=new goog.i18n.NumberFormat("#.");str=fmt.format(0);assertEquals("0.",str);fmt=new goog.i18n.NumberFormat(".#");str=fmt.format(0);assertEquals(".0",str);fmt=new goog.i18n.NumberFormat("#");str=fmt.format(0);assertEquals("0",str);fmt=new goog.i18n.NumberFormat("#0.#");str=fmt.format(0);assertEquals("0",str);fmt=new goog.i18n.NumberFormat("#0.");str=fmt.format(0);assertEquals("0.",str);fmt=new goog.i18n.NumberFormat("#.0");str=fmt.format(0);assertEquals(".0",str);fmt=new goog.i18n.NumberFormat("#");str=fmt.format(0);assertEquals("0",str);fmt=new goog.i18n.NumberFormat("000");str=fmt.format(0);assertEquals("000",str)}function testExponential(){var str,fmt;fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(.01234);assertEquals("1.234E-2",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(.01234);assertEquals("12.340E-03",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(.01234);assertEquals("12.34E-003",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(.01234);assertEquals("1.234E-2",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(123456789);assertEquals("1.2346E8",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(123456789);assertEquals("12.346E07",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(123456789);assertEquals("123.456789E006",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(123456789);assertEquals("1.235E8",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(123e298);assertEquals("1.23E300",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(123e298);assertEquals("12.300E299",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(123e298);assertEquals("1.23E300",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(123e298);assertEquals("1.23E300",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(-3141592653e-280);assertEquals("-3.1416E-271",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(-3141592653e-280);assertEquals("-31.416E-272",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(-3141592653e-280);assertEquals("-314.159265E-273",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(-3141592653e-280);assertEquals("[3.142E-271]",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(0);assertEquals("0E0",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(0);assertEquals("00.000E00",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(0);assertEquals("0E000",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(0);assertEquals("0E0",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(-1);assertEquals("-1E0",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(-1);assertEquals("-10.000E-01",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(-1);assertEquals("-1E000",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(-1);assertEquals("[1E0]",str);fmt=new goog.i18n.NumberFormat("0.####E0");str=fmt.format(1);assertEquals("1E0",str);fmt=new goog.i18n.NumberFormat("00.000E00");str=fmt.format(1);assertEquals("10.000E-01",str);fmt=new goog.i18n.NumberFormat("##0.######E000");str=fmt.format(1);assertEquals("1E000",str);fmt=new goog.i18n.NumberFormat("0.###E0;[0.###E0]");str=fmt.format(1);assertEquals("1E0",str);fmt=new goog.i18n.NumberFormat("#E0");str=fmt.format(12345);assertEquals("1E4",str);fmt=new goog.i18n.NumberFormat("0E0");str=fmt.format(12345);assertEquals("1E4",str);fmt=new goog.i18n.NumberFormat("##0.###E0");str=fmt.format(12345);assertEquals("12.345E3",str);fmt=new goog.i18n.NumberFormat("##0.###E0");str=fmt.format(12345.00001);assertEquals("12.345E3",str);fmt=new goog.i18n.NumberFormat("##0.###E0");str=fmt.format(12345);assertEquals("12.345E3",str);fmt=new goog.i18n.NumberFormat("##0.####E0");str=fmt.format(7.8912345e-7);expectedFailures.expectFailureFor(isFirefox363Linux());try{assertEquals("789.1235E-9",str)}catch(e){expectedFailures.handleException(e)}fmt=new goog.i18n.NumberFormat("##0.####E0");str=fmt.format(78e-8);assertEquals("780E-9",str);fmt=new goog.i18n.NumberFormat(".###E0");str=fmt.format(45678);assertEquals(".457E5",str);fmt=new goog.i18n.NumberFormat(".###E0");str=fmt.format(0);assertEquals(".0E0",str);fmt=new goog.i18n.NumberFormat("#E0");str=fmt.format(45678e3);assertEquals("5E7",str);fmt=new goog.i18n.NumberFormat("##E0");str=fmt.format(45678e3);assertEquals("46E6",str);fmt=new goog.i18n.NumberFormat("####E0");str=fmt.format(45678e3);assertEquals("4568E4",str);fmt=new goog.i18n.NumberFormat("0E0");str=fmt.format(45678e3);assertEquals("5E7",str);fmt=new goog.i18n.NumberFormat("00E0");str=fmt.format(45678e3);assertEquals("46E6",str);fmt=new goog.i18n.NumberFormat("000E0");str=fmt.format(45678e3);assertEquals("457E5",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(123e-7);assertEquals("12E-6",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(123e-6);assertEquals("123E-6",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(.00123);assertEquals("1E-3",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(.0123);assertEquals("12E-3",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(.123);assertEquals("123E-3",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(1.23);assertEquals("1E0",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(12.3);assertEquals("12E0",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(123);assertEquals("123E0",str);fmt=new goog.i18n.NumberFormat("###E0");str=fmt.format(1230);assertEquals("1E3",str)}function testPlusSignInExponentPart(){var fmt;fmt=new goog.i18n.NumberFormat("0E+0");str=fmt.format(45678e3);assertEquals("5E+7",str)}function testGroupingParse2(){var value,fmt;fmt=new goog.i18n.NumberFormat("#,###");value=fmt.parse("1,234,567,890");assertEquals(1234567890,value);fmt=new goog.i18n.NumberFormat("#,###");value=fmt.parse("12,3456,7890");assertEquals(1234567890,value);fmt=new goog.i18n.NumberFormat("#");value=fmt.parse("1234567890");assertEquals(1234567890,value)}function testApis(){var fmt,str;fmt=new goog.i18n.NumberFormat("#,###");str=fmt.format(1234567890);assertEquals("1,234,567,890",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00");str=fmt.format(1234.56);assertEquals("$1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;(\xA4#,##0.00)");str=fmt.format(-1234.56);assertEquals("($1,234.56)",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","SEK");str=fmt.format(1234.56);assertEquals("kr1,234.56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;(\xA4#,##0.00)","SEK");str=fmt.format(-1234.56);assertEquals("(kr1,234.56)",str)}function testLocaleSwitch(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_fr;if(goog.i18n.NumberFormatSymbols.DECIMAL_SEP==goog.i18n.NumberFormatSymbols_en.DECIMAL_SEP){return}var fmt=new goog.i18n.NumberFormat("#,###"),str=fmt.format(1234567890);assertEquals("1\xA0234\xA0567\xA0890",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00");str=fmt.format(1234.56);assertEquals("\u20AC1\xA0234,56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;(\xA4#,##0.00)");str=fmt.format(-1234.56);assertEquals("(\u20AC1\xA0234,56)",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;-\xA4#,##0.00","SEK");str=fmt.format(1234.56);assertEquals("kr1\xA0234,56",str);fmt=new goog.i18n.NumberFormat("\xA4#,##0.00;(\xA4#,##0.00)","SEK");str=fmt.format(-1234.56);assertEquals("(kr1\xA0234,56)",str)}function testFrenchParse(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_fr;if(goog.i18n.NumberFormatSymbols.DECIMAL_SEP==goog.i18n.NumberFormatSymbols_en.DECIMAL_SEP){return}var fmt=new goog.i18n.NumberFormat("0.0000"),value=fmt.parse("0,30");assertEquals(.3,value);fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);value=fmt.parse("0,30\xA0\u20AC");assertEquals(.3,value);fmt=new goog.i18n.NumberFormat("#,##0.00");value=fmt.parse("123 456,99");assertEquals(123456.99,value);fmt=new goog.i18n.NumberFormat("#,##0.00");value=fmt.parse("123\xA0456,99");assertEquals(123456.99,value);fmt=new goog.i18n.NumberFormat("#,##0.00");value=fmt.parse("8 123\xA0456,99");assertEquals(8123456.99,value)}function testFailParseShouldThrow(){var fmt=new goog.i18n.NumberFormat("0.0000"),value=fmt.parse("x");assertNaN(value);fmt=new goog.i18n.NumberFormat("0.000x");value=fmt.parse("3y");assertNaN(value);fmt=new goog.i18n.NumberFormat("x0.000");value=fmt.parse("y3");assertNaN(value)}function isFirefox363Linux(){return goog.userAgent.product.FIREFOX&&goog.userAgent.LINUX&&goog.userAgent.product.isVersion("3.6.3")&&!goog.userAgent.product.isVersion("3.6.4")}function testEnforceAscii(){try{goog.i18n.NumberFormatSymbols.ZERO_DIGIT="A";var fmt=new goog.i18n.NumberFormat("0.0000"),str=fmt.format(123.45789179565757);assertEquals("BCD.EFHJ",str);goog.i18n.NumberFormat.setEnforceAsciiDigits(!0);str=fmt.format(123.45789179565757);assertEquals("123.4579",str);goog.i18n.NumberFormat.setEnforceAsciiDigits(!1);str=fmt.format(123.45789179565757);assertEquals("BCD.EFHJ",str)}finally{goog.i18n.NumberFormatSymbols.ZERO_DIGIT="0"}}function testFractionDigits(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(4);fmt.setMaximumFractionDigits(6);assertEquals("0.1230",fmt.format(.123));assertEquals("0.123456",fmt.format(.123456));assertEquals("0.123457",fmt.format(.12345678))}function testFractionDigitsSetOutOfOrder(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(2);fmt.setMaximumFractionDigits(2);fmt.setMaximumFractionDigits(1);fmt.setMinimumFractionDigits(1);assertEquals("2.3",fmt.format(2.34))}function testFractionDigitsInvalid(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(2);fmt.setMaximumFractionDigits(1);try{fmt.format(.123);fail("Should have thrown exception.")}catch(e){}}function testSignificantDigitsEqualToMax(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(0);fmt.setMaximumFractionDigits(2);fmt.setSignificantDigits(2);assertEquals("123",fmt.format(123.4));assertEquals("12",fmt.format(12.34));assertEquals("1.2",fmt.format(1.234));assertEquals("0.12",fmt.format(.1234));assertEquals("0.13",fmt.format(.1284))}function testSignificantDigitsLessThanMax(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(0);fmt.setMaximumFractionDigits(4);fmt.setSignificantDigits(1);assertEquals("123",fmt.format(123.4));assertEquals("12",fmt.format(12.34));assertEquals("1",fmt.format(1.234));assertEquals("0.1",fmt.format(.1234));assertEquals("0.2",fmt.format(.1834))}function testSignificantDigitsMoreThanMax(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setMinimumFractionDigits(0);fmt.setMaximumFractionDigits(2);fmt.setSignificantDigits(3);assertEquals("123",fmt.format(123.4));assertEquals("12.3",fmt.format(12.34));assertEquals("1.23",fmt.format(1.234));assertEquals("0.12",fmt.format(.1234));assertEquals("0.13",fmt.format(.1284))}function testSimpleCompactFrench(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_fr;goog.i18n.CompactNumberFormatSymbols=goog.i18n.CompactNumberFormatSymbols_fr;var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(1234e5);assertEquals("123\xA0M",str)}function testSimpleCompactGerman(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_de;goog.i18n.CompactNumberFormatSymbols=goog.i18n.CompactNumberFormatSymbols_de;var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(1234);assertEquals("1,2\xA0Tsd.",str)}function testSimpleCompact1(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(1234);assertEquals("1.2K",str)}function testSimpleCompact2(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(12345);assertEquals("12K",str)}function testRoundingCompact(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(999999);assertEquals("1M",str)}function testRoundingCompactNegative(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(-999999);assertEquals("-1M",str)}function testCompactSmall(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT),str=fmt.format(.1234);assertEquals("0.12",str)}function testCompactLong(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_LONG),str=fmt.format(12345);assertEquals("12 thousand",str)}function testCompactWithoutSignificant(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);fmt.setSignificantDigits(0);fmt.setMinimumFractionDigits(2);fmt.setMaximumFractionDigits(2);assertEquals("1.23K",fmt.format(1234));assertEquals("1.00K",fmt.format(1e3));assertEquals("123.46K",fmt.format(123456.7));assertEquals("999.99K",fmt.format(999994));assertEquals("1.00M",fmt.format(999995))}function testCompactWithoutSignificant2(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);fmt.setSignificantDigits(0);fmt.setMinimumFractionDigits(0);fmt.setMaximumFractionDigits(2);assertEquals("1.23K",fmt.format(1234));assertEquals("1K",fmt.format(1e3));assertEquals("123.46K",fmt.format(123456.7));assertEquals("999.99K",fmt.format(999994));assertEquals("1M",fmt.format(999995))}function testCompactFallbacks(){var cdfSymbols={COMPACT_DECIMAL_SHORT_PATTERN:{1000:{other:"0K"}}};goog.i18n.CompactNumberFormatSymbols=cdfSymbols;var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_LONG),str=fmt.format(22e13);assertEquals("220,000,000,000K",str)}function testShowTrailingZerosWithSignificantDigits(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.DECIMAL);fmt.setSignificantDigits(2);fmt.setShowTrailingZeros(!0);assertEquals("2.0",fmt.format(2));assertEquals("2,000",fmt.format(2e3));assertEquals("0.20",fmt.format(.2));assertEquals("0.02",fmt.format(.02));assertEquals("0.002",fmt.format(.002));assertEquals("0.00",fmt.format(0));fmt.setShowTrailingZeros(!1);assertEquals("2",fmt.format(2));assertEquals("0.2",fmt.format(.2))}function testShowTrailingZerosWithSignificantDigitsCompactShort(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);fmt.setSignificantDigits(2);fmt.setShowTrailingZeros(!0);assertEquals("2.0",fmt.format(2));assertEquals("2.0K",fmt.format(2e3));assertEquals("20",fmt.format(20))}function testCurrencyCodeOrder(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_fr;goog.i18n.CompactNumberFormatSymbols=goog.i18n.CompactNumberFormatSymbols_fr;var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);assertFalse(fmt.isCurrencyCodeBeforeValue());goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_en;goog.i18n.CompactNumberFormatSymbols=goog.i18n.CompactNumberFormatSymbols_en;var fmt1=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);assertTrue(fmt1.isCurrencyCodeBeforeValue());assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("\xA4 #0");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("\xA4 0 and #");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("#0 \xA4");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("0 and # \xA4");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("\xA4 0");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("0 \xA4");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("\xA4 #");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("# \xA4");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("0 \xA4 #");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("# \xA4 0");assertFalse(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("\xA4");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("0");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("#");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("#0");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("0 and #");assertTrue(fmt.isCurrencyCodeBeforeValue());fmt=new goog.i18n.NumberFormat("nothing");assertTrue(fmt.isCurrencyCodeBeforeValue())}function testCompactWithBaseFormattingNumber(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);fmt.setBaseFormatting(1e3);assertEquals("0.8K",fmt.format(800,1e3));fmt.setBaseFormatting(null);assertEquals("800",fmt.format(800,1e3));fmt.setBaseFormatting(1e3);assertEquals("1,200K",fmt.format(12e5,1e3));assertEquals("0.01K",fmt.format(10,1e3));fmt.setSignificantDigits(0);fmt.setMinimumFractionDigits(2);assertEquals("0.00K",fmt.format(1,1e3))}function testCompactWithBaseFormattingFrench(){stubs.set(goog.i18n,"NumberFormatSymbols",goog.i18n.NumberFormatSymbols_fr);stubs.set(goog.i18n,"CompactNumberFormatSymbols",goog.i18n.CompactNumberFormatSymbols_fr);var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);assertEquals("123\xA0M",fmt.format(1234e5));fmt.setBaseFormatting(1e3);assertEquals("123\xA0400\xA0k",fmt.format(1234e5))}function testGetBaseFormattingNumber(){var fmt=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.COMPACT_SHORT);assertEquals(null,fmt.getBaseFormatting());fmt.setBaseFormatting(1e4);assertEquals(1e4,fmt.getBaseFormatting())}function testPolish(){goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_pl;var fmPl=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_ro;var fmRo=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.CURRENCY);goog.i18n.NumberFormatSymbols=goog.i18n.NumberFormatSymbols_en;assertEquals("100.00\xA0z\u0142",fmPl.format(100));assertEquals("100.00\xA0RON",fmRo.format(100))}function testVerySmallNumberScientific(){var f=new goog.i18n.NumberFormat(goog.i18n.NumberFormat.Format.SCIENTIFIC),result=f.format(5e-324);assertEquals("5E-324",result)}