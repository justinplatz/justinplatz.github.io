goog.provide("goog.proto2.FieldDescriptorTest");goog.setTestOnly("goog.proto2.FieldDescriptorTest");goog.require("goog.proto2.FieldDescriptor");goog.require("goog.proto2.Message");goog.require("goog.testing.jsunit");function testFieldDescriptorConstruction(){var messageType={},fieldDescriptor=new goog.proto2.FieldDescriptor(messageType,10,{name:"test",repeated:!0,packed:!0,fieldType:goog.proto2.FieldDescriptor.FieldType.INT32,type:Number});assertEquals(10,fieldDescriptor.getTag());assertEquals("test",fieldDescriptor.getName());assertEquals(!0,fieldDescriptor.isRepeated());assertEquals(!0,fieldDescriptor.isPacked());assertEquals(goog.proto2.FieldDescriptor.FieldType.INT32,fieldDescriptor.getFieldType());assertEquals(Number,fieldDescriptor.getNativeType());assertEquals(0,fieldDescriptor.getDefaultValue())}function testGetDefaultValueOfString(){var fieldDescriptor=new goog.proto2.FieldDescriptor({},10,{name:"test",fieldType:goog.proto2.FieldDescriptor.FieldType.STRING,type:String});assertEquals("",fieldDescriptor.getDefaultValue())}function testGetDefaultValueOfBool(){var fieldDescriptor=new goog.proto2.FieldDescriptor({},10,{name:"test",fieldType:goog.proto2.FieldDescriptor.FieldType.BOOL,type:Boolean});assertEquals(!1,fieldDescriptor.getDefaultValue())}function testGetDefaultValueOfInt64(){var fieldDescriptor=new goog.proto2.FieldDescriptor({},10,{name:"test",fieldType:goog.proto2.FieldDescriptor.FieldType.INT64,type:String});assertEquals("0",fieldDescriptor.getDefaultValue())}function testRepeatedField(){var messageType={},fieldDescriptor=new goog.proto2.FieldDescriptor(messageType,10,{name:"test",repeated:!0,fieldType:7,type:Number});assertEquals(!0,fieldDescriptor.isRepeated());assertEquals(!1,fieldDescriptor.isRequired());assertEquals(!1,fieldDescriptor.isOptional())}function testRequiredField(){var messageType={},fieldDescriptor=new goog.proto2.FieldDescriptor(messageType,10,{name:"test",required:!0,fieldType:7,type:Number});assertEquals(!1,fieldDescriptor.isRepeated());assertEquals(!0,fieldDescriptor.isRequired());assertEquals(!1,fieldDescriptor.isOptional())}function testOptionalField(){var messageType={},fieldDescriptor=new goog.proto2.FieldDescriptor(messageType,10,{name:"test",fieldType:7,type:Number});assertEquals(!1,fieldDescriptor.isRepeated());assertEquals(!1,fieldDescriptor.isRequired());assertEquals(!0,fieldDescriptor.isOptional())}function testContaingType(){var MessageType=function(){MessageType.base(this,"constructor")};goog.inherits(MessageType,goog.proto2.Message);MessageType.getDescriptor=function(){if(!MessageType.descriptor_){var descriptorObj={0:{name:"test_message",fullName:"this.is.a.test_message"},10:{name:"test",fieldType:7,type:Number}};MessageType.descriptor_=goog.proto2.Message.createDescriptor(MessageType,descriptorObj)}return MessageType.descriptor_};MessageType.prototype.getDescriptor=MessageType.getDescriptor;var descriptor=MessageType.getDescriptor(),fieldDescriptor=descriptor.getFields()[0];assertEquals("10",fieldDescriptor.getTag());assertEquals(descriptor,fieldDescriptor.getContainingType())}