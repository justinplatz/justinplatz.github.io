goog.provide("goog.iter");goog.provide("goog.iter.Iterable");goog.provide("goog.iter.Iterator");goog.provide("goog.iter.StopIteration");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.functions");goog.require("goog.math");goog.iter.Iterable;goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration};goog.iter.Iterator.prototype.__iterator__=function(opt_keys){return this};goog.iter.toIterator=function(iterable){if(iterable instanceof goog.iter.Iterator){return iterable}if("function"==typeof iterable.__iterator__){return iterable.__iterator__(!1)}if(goog.isArrayLike(iterable)){var i=0,newIter=new goog.iter.Iterator;newIter.next=function(){while(!0){if(i>=iterable.length){throw goog.iter.StopIteration}if(!(i in iterable)){i++;continue}return iterable[i++]}};return newIter}throw Error("Not implemented")};goog.iter.forEach=function(iterable,f,opt_obj){if(goog.isArrayLike(iterable)){try{goog.array.forEach(iterable,f,opt_obj)}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}}else{iterable=goog.iter.toIterator(iterable);try{while(!0){f.call(opt_obj,iterable.next(),void 0,iterable)}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}}};goog.iter.filter=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable),newIter=new goog.iter.Iterator;newIter.next=function(){while(!0){var val=iterator.next();if(f.call(opt_obj,val,void 0,iterator)){return val}}};return newIter};goog.iter.filterFalse=function(iterable,f,opt_obj){return goog.iter.filter(iterable,goog.functions.not(f),opt_obj)};goog.iter.range=function(startOrStop,opt_stop,opt_step){var start=0,stop=startOrStop,step=opt_step||1;if(1<arguments.length){start=startOrStop;stop=opt_stop}if(0==step){throw Error("Range step argument must not be zero")}var newIter=new goog.iter.Iterator;newIter.next=function(){if(0<step&&start>=stop||0>step&&start<=stop){throw goog.iter.StopIteration}var rv=start;start+=step;return rv};return newIter};goog.iter.join=function(iterable,deliminator){return goog.iter.toArray(iterable).join(deliminator)};goog.iter.map=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable),newIter=new goog.iter.Iterator;newIter.next=function(){var val=iterator.next();return f.call(opt_obj,val,void 0,iterator)};return newIter};goog.iter.reduce=function(iterable,f,val,opt_obj){var rval=val;goog.iter.forEach(iterable,function(val){rval=f.call(opt_obj,rval,val)});return rval};goog.iter.some=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(!0){if(f.call(opt_obj,iterable.next(),void 0,iterable)){return!0}}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}return!1};goog.iter.every=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(!0){if(!f.call(opt_obj,iterable.next(),void 0,iterable)){return!1}}}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}}return!0};goog.iter.chain=function(var_args){return goog.iter.chainFromIterable(arguments)};goog.iter.chainFromIterable=function(iterable){var iterator=goog.iter.toIterator(iterable),iter=new goog.iter.Iterator,current=null;iter.next=function(){while(!0){if(null==current){var it=iterator.next();current=goog.iter.toIterator(it)}try{return current.next()}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}current=null}}};return iter};goog.iter.dropWhile=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable),newIter=new goog.iter.Iterator,dropping=!0;newIter.next=function(){while(!0){var val=iterator.next();if(dropping&&f.call(opt_obj,val,void 0,iterator)){continue}else{dropping=!1}return val}};return newIter};goog.iter.takeWhile=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable),iter=new goog.iter.Iterator;iter.next=function(){var val=iterator.next();if(f.call(opt_obj,val,void 0,iterator)){return val}throw goog.iter.StopIteration};return iter};goog.iter.toArray=function(iterable){if(goog.isArrayLike(iterable)){return goog.array.toArray(iterable)}iterable=goog.iter.toIterator(iterable);var array=[];goog.iter.forEach(iterable,function(val){array.push(val)});return array};goog.iter.equals=function(iterable1,iterable2,opt_equalsFn){var fillValue={},pairs=goog.iter.zipLongest(fillValue,iterable1,iterable2),equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;return goog.iter.every(pairs,function(pair){return equalsFn(pair[0],pair[1])})};goog.iter.nextOrValue=function(iterable,defaultValue){try{return goog.iter.toIterator(iterable).next()}catch(e){if(e!=goog.iter.StopIteration){throw e}return defaultValue}};goog.iter.product=function(var_args){var someArrayEmpty=goog.array.some(arguments,function(arr){return!arr.length});if(someArrayEmpty||!arguments.length){return new goog.iter.Iterator}var iter=new goog.iter.Iterator,arrays=arguments,indicies=goog.array.repeat(0,arrays.length);iter.next=function(){if(indicies){for(var retVal=goog.array.map(indicies,function(valueIndex,arrayIndex){return arrays[arrayIndex][valueIndex]}),i=indicies.length-1;0<=i;i--){goog.asserts.assert(indicies);if(indicies[i]<arrays[i].length-1){indicies[i]++;break}if(0==i){indicies=null;break}indicies[i]=0}return retVal}throw goog.iter.StopIteration};return iter};goog.iter.cycle=function(iterable){var baseIterator=goog.iter.toIterator(iterable),cache=[],cacheIndex=0,iter=new goog.iter.Iterator,useCache=!1;iter.next=function(){var returnElement=null;if(!useCache){try{returnElement=baseIterator.next();cache.push(returnElement);return returnElement}catch(e){if(e!=goog.iter.StopIteration||goog.array.isEmpty(cache)){throw e}useCache=!0}}returnElement=cache[cacheIndex];cacheIndex=(cacheIndex+1)%cache.length;return returnElement};return iter};goog.iter.count=function(opt_start,opt_step){var counter=opt_start||0,step=goog.isDef(opt_step)?opt_step:1,iter=new goog.iter.Iterator;iter.next=function(){var returnValue=counter;counter+=step;return returnValue};return iter};goog.iter.repeat=function(value){var iter=new goog.iter.Iterator;iter.next=goog.functions.constant(value);return iter};goog.iter.accumulate=function(iterable){var iterator=goog.iter.toIterator(iterable),total=0,iter=new goog.iter.Iterator;iter.next=function(){total+=iterator.next();return total};return iter};goog.iter.zip=function(var_args){var args=arguments,iter=new goog.iter.Iterator;if(0<args.length){var iterators=goog.array.map(args,goog.iter.toIterator);iter.next=function(){var arr=goog.array.map(iterators,function(it){return it.next()});return arr}}return iter};goog.iter.zipLongest=function(fillValue,var_args){var args=goog.array.slice(arguments,1),iter=new goog.iter.Iterator;if(0<args.length){var iterators=goog.array.map(args,goog.iter.toIterator);iter.next=function(){var iteratorsHaveValues=!1,arr=goog.array.map(iterators,function(it){var returnValue;try{returnValue=it.next();iteratorsHaveValues=!0}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}returnValue=fillValue}return returnValue});if(!iteratorsHaveValues){throw goog.iter.StopIteration}return arr}}return iter};goog.iter.compress=function(iterable,selectors){var selectorIterator=goog.iter.toIterator(selectors);return goog.iter.filter(iterable,function(){return!!selectorIterator.next()})};goog.iter.GroupByIterator_=function(iterable,opt_keyFunc){this.iterator=goog.iter.toIterator(iterable);this.keyFunc=opt_keyFunc||goog.functions.identity;this.targetKey;this.currentKey;this.currentValue};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);goog.iter.GroupByIterator_.prototype.next=function(){while(this.currentKey==this.targetKey){this.currentValue=this.iterator.next();this.currentKey=this.keyFunc(this.currentValue)}this.targetKey=this.currentKey;return[this.currentKey,this.groupItems_(this.targetKey)]};goog.iter.GroupByIterator_.prototype.groupItems_=function(targetKey){var arr=[];while(this.currentKey==targetKey){arr.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(ex){if(ex!==goog.iter.StopIteration){throw ex}break}this.currentKey=this.keyFunc(this.currentValue)}return arr};goog.iter.groupBy=function(iterable,opt_keyFunc){return new goog.iter.GroupByIterator_(iterable,opt_keyFunc)};goog.iter.starMap=function(iterable,f,opt_obj){var iterator=goog.iter.toIterator(iterable),iter=new goog.iter.Iterator;iter.next=function(){var args=goog.iter.toArray(iterator.next());return f.apply(opt_obj,goog.array.concat(args,void 0,iterator))};return iter};goog.iter.tee=function(iterable,opt_num){var iterator=goog.iter.toIterator(iterable),num=goog.isNumber(opt_num)?opt_num:2,buffers=goog.array.map(goog.array.range(num),function(){return[]}),addNextIteratorValueToBuffers=function(){var val=iterator.next();goog.array.forEach(buffers,function(buffer){buffer.push(val)})},createIterator=function(buffer){var iter=new goog.iter.Iterator;iter.next=function(){if(goog.array.isEmpty(buffer)){addNextIteratorValueToBuffers()}goog.asserts.assert(!goog.array.isEmpty(buffer));return buffer.shift()};return iter};return goog.array.map(buffers,createIterator)};goog.iter.enumerate=function(iterable,opt_start){return goog.iter.zip(goog.iter.count(opt_start),iterable)};goog.iter.limit=function(iterable,limitSize){goog.asserts.assert(goog.math.isInt(limitSize)&&0<=limitSize);var iterator=goog.iter.toIterator(iterable),iter=new goog.iter.Iterator,remaining=limitSize;iter.next=function(){if(0<remaining--){return iterator.next()}throw goog.iter.StopIteration};return iter};goog.iter.consume=function(iterable,count){goog.asserts.assert(goog.math.isInt(count)&&0<=count);var iterator=goog.iter.toIterator(iterable);while(0<count--){goog.iter.nextOrValue(iterator,null)}return iterator};goog.iter.slice=function(iterable,start,opt_end){goog.asserts.assert(goog.math.isInt(start)&&0<=start);var iterator=goog.iter.consume(iterable,start);if(goog.isNumber(opt_end)){goog.asserts.assert(goog.math.isInt(opt_end)&&opt_end>=start);iterator=goog.iter.limit(iterator,opt_end-start)}return iterator};goog.iter.hasDuplicates_=function(arr){var deduped=[];goog.array.removeDuplicates(arr,deduped);return arr.length!=deduped.length};goog.iter.permutations=function(iterable,opt_length){var elements=goog.iter.toArray(iterable),length=goog.isNumber(opt_length)?opt_length:elements.length,sets=goog.array.repeat(elements,length),product=goog.iter.product.apply(void 0,sets);return goog.iter.filter(product,function(arr){return!goog.iter.hasDuplicates_(arr)})};goog.iter.combinations=function(iterable,length){var elements=goog.iter.toArray(iterable),indexes=goog.iter.range(elements.length),indexIterator=goog.iter.permutations(indexes,length),sortedIndexIterator=goog.iter.filter(indexIterator,function(arr){return goog.array.isSorted(arr)}),iter=new goog.iter.Iterator;function getIndexFromElements(index){return elements[index]}iter.next=function(){return goog.array.map(sortedIndexIterator.next(),getIndexFromElements)};return iter};goog.iter.combinationsWithReplacement=function(iterable,length){var elements=goog.iter.toArray(iterable),indexes=goog.array.range(elements.length),sets=goog.array.repeat(indexes,length),indexIterator=goog.iter.product.apply(void 0,sets),sortedIndexIterator=goog.iter.filter(indexIterator,function(arr){return goog.array.isSorted(arr)}),iter=new goog.iter.Iterator;function getIndexFromElements(index){return elements[index]}iter.next=function(){return goog.array.map(sortedIndexIterator.next(),getIndexFromElements)};return iter};