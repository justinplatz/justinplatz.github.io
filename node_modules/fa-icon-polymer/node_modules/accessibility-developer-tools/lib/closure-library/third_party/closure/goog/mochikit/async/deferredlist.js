goog.provide("goog.async.DeferredList");goog.require("goog.async.Deferred");goog.async.DeferredList=function(list,opt_fireOnOneCallback,opt_fireOnOneErrback,opt_consumeErrors,opt_canceler,opt_defaultScope){goog.async.DeferredList.base(this,"constructor",opt_canceler,opt_defaultScope);this.list_=list;this.deferredResults_=[];this.fireOnOneCallback_=!!opt_fireOnOneCallback;this.fireOnOneErrback_=!!opt_fireOnOneErrback;this.consumeErrors_=!!opt_consumeErrors;this.numFinished_=0;for(var i=0,d;i<list.length;i++){d=list[i];d.addCallbacks(goog.bind(this.handleCallback_,this,i,!0),goog.bind(this.handleCallback_,this,i,!1))}if(0==list.length&&!this.fireOnOneCallback_){this.callback(this.deferredResults_)}};goog.inherits(goog.async.DeferredList,goog.async.Deferred);goog.async.DeferredList.prototype.handleCallback_=function(index,success,result){this.numFinished_++;this.deferredResults_[index]=[success,result];if(!this.hasFired()){if(this.fireOnOneCallback_&&success){this.callback([index,result])}else if(this.fireOnOneErrback_&&!success){this.errback(result)}else if(this.numFinished_==this.list_.length){this.callback(this.deferredResults_)}}if(this.consumeErrors_&&!success){result=null}return result};goog.async.DeferredList.prototype.errback=function(res){goog.async.DeferredList.base(this,"errback",res);for(var i=0;i<this.list_.length;i++){this.list_[i].cancel()}};goog.async.DeferredList.gatherResults=function(list){return new goog.async.DeferredList(list,!1,!0).addCallback(function(results){for(var output=[],i=0;i<results.length;i++){output[i]=results[i][1]}return output})};