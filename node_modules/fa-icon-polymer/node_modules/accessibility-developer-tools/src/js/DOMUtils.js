goog.provide("axs.dom");axs.dom.parentElement=function(node){if(!node)return null;var parentNode=axs.dom.composedParentNode(node);if(!parentNode)return null;switch(parentNode.nodeType){case Node.ELEMENT_NODE:return parentNode;default:return axs.dom.parentElement(parentNode);}};axs.dom.shadowHost=function(fragment){if("host"in fragment)return fragment.host;else return null};axs.dom.composedParentNode=function(node){if(!node)return null;if(node.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return axs.dom.shadowHost(node);var parentNode=node.parentNode;if(!parentNode)return null;if(parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return axs.dom.shadowHost(parentNode);if(!parentNode.shadowRoot)return parentNode;if(node.nodeType===Node.ELEMENT_NODE||node.nodeType===Node.TEXT_NODE){var assignedSlot=node.assignedSlot;if(HTMLSlotElement&&assignedSlot instanceof HTMLSlotElement)return axs.dom.composedParentNode(assignedSlot)}if("function"===typeof node.getDestinationInsertionPoints){var insertionPoints=node.getDestinationInsertionPoints();if(0<insertionPoints.length)return axs.dom.composedParentNode(insertionPoints[insertionPoints.length-1])}return null};axs.dom.asElement=function(node){var element;switch(node.nodeType){case Node.COMMENT_NODE:return null;case Node.ELEMENT_NODE:element=node;if("script"==element.localName||"template"==element.localName)return null;return element;case Node.DOCUMENT_FRAGMENT_NODE:return node.host;case Node.TEXT_NODE:return axs.dom.parentElement(node);default:console.warn("Unhandled node type: ",node.nodeType);}return null};axs.dom.composedTreeSearch=function(node,end,callbacks,parentFlags,opt_shadowRoot){if(node===end)return!0;if(node.nodeType==Node.ELEMENT_NODE)var element=node;var found=!1,flags=Object.create(parentFlags);if(element){var localName=element.localName;if(flags.collectIdRefs){flags.idrefs=axs.utils.getReferencedIds(element)}if(!flags.disabled||"legend"===localName&&axs.browserUtils.matchSelector(element,"fieldset>legend:first-of-type")){flags.disabled=axs.utils.isElementDisabled(element,!0)}if(!flags.hidden){flags.hidden=axs.utils.isElementHidden(element)}if(callbacks.preorder){if(!callbacks.preorder(element,flags))return found}var shadowRoot=element.shadowRoot||element.webkitShadowRoot;if(shadowRoot){flags.level++;found=axs.dom.composedTreeSearch(shadowRoot,end,callbacks,flags,shadowRoot);if(element&&callbacks.postorder&&!found)callbacks.postorder(element,flags);return found}if("content"==localName&&"function"===typeof element.getDistributedNodes){for(var content=element,distributedNodes=content.getDistributedNodes(),i=0;i<distributedNodes.length&&!found;i++){found=axs.dom.composedTreeSearch(distributedNodes[i],end,callbacks,flags,opt_shadowRoot)}if(callbacks.postorder&&!found)callbacks.postorder.call(null,element,flags);return found}}var child=node.firstChild;while(null!=child&&!found){found=axs.dom.composedTreeSearch(child,end,callbacks,flags,opt_shadowRoot);child=child.nextSibling}if(element&&callbacks.postorder&&!found)callbacks.postorder.call(null,element,flags);return found};