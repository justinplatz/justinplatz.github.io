goog.require("axs.AuditRules");goog.require("axs.browserUtils");goog.require("axs.constants.Severity");(function(){function tableDoesNotHaveHeaderRow(rows){for(var headerRow=rows[0],headerCells=headerRow.children,i=0;i<headerCells.length;i++){if("TH"!=headerCells[i].tagName){return!0}}return!1}function tableDoesNotHaveHeaderColumn(rows){for(var i=0;i<rows.length;i++){if("TH"!=rows[i].children[0].tagName){return!0}}return!1}function tableDoesNotHaveGridLayout(rows){for(var headerCells=rows[0].children,i=1;i<headerCells.length;i++){if("TH"!=headerCells[i].tagName){return!0}}for(var i=1;i<rows.length;i++){if("TH"!=rows[i].children[0].tagName){return!0}}return!1}function isLayoutTable(element){if(0==element.childElementCount){return!0}if(element.hasAttribute("role")&&"presentation"!=element.getAttribute("role")){return!1}if("presentation"==element.getAttribute("role")){for(var tableChildren=element.querySelectorAll("*"),i=0;i<tableChildren.length;i++){if("TR"!=tableChildren[i].tagName&&"TD"!=tableChildren[i].tagName){return!1}}return!0}return!1}axs.AuditRules.addRule({name:"tableHasAppropriateHeaders",heading:"Tables should have appropriate headers",url:"https://github.com/GoogleChrome/accessibility-developer-tools/wiki/Audit-Rules#ax_table_01",severity:axs.constants.Severity.SEVERE,relevantElementMatcher:function(element){return axs.browserUtils.matchSelector(element,"table")&&!isLayoutTable(element)&&0<element.querySelectorAll("tr").length},test:function(element){var rows=element.querySelectorAll("tr");return tableDoesNotHaveHeaderRow(rows)&&tableDoesNotHaveHeaderColumn(rows)&&tableDoesNotHaveGridLayout(rows)},code:"AX_TABLE_01"})})();