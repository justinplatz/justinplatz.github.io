goog.require("axs.AuditRules");goog.require("axs.browserUtils");goog.require("axs.constants");goog.require("axs.utils");(function(){var spec={name:"requiredOwnedAriaRoleMissing",heading:"Elements with ARIA roles must ensure required owned elements are present",url:"https://github.com/GoogleChrome/accessibility-developer-tools/wiki/Audit-Rules#ax_aria_08",severity:axs.constants.Severity.SEVERE,relevantElementMatcher:function(element){if(!axs.browserUtils.matchSelector(element,"[role]"))return!1;var required=getRequired(element);return 0<required.length},test:function(element){var busy=element.getAttribute("aria-busy");if("true"===busy)return!1;for(var required=getRequired(element),i=required.length-1,descendants;0<=i;i--){descendants=axs.utils.findDescendantsWithRole(element,required[i]);if(descendants&&descendants.length){return!1}}for(var ownedElements=axs.utils.getIdReferents("aria-owns",element),i=ownedElements.length-1;0<=i;i--){var ownedElement=ownedElements[i],ownedElementRole=axs.utils.getRoles(ownedElement,!0);if(ownedElementRole&&ownedElementRole.applied){for(var appliedRole=ownedElementRole.applied,j=required.length-1;0<=j;j--){if(appliedRole.name===required[j]){return!1}}}}return!0},code:"AX_ARIA_08"};function getRequired(element){var elementRole=axs.utils.getRoles(element);if(!elementRole||!elementRole.applied)return[];var appliedRole=elementRole.applied;if(!appliedRole.valid)return[];return appliedRole.details.mustcontain||[]}axs.AuditRules.addRule(spec)})();