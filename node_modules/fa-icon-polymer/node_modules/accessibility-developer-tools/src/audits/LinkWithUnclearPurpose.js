goog.require("axs.AuditRules");goog.require("axs.browserUtils");goog.require("axs.constants.Severity");axs.AuditRules.addRule({name:"linkWithUnclearPurpose",heading:"The purpose of each link should be clear from the link text",url:"https://github.com/GoogleChrome/accessibility-developer-tools/wiki/Audit-Rules#ax_text_04",severity:axs.constants.Severity.WARNING,relevantElementMatcher:function(element,flags){return axs.browserUtils.matchSelector(element,"a[href]")&&!flags.hidden},test:function(anchor,flags,opt_config){for(var config=opt_config||{},blacklistPhrases=config.blacklistPhrases||[],whitespaceRE=/\s+/,i=0;i<blacklistPhrases.length;i++){var phraseREString="^\\s*"+blacklistPhrases[i].trim().replace(whitespaceRE,"\\s*")+"s*[^a-z]$",phraseRE=new RegExp(phraseREString,"i");if(phraseRE.test(anchor.textContent))return!0}var stopwords=config.stopwords||["click","tap","go","here","learn","more","this","page","link","about"],filteredText=axs.properties.findTextAlternatives(anchor,{});if(null===filteredText||""===filteredText.trim())return!0;filteredText=filteredText.replace(/[^a-zA-Z ]/g,"");for(var i=0,stopwordRE;i<stopwords.length;i++){stopwordRE=new RegExp("\\b"+stopwords[i]+"\\b","ig");filteredText=filteredText.replace(stopwordRE,"");if(""==filteredText.trim())return!0}return!1},code:"AX_TEXT_04"});